<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta name="description" content="Summary: &lt;Python与数据分析&gt;课程笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="Python笔记">
<meta property="og:url" content="http://example.com/2021/11/07/lesson/index.html">
<meta property="og:site_name" content="Nothing NEW">
<meta property="og:description" content="Summary: &lt;Python与数据分析&gt;课程笔记">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="attachment:image-2.png">
<meta property="og:image" content="attachment:image-3.png">
<meta property="og:image" content="attachment:image-4.png">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="attachment:image-2.png">
<meta property="og:image" content="attachment:image-3.png">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="attachment:image-2.png">
<meta property="og:image" content="attachment:image-3.png">
<meta property="og:image" content="attachment:image-2.png">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="attachment:image-2.png">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_704_0.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_708_0.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_710_0.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_711_1.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_712_1.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_713_1.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_715_0.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_717_1.png">
<meta property="og:image" content="attachment:image.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_728_0.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_732_0.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_739_0.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_747_0.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_749_1.png">
<meta property="og:image" content="http://example.com/2021/11/07/lesson/lesson_files/lesson_752_1.png">
<meta property="article:published_time" content="2021-11-07T10:48:22.000Z">
<meta property="article:modified_time" content="2021-11-07T11:26:12.305Z">
<meta property="article:author" content="Somebody">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="attachment:image.png">


<link rel="canonical" href="http://example.com/2021/11/07/lesson/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2021/11/07/lesson/","path":"2021/11/07/lesson/","title":"Python笔记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Python笔记 | Nothing NEW</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Nothing NEW</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E3%80%9001%E3%80%91%E8%AF%BE%E7%A8%8B%E5%AF%BC%E8%AF%BB"><span class="nav-number">1.</span> <span class="nav-text">【01】课程导读</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E3%80%9002%E3%80%91-python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="nav-number">2.</span> <span class="nav-text">【02】 python基础知识</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E5%AD%97%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">2.1.</span> <span class="nav-text">数字与表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.2.</span> <span class="nav-text">对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">2.3.</span> <span class="nav-text">字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="nav-number">2.3.1.</span> <span class="nav-text">字符串格式化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95"><span class="nav-number">2.3.2.</span> <span class="nav-text">字符串方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%A5%E6%9C%9F"><span class="nav-number">2.4.</span> <span class="nav-text">时间与日期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="nav-number">2.5.</span> <span class="nav-text">语法糖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AD%94%E6%9C%AF%E5%91%BD%E4%BB%A4"><span class="nav-number">2.6.</span> <span class="nav-text">魔术命令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E3%80%9003%E3%80%91%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="nav-number">3.</span> <span class="nav-text">【03】数据结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%97%E8%A1%A8"><span class="nav-number">3.1.</span> <span class="nav-text">列表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%83%E7%BB%84"><span class="nav-number">3.2.</span> <span class="nav-text">元组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E5%85%B8"><span class="nav-number">3.3.</span> <span class="nav-text">字典</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9B%86%E5%90%88"><span class="nav-number">3.4.</span> <span class="nav-text">集合</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A8%E5%AF%BC%E5%BC%8F"><span class="nav-number">3.5.</span> <span class="nav-text">推导式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E3%80%9004%E3%80%91%E8%AF%AD%E5%8F%A5%E5%92%8C%E6%8E%A7%E5%88%B6%E6%B5%81"><span class="nav-number">4.</span> <span class="nav-text">【04】语句和控制流</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E5%8F%A5"><span class="nav-number">4.1.</span> <span class="nav-text">语句</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E3%80%9005%E3%80%91%E5%87%BD%E6%95%B0"><span class="nav-number">5.</span> <span class="nav-text">【05】函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="nav-number">5.0.1.</span> <span class="nav-text">自定义函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0"><span class="nav-number">5.0.2.</span> <span class="nav-text">函数的参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E-%E5%92%8C-%E7%9A%84%E7%94%A8%E6%B3%95"><span class="nav-number">5.0.3.</span> <span class="nav-text">关于*和**的用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="nav-number">5.0.4.</span> <span class="nav-text">函数的作用域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0%EF%BC%88lambda%EF%BC%89"><span class="nav-number">5.0.5.</span> <span class="nav-text">匿名函数（lambda）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0"><span class="nav-number">5.0.6.</span> <span class="nav-text">递归函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AD%E5%8C%85%E5%87%BD%E6%95%B0"><span class="nav-number">5.0.7.</span> <span class="nav-text">闭包函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%AF%E9%87%8C%E5%8C%96"><span class="nav-number">5.0.8.</span> <span class="nav-text">柯里化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8D%E6%9F%AF%E9%87%8C%E5%8C%96"><span class="nav-number">5.0.9.</span> <span class="nav-text">反柯里化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0"><span class="nav-number">5.0.10.</span> <span class="nav-text">高阶函数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E3%80%9006%E3%80%91%E8%BF%AD%E4%BB%A3%E5%99%A8%E3%80%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%81%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">6.</span> <span class="nav-text">【06】迭代器、生成器、装饰器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1"><span class="nav-number">6.1.</span> <span class="nav-text">可迭代对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="nav-number">6.2.</span> <span class="nav-text">迭代器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E5%99%A8"><span class="nav-number">6.3.</span> <span class="nav-text">生成器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">6.4.</span> <span class="nav-text">装饰器</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E3%80%9007%E3%80%91%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80"><span class="nav-number">7.</span> <span class="nav-text">【07】面向对象的编程技术基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B1%BB"><span class="nav-number">7.1.</span> <span class="nav-text">类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E6%B3%95"><span class="nav-number">7.2.</span> <span class="nav-text">方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7"><span class="nav-number">7.3.</span> <span class="nav-text">属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%A7%E6%89%BF"><span class="nav-number">7.4.</span> <span class="nav-text">继承</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E6%80%81"><span class="nav-number">7.5.</span> <span class="nav-text">多态</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF"><span class="nav-number">7.6.</span> <span class="nav-text">多重继承</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E6%80%A7"><span class="nav-number">7.7.</span> <span class="nav-text">特性</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E3%80%9008%E3%80%91%E5%BC%82%E5%B8%B8%E6%8D%95%E8%8E%B7%E4%B8%8E%E5%AE%B9%E9%94%99%E5%A4%84%E7%90%86"><span class="nav-number">8.</span> <span class="nav-text">【08】异常捕获与容错处理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E3%80%9009%E3%80%91%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86%E4%B8%8E%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2-numpy"><span class="nav-number">9.</span> <span class="nav-text">【09】数据预处理与数据探索 - numpy</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E3%80%9010%E3%80%91%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86%E4%B8%8E%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2-pandas"><span class="nav-number">10.</span> <span class="nav-text">【10】数据预处理与数据探索 - pandas</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Series"><span class="nav-number">10.1.</span> <span class="nav-text">Series</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DataFrame"><span class="nav-number">10.2.</span> <span class="nav-text">DataFrame</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E5%85%B8%E6%9E%84%E9%80%A0dataframe"><span class="nav-number">10.2.1.</span> <span class="nav-text">字典构造dataframe</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy%E6%95%B0%E7%BB%84%E6%9E%84%E9%80%A0dataframe"><span class="nav-number">10.2.2.</span> <span class="nav-text">numpy数组构造dataframe</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B4%E6%8E%A5%E8%AF%BB%E5%85%A5csv%E6%96%87%E4%BB%B6%E6%88%96excel%E6%96%87%E4%BB%B6%EF%BC%8C%E6%9E%84%E9%80%A0DataFrame"><span class="nav-number">10.2.3.</span> <span class="nav-text">直接读入csv文件或excel文件，构造DataFrame</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E6%9E%84%E9%80%A0%E6%96%B9%E5%BC%8F"><span class="nav-number">10.2.4.</span> <span class="nav-text">其他数据构造方式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%BE%93%E5%87%BA"><span class="nav-number">10.3.</span> <span class="nav-text">数据输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE%E5%AD%90%E9%9B%86%EF%BC%88%E5%88%87%E7%89%87%EF%BC%89"><span class="nav-number">10.4.</span> <span class="nav-text">提取数据子集（切片）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4-%E4%BF%AE%E6%94%B9%E8%A1%8C%E5%88%97%E6%95%B0%E6%8D%AE"><span class="nav-number">10.5.</span> <span class="nav-text">删除&#x2F;修改行列数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%92%E5%BA%8F"><span class="nav-number">10.6.</span> <span class="nav-text">排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%92%E5%90%8D"><span class="nav-number">10.7.</span> <span class="nav-text">排名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%90%E7%AE%97"><span class="nav-number">10.8.</span> <span class="nav-text">运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%BA%94%E7%94%A8%E4%B8%8E%E6%98%A0%E5%B0%84"><span class="nav-number">10.9.</span> <span class="nav-text">函数的应用与映射</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E7%BB%84"><span class="nav-number">10.10.</span> <span class="nav-text">分组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%90%88%E5%B9%B6"><span class="nav-number">10.10.1.</span> <span class="nav-text">数据合并</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E7%B1%BB%E6%95%B0%E6%8D%AE"><span class="nav-number">10.11.</span> <span class="nav-text">分类数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E6%95%B0%E6%8D%AE"><span class="nav-number">10.12.</span> <span class="nav-text">时间序列数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8C%83%E5%9B%B4%E5%92%8C%E5%81%8F%E7%A7%BB%E9%87%8F"><span class="nav-number">10.12.1.</span> <span class="nav-text">范围和偏移量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E7%A7%BB%E5%8A%A8%E5%8F%8A%E8%BF%90%E7%AE%97"><span class="nav-number">10.12.2.</span> <span class="nav-text">时间移动及运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%91%E7%8E%87%E8%BD%AC%E6%8D%A2%E5%8F%8A%E9%87%8D%E9%87%87%E6%A0%B7"><span class="nav-number">10.12.3.</span> <span class="nav-text">频率转换及重采样</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E3%80%9011%E3%80%91%E6%95%B0%E6%8D%AE%E6%8F%8F%E8%BF%B0"><span class="nav-number">11.</span> <span class="nav-text">【11】数据描述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E9%9B%86%E4%B8%AD%E8%B6%8B%E5%8A%BF"><span class="nav-number">11.1.</span> <span class="nav-text">（1）集中趋势</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E7%A6%BB%E6%95%A3%E7%A8%8B%E5%BA%A6"><span class="nav-number">11.2.</span> <span class="nav-text">（2）离散程度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%88%86%E5%B8%83%E5%BD%A2%E7%8A%B6"><span class="nav-number">11.3.</span> <span class="nav-text">(3)分布形状</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E7%9B%B8%E5%85%B3%E7%B3%BB%E6%95%B0"><span class="nav-number">11.4.</span> <span class="nav-text">（4）相关系数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%9F%E8%AE%A1%E9%87%8F%E7%9A%84%E6%B1%87%E6%80%BB%E8%BE%93%E5%87%BA"><span class="nav-number">11.5.</span> <span class="nav-text">统计量的汇总输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%9F%E8%AE%A1%E8%A1%A8"><span class="nav-number">11.6.</span> <span class="nav-text">统计表</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E3%80%9012%E3%80%91%E7%BB%9F%E8%AE%A1%E5%9B%BE%E5%BD%A2%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="nav-number">12.</span> <span class="nav-text">【12】统计图形与数据可视化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%9B%BE%E4%BE%8B"><span class="nav-number">12.1.</span> <span class="nav-text">创建图例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8B%BC%E6%8E%A5%E5%AD%90%E5%9B%BE"><span class="nav-number">12.2.</span> <span class="nav-text">拼接子图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%98%E5%88%B6%E4%B8%89%E7%BB%B4%E5%9B%BE%E5%BD%A2"><span class="nav-number">12.3.</span> <span class="nav-text">绘制三维图形</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%98%E5%88%B6%E5%8A%A8%E5%9B%BE"><span class="nav-number">12.4.</span> <span class="nav-text">绘制动图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%BB%98%E5%9B%BE"><span class="nav-number">12.5.</span> <span class="nav-text">面向对象的绘图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pandas%E7%BB%98%E5%9B%BE"><span class="nav-number">12.6.</span> <span class="nav-text">pandas绘图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%8D%E4%BA%91%E5%9B%BE"><span class="nav-number">12.7.</span> <span class="nav-text">词云图</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E3%80%9013%E3%80%91%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90"><span class="nav-number">13.</span> <span class="nav-text">【13】回归分析</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E5%9E%8B%E8%AF%8A%E6%96%AD"><span class="nav-number">13.1.</span> <span class="nav-text">模型诊断</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E5%85%83%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90"><span class="nav-number">13.2.</span> <span class="nav-text">多元线性回归分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E6%80%A7%E8%87%AA%E5%8F%98%E9%87%8F%E7%9A%84%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90"><span class="nav-number">13.2.1.</span> <span class="nav-text">定性自变量的线性回归分析</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Somebody</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/07/lesson/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Somebody">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nothing NEW">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Python笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-11-07 18:48:22 / Modified: 19:26:12" itemprop="dateCreated datePublished" datetime="2021-11-07T18:48:22+08:00">2021-11-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Summary: &lt;Python与数据分析&gt;课程笔记</p>
<span id="more"></span>

<h1 id="【01】课程导读"><a href="#【01】课程导读" class="headerlink" title="【01】课程导读"></a>【01】课程导读</h1><ul>
<li>交换两个对象数值：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="number">100</span>;b=<span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;before swap:a=&#x27;</span>+<span class="built_in">str</span>(a),<span class="string">&#x27;b=&#x27;</span>+<span class="built_in">str</span>(b))</span><br><span class="line">n=a;a=b;b=n</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;after swap:a=&#x27;</span>+<span class="built_in">str</span>(a),<span class="string">&#x27;b=&#x27;</span>+<span class="built_in">str</span>(b))</span><br></pre></td></tr></table></figure>

<pre><code>before swap:a=100 b=10
after swap:a=10 b=100
</code></pre>
<ul>
<li>不需要临时对象的交换程序：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="number">100</span>;b=<span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;before swap:a=&#x27;</span>+<span class="built_in">str</span>(a),<span class="string">&#x27;b=&#x27;</span>+<span class="built_in">str</span>(b))</span><br><span class="line">a=a+b;b=a-b;a=a-b;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;after swap:a=&#x27;</span>+<span class="built_in">str</span>(a),<span class="string">&#x27;b=&#x27;</span>+<span class="built_in">str</span>(b))</span><br></pre></td></tr></table></figure>

<pre><code>before swap:a=100 b=10
after swap:a=10 b=100
</code></pre>
<ul>
<li>使用python语法糖：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="number">100</span>;b=<span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;before swap:a=&#x27;</span>+<span class="built_in">str</span>(a),<span class="string">&#x27;b=&#x27;</span>+<span class="built_in">str</span>(b))</span><br><span class="line">a,b=b,a</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;after swap:a=&#x27;</span>+<span class="built_in">str</span>(a),<span class="string">&#x27;b=&#x27;</span>+<span class="built_in">str</span>(b))</span><br></pre></td></tr></table></figure>

<pre><code>before swap:a=100 b=10
after swap:a=10 b=100
</code></pre>
<ul>
<li>什么是程序：<ul>
<li>算法+数据结构=程序</li>
</ul>
</li>
</ul>
<h1 id="【02】-python基础知识"><a href="#【02】-python基础知识" class="headerlink" title="【02】 python基础知识"></a>【02】 python基础知识</h1><p>面向对象的交互式解释脚本语言<br>——直接输入代码，回车可得到代码执行结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello world!&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>hello world!
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br></pre></td></tr></table></figure>




<pre><code>[1, 2, 3, 4]
</code></pre>
<p>任何有效的数学计算均可以直接计算出来</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>/<span class="number">22</span></span><br></pre></td></tr></table></figure>




<pre><code>0.045454545454545456
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3721</span>%<span class="number">61</span> <span class="comment"># //是取整除，返回商的整数部分</span></span><br></pre></td></tr></table></figure>




<pre><code>0
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span>*<span class="number">10</span></span><br></pre></td></tr></table></figure>




<pre><code>20
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span>**<span class="number">10</span></span><br></pre></td></tr></table></figure>




<pre><code>1024
</code></pre>
<ul>
<li>查看已有的python文件：<em>load +py文件地址</em>；</li>
<li>执行已有的python文件：*%run +py文件地址*</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">%load /blabla/blabla/example.py</span><br><span class="line">%run /blabla/blabla/example.py</span><br></pre></td></tr></table></figure>

<p>python在IDE中可以直接执行一段代码：</p>
<ul>
<li><p>help() 查看详细说明</p>
</li>
<li><p>dir() 查看函数或模块内的操作方法或成员都有什么，输出<strong>成员（对象的属性和方法，也就是你能干啥、有什么特征）</strong>列表</p>
</li>
<li><p>? 查看具体对象的帮助信息（在jupyter中不会看到cell，而是弹出式）</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(<span class="built_in">list</span>))</span><br></pre></td></tr></table></figure>

<pre><code>[&#39;__add__&#39;, &#39;__class__&#39;, &#39;__class_getitem__&#39;, &#39;__contains__&#39;, &#39;__delattr__&#39;, &#39;__delitem__&#39;, &#39;__dir__&#39;, &#39;__doc__&#39;, &#39;__eq__&#39;, &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__getattribute__&#39;, &#39;__getitem__&#39;, &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__iadd__&#39;, &#39;__imul__&#39;, &#39;__init__&#39;, &#39;__init_subclass__&#39;, &#39;__iter__&#39;, &#39;__le__&#39;, &#39;__len__&#39;, &#39;__lt__&#39;, &#39;__mul__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__reversed__&#39;, &#39;__rmul__&#39;, &#39;__setattr__&#39;, &#39;__setitem__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;append&#39;, &#39;clear&#39;, &#39;copy&#39;, &#39;count&#39;, &#39;extend&#39;, &#39;index&#39;, &#39;insert&#39;, &#39;pop&#39;, &#39;remove&#39;, &#39;reverse&#39;, &#39;sort&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>.index?</span><br></pre></td></tr></table></figure>

<p><strong>python标识符</strong></p>
<ul>
<li>标识符由<strong>汉字、字母、数字、下划线组成，但不能以数字开头，不能有空格</strong></li>
<li>标识符区分大小写</li>
<li>以下划线做前后缀的标识符是有特殊意义的<ul>
<li><strong>单下划线前缀</strong>：代表不能随意访问的类属性，提醒用户该成员可看作私有属性，如果真的访问了不会出错，但不符合规范；跟普通成员没有什么区别，意思就是虽然不是私有的、谁都可以访问，但不要轻易访问，代表不能随意访问的类属性(_foo）</li>
<li><strong>双下划线前缀</strong>(__foo)：代表类的私有成员，只能在类的内部调用，无法在类的外部直接访问（可以强行访问，但建议不要从外部访问）</li>
<li><strong>双下划线前后缀</strong>：代表系统里有的，特殊方法专用的标识，例如__inin__ ()代表类的构造函数，__version__ 代表所调用包的版本信息</li>
</ul>
</li>
</ul>
<p><strong>python保留字符</strong></p>
<p>保留字符不能用作常量或变量，或任何其它标识符的名称，所有python关键字只包含小写字母</p>
<p><img src="attachment:image.png" alt="image.png"></p>
<p><strong>代码风格</strong></p>
<ul>
<li>行和缩进：<ul>
<li>通常使用4个空格，所有代码块语句必须包含相同的缩进空白数量，必须严格执行，对不齐不能执行</li>
<li>可以用分号在同一行内放多条语句</li>
</ul>
</li>
<li>注释：<ul>
<li>井号”#”右边的一切内容都会被忽略；也可以用3个单引号来注释</li>
</ul>
</li>
</ul>
<h2 id="数字与表达式"><a href="#数字与表达式" class="headerlink" title="数字与表达式"></a>数字与表达式</h2><p><strong>一些类型</strong></p>
<ul>
<li><p>int（整形），float（浮点型），complex（复数）</p>
<ul>
<li>int 8表示8位整数</li>
<li>float 16表示整数部分+小数部分+小数点一共是16位</li>
</ul>
</li>
<li><p><img src="attachment:image.png" alt="image.png"></p>
</li>
<li><p>random() 生成[0,1]之间的随机数</p>
<ul>
<li>注意，计算机是伪随机数，有一定算法生成。随机种子的作用在于把种子给另一个计算机，可以生成相同的随机数</li>
</ul>
</li>
<li><p><img src="attachment:image.png" alt="image.png"></p>
</li>
</ul>
<p><strong>一些数学常量</strong></p>
<ul>
<li>math 基本库<ul>
<li>内置库是自然包含的，不用import；除此之外所有的库都需要import导入当前工作环境，才能使用</li>
<li>例如，math.pi，点表示调用，调用math包里的pi对象</li>
<li>如果想要知道有什么对象，可以用dir()</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line">math.pi</span><br></pre></td></tr></table></figure>




<pre><code>3.141592653589793
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(math))</span><br><span class="line"><span class="comment">#注：print和直接dir显示的内容是一样的，只是print没有逐个换行</span></span><br></pre></td></tr></table></figure>

<pre><code>[&#39;__doc__&#39;, &#39;__loader__&#39;, &#39;__name__&#39;, &#39;__package__&#39;, &#39;__spec__&#39;, &#39;acos&#39;, &#39;acosh&#39;, &#39;asin&#39;, &#39;asinh&#39;, &#39;atan&#39;, &#39;atan2&#39;, &#39;atanh&#39;, &#39;ceil&#39;, &#39;comb&#39;, &#39;copysign&#39;, &#39;cos&#39;, &#39;cosh&#39;, &#39;degrees&#39;, &#39;dist&#39;, &#39;e&#39;, &#39;erf&#39;, &#39;erfc&#39;, &#39;exp&#39;, &#39;expm1&#39;, &#39;fabs&#39;, &#39;factorial&#39;, &#39;floor&#39;, &#39;fmod&#39;, &#39;frexp&#39;, &#39;fsum&#39;, &#39;gamma&#39;, &#39;gcd&#39;, &#39;hypot&#39;, &#39;inf&#39;, &#39;isclose&#39;, &#39;isfinite&#39;, &#39;isinf&#39;, &#39;isnan&#39;, &#39;isqrt&#39;, &#39;lcm&#39;, &#39;ldexp&#39;, &#39;lgamma&#39;, &#39;log&#39;, &#39;log10&#39;, &#39;log1p&#39;, &#39;log2&#39;, &#39;modf&#39;, &#39;nan&#39;, &#39;nextafter&#39;, &#39;perm&#39;, &#39;pi&#39;, &#39;pow&#39;, &#39;prod&#39;, &#39;radians&#39;, &#39;remainder&#39;, &#39;sin&#39;, &#39;sinh&#39;, &#39;sqrt&#39;, &#39;tan&#39;, &#39;tanh&#39;, &#39;tau&#39;, &#39;trunc&#39;, &#39;ulp&#39;]
</code></pre>
<p><strong>算术运算符</strong></p>
<ul>
<li>加减乘除</li>
<li>% 取模</li>
<li>** 次幂，比如2**5=32</li>
<li>// 取整除，比如9//2=4，9.0//2.0=4.0</li>
</ul>
<p><strong>赋值运算符</strong></p>
<ul>
<li>c+=a 意味着 c = c+a</li>
<li>c**=a 意味着 c=c**a</li>
</ul>
<p><strong>比较运算符</strong>：== != &lt;&gt; &gt; &lt; &gt;= &lt;=</p>
<p><strong>位运算符</strong>：&amp; | ^ ~ &lt;&lt; &gt;&gt;</p>
<p><strong>逻辑运算符</strong>：and, or, not, in, not in, is, is not</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="number">3</span>;b=<span class="number">4</span></span><br><span class="line"><span class="built_in">print</span>(~a) <span class="comment">#按位取反运算符</span></span><br><span class="line"><span class="built_in">print</span>(b^a)  <span class="comment">#按位取异或运算符，搞不清楚就转化为二进制计算</span></span><br></pre></td></tr></table></figure>

<pre><code>-4
7
</code></pre>
<p><strong>运算符优先级</strong>：<br>    ①指数（最高优先级）、按位翻转、一元加减（+@，-@）、乘、除，<br>    ②取模和取整除、加减、左移、右移、位、位运算、比较、等于、赋值、身份、成员、逻辑运算符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">1</span>+<span class="number">2</span>**<span class="number">3</span>*<span class="number">4</span>/<span class="number">5</span>-<span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<pre><code>-92.6
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">1</span>+<span class="number">2</span>&gt;<span class="number">2</span> <span class="keyword">and</span> <span class="number">4</span>&gt;<span class="number">5</span>+<span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<pre><code>False
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">10</span>*(<span class="number">3</span> <span class="keyword">in</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]))</span><br></pre></td></tr></table></figure>

<pre><code>10
</code></pre>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><ul>
<li>python中，万物皆对象，点就是对象的调用符号<ul>
<li>python中任何数值、字符串、数据结构、函数、类都是python对象</li>
<li>每一个对象都有与之相关的类型及内部数据</li>
<li>几乎所有的python对象都有一些附属函数（方法）或属性，可以访问该对象的内部数据</li>
<li>可用del语句删除指定的对象</li>
</ul>
</li>
<li><strong>对象（变量）</strong>：python中的对象在别的语言中也可以叫做变量<ul>
<li>对象可以被赋值，在赋值之后可以在表达式或语句中使用变量</li>
<li>可同时对多变量赋值，比如a,b,c=100,200,300</li>
<li>注意，变量名对大小敏感。一般情况下用小写，当我们需要申明一个类的时候，首字母需要大写<u>（驼峰命名法，ZhangSan大驼峰，Zhangsan小驼峰）</u></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name=<span class="string">&quot;JINYUE&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>+<span class="string">&#x27; &#x27;</span>+name) <span class="comment">#加号没有空格，且只能相同类型可以相加；逗号默认有空格</span></span><br></pre></td></tr></table></figure>

<pre><code>hello JINYUE
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;JINYUE&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>,name)</span><br></pre></td></tr></table></figure>

<pre><code>hello JINYUE
</code></pre>
<ul>
<li><strong>对象复制与引用绑定的关系</strong><ul>
<li><strong>引用传递</strong>：赋值就是把赋值号（=）右侧对象的一个引用绑定。<ul>
<li>在其它语言中，这种操作意味着复制，赋值完成后，等号右边对象的值发生变化对等号左边的对象<strong>不产生影响</strong>；</li>
<li>但是在python中，这种操作意味着<u>绑定或引用传递</u>，等号右边对象的值发生变化对等号左边的对象<strong>产生影响</strong></li>
</ul>
</li>
<li><u><strong>浅复制</strong>：它们是不同的对象，对对象的改变不会影响彼此，但它们的元素是引用同一个，所以改变对象的元素会影响另一个，拷贝需要使用copy模块。</u><ul>
<li>浅复制只拷贝父对象，不拷贝父对象内部的子对象</li>
<li>也就是说，复制完成后，对一个对象进行添加元素等操作，不影响另一个对象，但对一个对象内部的元素的子对象进行改变，会影响另一个对象</li>
</ul>
</li>
<li><u><strong>深复制</strong>：copy模块中的deepcopy，完全拷贝一个对象及其子对象</u></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]; b=a; a.append(<span class="number">4</span>); <span class="built_in">print</span>(b)</span><br></pre></td></tr></table></figure>

<pre><code>[1, 2, 3, 4]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span>(a),<span class="built_in">id</span>(b)  <span class="comment">##id函数是调用存储地址</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a),<span class="built_in">id</span>(b),a <span class="keyword">is</span> b)</span><br></pre></td></tr></table></figure>

<pre><code>2386822933440 2386822933440 True
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,[<span class="string">&#x27;hao&#x27;</span>,<span class="string">&#x27;chi&#x27;</span>]]</span><br><span class="line">c = copy.copy(a)    <span class="comment">#浅复制</span></span><br><span class="line">d = a[:]    <span class="comment">#a后面的[]表示索引，[:]就意味着所有复制，也是一种浅复制的方法</span></span><br><span class="line">a <span class="keyword">is</span> c, a <span class="keyword">is</span> d    <span class="comment">#注意，这里的is和==是不一样的，后者仅判定值是否相同，is表示是否是同一个变量，判定的是地址</span></span><br></pre></td></tr></table></figure>




<pre><code>(False, False)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.append(<span class="string">&#x27;de&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a,c)</span><br></pre></td></tr></table></figure>

<pre><code>[1, 2, [&#39;hao&#39;, &#39;chi&#39;], &#39;de&#39;] [1, 2, [&#39;hao&#39;, &#39;chi&#39;]]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a[<span class="number">2</span>].append(<span class="string">&#x27;ma&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a,c)</span><br></pre></td></tr></table></figure>

<pre><code>[1, 2, [&#39;hao&#39;, &#39;chi&#39;, &#39;ma&#39;], &#39;de&#39;] [1, 2, [&#39;hao&#39;, &#39;chi&#39;, &#39;ma&#39;]]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">d = copy.deepcopy(a)</span><br><span class="line"><span class="built_in">print</span>(a <span class="keyword">is</span> d)</span><br><span class="line">a[<span class="number">2</span>].append(<span class="string">&#x27;hi&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a,d)</span><br><span class="line">a.append(<span class="string">&#x27;shiwu&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a,d)</span><br></pre></td></tr></table></figure>

<pre><code>False
[1, 2, [&#39;hao&#39;, &#39;chi&#39;, &#39;ma&#39;, &#39;hi&#39;], &#39;de&#39;] [1, 2, [&#39;hao&#39;, &#39;chi&#39;, &#39;ma&#39;], &#39;de&#39;]
[1, 2, [&#39;hao&#39;, &#39;chi&#39;, &#39;ma&#39;, &#39;hi&#39;], &#39;de&#39;, &#39;shiwu&#39;] [1, 2, [&#39;hao&#39;, &#39;chi&#39;, &#39;ma&#39;], &#39;de&#39;]
</code></pre>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><ul>
<li><strong>单引号与双引号</strong>：<ul>
<li>字符串中有双引号，则用单引号引起来；反之，有单引号则用双引号</li>
</ul>
</li>
<li><strong>字符串不可变</strong>：只能调用<em>方法</em>进行修改，例如a[0]=’c’这样的语句是不可行的</li>
<li><strong>字符串可直接索引</strong></li>
<li>字符串就是一串字符序列，可以当作某种序列类型（列表、元组）进行处理，可以把字符串转化为列表，例如l=list(a)，可以把字符串或其他数据类型转化为列表；可以用str函数把其他类型转化为字符串</li>
<li><strong>字符重复</strong>：可以进行乘法，*10</li>
<li><strong>字符串转义</strong>：反斜杠、引号，有非常多转义和反转义的格式；注意字符串最后一个字符不能使用反斜杠，在行尾的反斜杠表示续行符</li>
<li><strong>长字符串</strong>：用前后三个单引号或三个双引号，中间的字符串可以换行</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&quot;happy learning python&quot;</span></span><br><span class="line">l = <span class="built_in">list</span>(a)</span><br><span class="line"><span class="built_in">print</span>(l)</span><br></pre></td></tr></table></figure>

<pre><code>[&#39;h&#39;, &#39;a&#39;, &#39;p&#39;, &#39;p&#39;, &#39;y&#39;, &#39; &#39;, &#39;l&#39;, &#39;e&#39;, &#39;a&#39;, &#39;r&#39;, &#39;n&#39;, &#39;i&#39;, &#39;n&#39;, &#39;g&#39;, &#39; &#39;, &#39;p&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(l[:<span class="number">5</span>])  <span class="comment">#:5意味着第5位索引不到，只能0~4，python通常右边都取不到</span></span><br><span class="line"><span class="built_in">print</span>(l[:<span class="number">5</span>]*<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(a[:<span class="number">5</span>]*<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<pre><code>[&#39;h&#39;, &#39;a&#39;, &#39;p&#39;, &#39;p&#39;, &#39;y&#39;]
[&#39;h&#39;, &#39;a&#39;, &#39;p&#39;, &#39;p&#39;, &#39;y&#39;, &#39;h&#39;, &#39;a&#39;, &#39;p&#39;, &#39;p&#39;, &#39;y&#39;]
happyhappy
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#字符串拼接</span></span><br><span class="line"><span class="string">&#x27;hello,&#x27;</span><span class="string">&quot;it&#x27;s a new world!&quot;</span></span><br></pre></td></tr></table></figure>




<pre><code>&quot;hello,it&#39;s a new world!&quot;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path = <span class="string">&quot;c:\new world&quot;</span></span><br><span class="line">path</span><br></pre></td></tr></table></figure>




<pre><code>&#39;c:\new world&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(path)</span><br></pre></td></tr></table></figure>

<pre><code>c:
ew world
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#可以用反斜杠对其本身进行转义，也可用字符串前缀r进行转义</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;c:\\new world&quot;</span>)  <span class="comment">#字符串的最后一个字符不能是反斜杠</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">r&quot;c:\new world&quot;</span>)  <span class="comment">#前面加上r，意味着整个字符串不转义</span></span><br></pre></td></tr></table></figure>

<pre><code>c:\new world
c:\new world
</code></pre>
<p><img src="attachment:image.png" alt="image.png"></p>
<h3 id="字符串格式化"><a href="#字符串格式化" class="headerlink" title="字符串格式化"></a>字符串格式化</h3><ul>
<li>在python中，格式化方法和C语言是一致的，用%来实现<ul>
<li>%s 占位用，告诉你这里有内容，输出%后面的字符串</li>
</ul>
</li>
<li><img src="attachment:image.png" alt="image.png"></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello, %s&#x27;</span>%<span class="string">&#x27;China&#x27;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>hello, China
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;fighting until %s %%&#x27;</span>% <span class="number">2</span></span><br></pre></td></tr></table></figure>




<pre><code>&#39;fighting until 2 %&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello %s, this is %.2f&#x27;</span>%(<span class="string">&#x27;world&#x27;</span>,<span class="number">0.27</span>))</span><br></pre></td></tr></table></figure>

<pre><code>hello world, this is 0.27
</code></pre>
<h3 id="字符串方法"><a href="#字符串方法" class="headerlink" title="字符串方法"></a>字符串方法</h3><table>
<thead>
<tr>
<th>方法</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>string.capitalize()</td>
<td>把字符串的第一个字符大写</td>
</tr>
<tr>
<td>string.center(width)</td>
<td>返回一个原字符串居中，并用空格填充至长度width的新字符串</td>
</tr>
<tr>
<td><strong>string.count(str, beg=0, end = len(string))</strong></td>
<td>返回str在string中出现的次数，如果beg或end指定则返回指定范围内的出现次数</td>
</tr>
<tr>
<td>string.decode()</td>
<td>指定编码</td>
</tr>
<tr>
<td>string.encode()</td>
<td>指定编码</td>
</tr>
<tr>
<td>string.enswith()</td>
<td>检查字符串的特定结尾</td>
</tr>
<tr>
<td>string.expandtabs(tabsize=8)</td>
<td>把tab替换成空格，默认空格数8</td>
</tr>
<tr>
<td><strong>string.find(str,beg=0,end=len(string)</strong></td>
<td>检查str是否在string中</td>
</tr>
<tr>
<td>string.index()</td>
<td>同上</td>
</tr>
</tbody></table>
<p><img src="attachment:image.png" alt="image.png"><br><img src="attachment:image-2.png" alt="image-2.png"><br><img src="attachment:image-3.png" alt="image-3.png"><br><img src="attachment:image-4.png" alt="image-4.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&#x27;this is an example for Python&#x27;</span></span><br><span class="line">s.find(<span class="string">&#x27;am&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>13
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.split()</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;this&#39;, &#39;is&#39;, &#39;an&#39;, &#39;example&#39;, &#39;for&#39;, &#39;Python&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.split(<span class="string">&quot;+&quot;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;this is an example for Python&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.replace(<span class="string">&quot;example&quot;</span>,<span class="string">&quot;joke&quot;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&#39;this is an joke for Python&#39;
</code></pre>
<h2 id="时间与日期"><a href="#时间与日期" class="headerlink" title="时间与日期"></a>时间与日期</h2><ul>
<li>python基本库的datetime模块提供了datetime、date、time等类型；</li>
<li>日期和时间可以进行运算差值；</li>
<li>可用strftime方法将datetime格式化为字符串</li>
</ul>
<p><strong>格式化代码</strong><br><img src="attachment:image.png" alt="image.png"></p>
<ul>
<li>datetime模块定义如下的类：<ul>
<li><img src="attachment:image-2.png" alt="image-2.png"></li>
</ul>
</li>
<li>date类定义了一些常用的类方法和类属性：<ul>
<li><img src="attachment:image-3.png" alt="image-3.png"></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime  <span class="comment">#不是直接import，from...import是一种比较便捷的导入某个包中的某一个模块的方法</span></span><br><span class="line">dt = datetime(<span class="number">2021</span>,<span class="number">9</span>,<span class="number">20</span>,<span class="number">10</span>,<span class="number">8</span>,<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(dt.date(),dt.time())</span><br></pre></td></tr></table></figure>

<pre><code>2021-09-20 10:08:00
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#转化为字符串 指定格式</span></span><br><span class="line">dt.strftime(<span class="string">&#x27;%m/%d/%Y %H:%M&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&#39;09/20/2021 10:08&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">datetime.strptime(<span class="string">&#x27;20010207&#x27;</span>,<span class="string">&#x27;%Y%m%d&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>datetime.datetime(2001, 2, 7, 0, 0)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#日期和时间运算差值：</span></span><br><span class="line">dt1=datetime(<span class="number">2015</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">10</span>,<span class="number">18</span>)</span><br><span class="line">dt2=datetime(<span class="number">2021</span>,<span class="number">11</span>,<span class="number">3</span>,<span class="number">19</span>,<span class="number">27</span>)</span><br><span class="line">dt2-dt1</span><br></pre></td></tr></table></figure>




<pre><code>datetime.timedelta(days=2461, seconds=32940)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dt1.replace(year=<span class="number">2001</span>,hour=<span class="number">22</span>)</span><br></pre></td></tr></table></figure>




<pre><code>datetime.datetime(2001, 2, 7, 22, 18)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> *</span><br><span class="line">date.<span class="built_in">max</span></span><br></pre></td></tr></table></figure>




<pre><code>datetime.date(9999, 12, 31)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date.today()</span><br></pre></td></tr></table></figure>




<pre><code>datetime.date(2021, 11, 1)
</code></pre>
<ul>
<li>date类提供的方法和属性：</li>
</ul>
<table>
<thead>
<tr>
<th>方法</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>date.year/month/day</td>
<td>年月日</td>
</tr>
<tr>
<td>date.strftime</td>
<td>格式化为字符串</td>
</tr>
<tr>
<td>date.replace(y,m,d)</td>
<td>生成一个新的日期对象，原对象保持不变</td>
</tr>
<tr>
<td>date.weekday()</td>
<td>返回weekday，周一为0，周二为1，以此类推</td>
</tr>
<tr>
<td>date.isoweekday()</td>
<td>返回weekday，周一为1，以此类推</td>
</tr>
<tr>
<td>date.isocalendar()</td>
<td>返回（y，m，d）格式的元组</td>
</tr>
<tr>
<td>date.isoformat()</td>
<td>返回格式如YYYY-MM-DD的字符串</td>
</tr>
</tbody></table>
<ul>
<li><p>time类定义的类属性：</p>
<ul>
<li><img src="attachment:image.png" alt="image.png"></li>
</ul>
</li>
<li><p>time类提供的方法和属性：</p>
<ul>
<li><img src="attachment:image-2.png" alt="image-2.png"></li>
</ul>
</li>
<li><p>datetime就是date与time的综合体，包含二者的所有信息</p>
</li>
<li><p>datetime类定义的类属性与方法：</p>
<ul>
<li><img src="attachment:image-3.png" alt="image-3.png"></li>
</ul>
</li>
<li><p>datetime类提供的实例方法与属性：</p>
<ul>
<li><img src="attachment:image-2.png" alt="image-2.png"></li>
</ul>
</li>
</ul>
<p>除此之外，python中还有date、time、calendar、pytz、dateutil等模块来处理日期和时间</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line">cal = calendar.month(<span class="number">2021</span>,<span class="number">11</span>)</span><br><span class="line"><span class="built_in">print</span>(cal)</span><br></pre></td></tr></table></figure>

<pre><code>   November 2021
Mo Tu We Th Fr Sa Su
 1  2  3  4  5  6  7
 8  9 10 11 12 13 14
15 16 17 18 19 20 21
22 23 24 25 26 27 28
29 30
</code></pre>
<p>​    </p>
<h2 id="语法糖"><a href="#语法糖" class="headerlink" title="语法糖"></a>语法糖</h2><p>一种编程技巧，并没有新功能，是对人们来说更加容易理解的语法。python中的语法糖非常多：</p>
<ul>
<li>with语法糖</li>
<li>else语法糖</li>
<li>函数的动态参数/不定参数</li>
<li>匿名函数</li>
<li>推导式</li>
<li>yield语法糖</li>
<li>装饰器</li>
</ul>
<h2 id="魔术命令"><a href="#魔术命令" class="headerlink" title="魔术命令"></a>魔术命令</h2><p>在jupyter或ipython中进行编程，通常会出现一些以%开头的命令，就是魔术命令</p>
<ul>
<li>%magic：查看所有能使用的魔术命令的详细信息</li>
<li>%time, %timeit: 魔术命令用来测算代码执行的时间或平均时间<ul>
<li>%time：一次执行一行语句，报告总体执行时间</li>
<li>%timeit：更为精确，自动执行一行语句多次，可以产生一个非常精确的平均执行时间</li>
</ul>
</li>
<li>如果代码不止一行，可以用%%time 或 %%timeit来得到多行代码的执行时间</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%pwd <span class="comment">#展示当前工作环境的路径</span></span><br></pre></td></tr></table></figure>




<pre><code>&#39;C:\\Users\\Fu Jinyue&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%time <span class="built_in">pow</span>(<span class="number">100</span>,<span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<pre><code>Wall time: 0 ns





100000000000000000000
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%timeit <span class="built_in">pow</span>(<span class="number">100</span>,<span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<pre><code>249 ns ± 19.3 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">%%timeit</span><br><span class="line">test = []</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>,<span class="number">100</span>,<span class="number">10</span>):</span><br><span class="line">    t=<span class="built_in">pow</span>(x,<span class="number">100000</span>)</span><br><span class="line">    test.append(t)</span><br></pre></td></tr></table></figure>

<pre><code>98.5 ms ± 7.73 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
</code></pre>
<h1 id="【03】数据结构"><a href="#【03】数据结构" class="headerlink" title="【03】数据结构"></a>【03】数据结构</h1><p>集合数据类型</p>
<ul>
<li>数字&amp;字符串：从索引的角度可以把字符串中的某个字符索引出来，就可以看做集合数据类型，但比较少见</li>
<li><strong>列表（list）</strong>：用 [ ]，可变</li>
<li><strong>元组（tuple）</strong>：用 ( )，不可变，内容不能修改</li>
<li><strong>字典（dict）</strong>：用 { },大小可变的键值对集合</li>
<li><strong>集合（set）</strong>：唯一元素，无序集</li>
</ul>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p>一种有序集合，各元素用逗号分隔，存在[ ]中，也可以用list函数来定义，可以随时添加或删除其中的元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = [<span class="string">&#x27;david&#x27;</span>,<span class="string">&#x27;caral&#x27;</span>,<span class="string">&#x27;alice&#x27;</span>,<span class="string">&#x27;bob&#x27;</span>,<span class="string">&#x27;emma&#x27;</span>,<span class="string">&#x27;eric&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(name))</span><br><span class="line"><span class="built_in">print</span>(name[<span class="number">2</span>],name[-<span class="number">1</span>],name[:],name[<span class="number">1</span>:<span class="number">3</span>])  <span class="comment">##负数意味着从右往左索引，但没有0，从-1开始</span></span><br></pre></td></tr></table></figure>

<pre><code>6
alice eric [&#39;david&#39;, &#39;caral&#39;, &#39;alice&#39;, &#39;bob&#39;, &#39;emma&#39;, &#39;eric&#39;] [&#39;caral&#39;, &#39;alice&#39;]
</code></pre>
<p><strong>分片操作</strong>：通过:隔开两个索引，第三个数字表示每几个取一次</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name[::<span class="number">2</span>]</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;david&#39;, &#39;alice&#39;, &#39;emma&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name[<span class="number">0</span>:<span class="number">4</span>:<span class="number">2</span>]</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;david&#39;, &#39;alice&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name[::-<span class="number">1</span>] <span class="comment"># 按倒序，从右边开始取</span></span><br></pre></td></tr></table></figure>




<pre><code>[&#39;eric&#39;, &#39;emma&#39;, &#39;bob&#39;, &#39;alice&#39;, &#39;caral&#39;, &#39;david&#39;]
</code></pre>
<p><strong>序列相加</strong>：使用+可以进行序列的连结，与字符串类似；不同类型的数据结构不能相加；没有数学运算功能</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">n1=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];n2=[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">n1 + n2</span><br></pre></td></tr></table></figure>




<pre><code>[1, 2, 3, 4, 5, 6]
</code></pre>
<p><strong>乘法</strong>：用数字乘以一个序列，生成新的序列，被乘的序列重复指定次数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]*<span class="number">3</span></span><br></pre></td></tr></table></figure>




<pre><code>[1, 2, 3, 1, 2, 3, 1, 2, 3]
</code></pre>
<p><strong>成员资格</strong>：使用in运算符可检查一个元素是否在列表中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;david&quot;</span> <span class="keyword">in</span> name</span><br></pre></td></tr></table></figure>




<pre><code>True
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;davi&quot;</span> <span class="keyword">in</span> name</span><br></pre></td></tr></table></figure>




<pre><code>False
</code></pre>
<p><strong>列表操作</strong>：</p>
<ul>
<li>长度、最大值、最小值，可用函数len、min、max等<ul>
<li>**len(list)**：元素个数</li>
<li><strong>list(seq)</strong>: 把序列转化成列表</li>
<li><strong>enumerate</strong>：遍历序列中的元素及其索引位置</li>
<li><strong>sorted</strong>：将任何序列返回为一个新的有序列表</li>
<li><strong>zip</strong>：将多个序列中的元素进行配对，从而产生一个新的元组列表</li>
<li><strong>reversed</strong>：按逆序迭代序列中的元素，和[::-1]是相同的效果</li>
</ul>
</li>
</ul>
<ul>
<li><strong>根据字符串创建列表</strong>：使用类型list，可以对字符串中的字符进行修改了</li>
<li><strong>删除与元素赋值</strong>：del list [ : ]  <em>(慎用del语句，一般很少删除对象，除非空间内存不够了）</em></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ch = <span class="string">&quot;python&quot;</span></span><br><span class="line">ch=<span class="built_in">list</span>(ch)</span><br><span class="line">ch</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;p&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ch[<span class="number">0</span>]=<span class="string">&#x27;P&#x27;</span></span><br><span class="line">ch</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;P&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ch=<span class="string">&#x27;&#x27;</span>.join(ch)</span><br><span class="line">ch</span><br></pre></td></tr></table></figure>




<pre><code>&#39;Python&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ch=<span class="built_in">list</span>(ch)</span><br><span class="line"><span class="keyword">del</span> ch[<span class="number">4</span>:<span class="number">5</span>]</span><br><span class="line">ch</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;p&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;n&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ch[<span class="number">1</span>:]=<span class="built_in">list</span>(<span class="string">&quot;erl&quot;</span>)</span><br><span class="line">ch</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;p&#39;, &#39;e&#39;, &#39;r&#39;, &#39;l&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i,j <span class="keyword">in</span> <span class="built_in">enumerate</span>([<span class="string">&#x27;china&#x27;</span>,<span class="string">&#x27;usa&#x27;</span>,<span class="string">&#x27;uk&#x27;</span>,<span class="string">&#x27;japan&#x27;</span>,<span class="string">&#x27;mexico&#x27;</span>]):  <span class="comment">#记得for循环内部有冒号</span></span><br><span class="line">    <span class="built_in">print</span> (i+<span class="number">1</span>,j)</span><br></pre></td></tr></table></figure>

<pre><code>1 china
2 usa
3 uk
4 japan
5 mexico
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">enumerate</span>([<span class="string">&#x27;china&#x27;</span>,<span class="string">&#x27;usa&#x27;</span>,<span class="string">&#x27;uk&#x27;</span>,<span class="string">&#x27;japan&#x27;</span>,<span class="string">&#x27;mexico&#x27;</span>]): </span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>

<pre><code>(0, &#39;china&#39;)
(1, &#39;usa&#39;)
(2, &#39;uk&#39;)
(3, &#39;japan&#39;)
(4, &#39;mexico&#39;)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">country=[<span class="string">&#x27;china&#x27;</span>,<span class="string">&#x27;usa&#x27;</span>,<span class="string">&#x27;uk&#x27;</span>,<span class="string">&#x27;japan&#x27;</span>,<span class="string">&#x27;mexico&#x27;</span>]</span><br><span class="line"><span class="built_in">sorted</span>(country)</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;china&#39;, &#39;japan&#39;, &#39;mexico&#39;, &#39;uk&#39;, &#39;usa&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">country</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;china&#39;, &#39;usa&#39;, &#39;uk&#39;, &#39;japan&#39;, &#39;mexico&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">country.sort()</span><br><span class="line">country</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;china&#39;, &#39;japan&#39;, &#39;mexico&#39;, &#39;uk&#39;, &#39;usa&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">country=[<span class="string">&#x27;china&#x27;</span>,<span class="string">&#x27;usa&#x27;</span>,<span class="string">&#x27;uk&#x27;</span>,<span class="string">&#x27;japan&#x27;</span>,<span class="string">&#x27;mexico&#x27;</span>]</span><br><span class="line"><span class="built_in">sorted</span>(country, reverse = <span class="literal">True</span>)  <span class="comment">##reverse=True表示倒序</span></span><br></pre></td></tr></table></figure>




<pre><code>[&#39;usa&#39;, &#39;uk&#39;, &#39;mexico&#39;, &#39;japan&#39;, &#39;china&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">continent=[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>]</span><br><span class="line"><span class="built_in">list</span>(<span class="built_in">zip</span>(country,continent))</span><br></pre></td></tr></table></figure>




<pre><code>[(&#39;china&#39;, &#39;a&#39;), (&#39;usa&#39;, &#39;b&#39;), (&#39;uk&#39;, &#39;c&#39;), (&#39;japan&#39;, &#39;d&#39;), (&#39;mexico&#39;, &#39;e&#39;)]
</code></pre>
<p><strong>列表方法</strong></p>
<table>
<thead>
<tr>
<th>方法</th>
<th>功能</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>append</td>
<td>末尾添加新元素，只能添加一个</td>
<td></td>
</tr>
<tr>
<td>extend</td>
<td>可以添加一大串元素，比如把新列表放到列表尾部，其实用+就行</td>
<td></td>
</tr>
<tr>
<td>insert</td>
<td>在指定索引位置插入一个元素</td>
<td>list.insert(1,’a’)</td>
</tr>
<tr>
<td>pop</td>
<td>弹出末尾的元素，返回该元素的值</td>
<td></td>
</tr>
<tr>
<td>remove</td>
<td>移除列表中某个值第一个匹配项</td>
<td></td>
</tr>
<tr>
<td>sort</td>
<td>原地排序，跟sorted一样</td>
<td></td>
</tr>
<tr>
<td>count</td>
<td>统计某个元素在列表中出现的次数，返回值</td>
<td></td>
</tr>
<tr>
<td>index</td>
<td>找出某个值第一个匹配项索引位置，返回值</td>
<td></td>
</tr>
<tr>
<td>reverse</td>
<td>将列表中的元素反向存放</td>
<td></td>
</tr>
</tbody></table>
<h2 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h2><ul>
<li>与列表一样，也是一种序列，但是元组不能修改，以逗号分开，圆括号括起来；python在有逗号、没有括号的情况下默认生成元组</li>
<li>元组往往用于函数的参数</li>
<li>除了创建元素和访问元素之外，没有太多其他操作<ul>
<li>元组的分片还是元组</li>
<li>tuple函数可以将任何序列或迭代器转换成元组</li>
</ul>
</li>
<li>但是，<u>元素对象中的可变元素可以进行修改，比如元组中有一个元素是列表，则可以进行修改</u></li>
<li><strong>元组拆包</strong>：对元组型变量表达式进行赋值，python会尝试将=右侧的值进行拆包<ul>
<li>所有的序列都可以拆包，例如列表</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8</span>*(<span class="number">10</span>,)</span><br></pre></td></tr></table></figure>




<pre><code>(10, 10, 10, 10, 10, 10, 10, 10)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8</span>*(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<pre><code>80
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t = <span class="built_in">tuple</span>(<span class="string">&#x27;this is python!&#x27;</span>)</span><br><span class="line">t1 = t+([<span class="number">1</span>,<span class="number">2</span>],)</span><br><span class="line"><span class="built_in">print</span>(t1)</span><br></pre></td></tr></table></figure>

<pre><code>(&#39;t&#39;, &#39;h&#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;p&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;, &#39;!&#39;, [1, 2])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t1[-<span class="number">1</span>].append(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(t1)</span><br></pre></td></tr></table></figure>

<pre><code>(&#39;t&#39;, &#39;h&#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;i&#39;, &#39;s&#39;, &#39; &#39;, &#39;p&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;, &#39;!&#39;, [1, 2, 3, 3, 3])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">country=(<span class="string">&#x27;china&#x27;</span>,<span class="string">&#x27;brazil&#x27;</span>,<span class="string">&#x27;uk&#x27;</span>,<span class="string">&#x27;japan&#x27;</span>)</span><br><span class="line">s1,s2,s3,s4 = country</span><br><span class="line"><span class="built_in">print</span>(s4)</span><br></pre></td></tr></table></figure>

<pre><code>japan
</code></pre>
<p><strong>元组方法</strong></p>
<ul>
<li>常用的比如count用于统计数目</li>
</ul>
<h2 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h2><p>使用“键值对”存储，键值之间用冒号，键值对之间用逗号，字典用{}括起来</p>
<ul>
<li>可以用dict函数创建字典</li>
<li>字典有极快的查找速度</li>
<li>注意，字典当中的键是唯一的，但值可以不是；如果创建时同一个键被赋值两次，后一个值会被记住</li>
<li><strong>字典的键可以是任意类型的python对象，可以是标准的，也可以是用户自己定义的；但值不行，值必须是不可变的，例如数字、字符串、元组，列表不能作为值</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;<span class="string">&#x27;lxy&#x27;</span>: <span class="number">6</span>, <span class="string">&#x27;cxy&#x27;</span>:<span class="number">9</span>, <span class="string">&#x27;ljy&#x27;</span>:<span class="number">4</span>&#125;</span><br><span class="line">d[<span class="string">&#x27;lxy&#x27;</span>]</span><br></pre></td></tr></table></figure>




<pre><code>6
</code></pre>
<p><strong>基本操作</strong></p>
<table>
<thead>
<tr>
<th>操作</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>len(d)</td>
<td>统计键值对的个数</td>
</tr>
<tr>
<td>d [k]</td>
<td>返回键k对应的值</td>
</tr>
<tr>
<td>d [k]= v</td>
<td>可对对应的键进行赋值，如果没有键就新建一个键，赋一个值</td>
</tr>
<tr>
<td>del d[k]</td>
<td>删除键为k的项</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">items = [(<span class="string">&#x27;mi&#x27;</span>,<span class="number">95</span>),(<span class="string">&#x27;bob&#x27;</span>,<span class="number">75</span>),(<span class="string">&#x27;tracy&#x27;</span>,<span class="number">85</span>)]</span><br><span class="line">d2 = <span class="built_in">dict</span>(items)</span><br><span class="line">d2</span><br></pre></td></tr></table></figure>




<pre><code>&#123;&#39;mi&#39;: 95, &#39;bob&#39;: 75, &#39;tracy&#39;: 85&#125;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d2[<span class="string">&#x27;alice&#x27;</span>]=<span class="number">96</span></span><br><span class="line">d2[<span class="number">16</span>]=<span class="number">3</span></span><br><span class="line">d2</span><br></pre></td></tr></table></figure>




<pre><code>&#123;&#39;mi&#39;: 95, &#39;bob&#39;: 75, &#39;tracy&#39;: 85, &#39;alice&#39;: 96, 16: 3&#125;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">96</span> <span class="keyword">in</span> d2</span><br></pre></td></tr></table></figure>




<pre><code>False
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">16</span> <span class="keyword">in</span> d2</span><br></pre></td></tr></table></figure>




<pre><code>True
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> d2[<span class="number">16</span>]</span><br><span class="line">d2</span><br></pre></td></tr></table></figure>




<pre><code>&#123;&#39;mi&#39;: 95, &#39;bob&#39;: 75, &#39;tracy&#39;: 85, &#39;alice&#39;: 96&#125;
</code></pre>
<p><strong>内置函数</strong></p>
<ul>
<li>len(dict):计算字典元素个数，即键的总数</li>
<li>str(dict):输出字典可打印的字符串表示</li>
<li>type(variable):返回输入变量类型</li>
</ul>
<p><strong>方法</strong></p>
<ul>
<li><img src="attachment:image.png" alt="image.png"></li>
</ul>
<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><p>集合：包含唯一元素的序列，带有一个set</p>
<ul>
<li>支持union、intersection、difference和sysmmetric difference（对称差集）等数学运算</li>
<li>有两种类型：可变集合与不可变集合<ul>
<li>set不是可哈希的，frozenset是哈希的</li>
</ul>
</li>
<li><img src="attachment:image-2.png" alt="image-2.png"></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s1=<span class="built_in">set</span>(<span class="string">&#x27;hello world!&#x27;</span>)</span><br><span class="line">s2=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>&#125;</span><br><span class="line">s1|s2</span><br></pre></td></tr></table></figure>




<pre><code>&#123;&#39; &#39;, &#39;!&#39;, 1, 2, 3, 4, &#39;d&#39;, &#39;e&#39;, &#39;h&#39;, &#39;l&#39;, &#39;o&#39;, &#39;r&#39;, &#39;w&#39;&#125;
</code></pre>
<h2 id="推导式"><a href="#推导式" class="headerlink" title="推导式"></a>推导式</h2><ul>
<li>将for循环、if表达式和赋值语句放在单一语句中的方法<ul>
<li><strong>列表推导式</strong>：只需要一条表达式就能非常简洁的表达一个新列表，即[expression for value in collection if condition]</li>
<li><strong>集合推导式</strong>：唯一的区别是用花括号{}括起来</li>
<li><strong>字典推导式</strong>：前面有一个冒号</li>
<li><strong>嵌套列表推导式</strong>：可以编写任意多层嵌套，但是不好理解</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string = [<span class="string">&#x27;china&#x27;</span>,<span class="string">&#x27;uk&#x27;</span>,<span class="string">&#x27;brazil&#x27;</span>,<span class="string">&#x27;us&#x27;</span>]</span><br><span class="line">upper_string = [x.upper() <span class="keyword">for</span> x <span class="keyword">in</span> string <span class="keyword">if</span> <span class="built_in">len</span>(x)&gt;<span class="number">1</span>]  <span class="comment">#x是一个临时的对象，只在这条语句中生效</span></span><br><span class="line">upper_string</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<pre><code>[&#39;CHINA&#39;, &#39;UK&#39;, &#39;BRAZIL&#39;, &#39;US&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mapping = &#123;val:index <span class="keyword">for</span> index,val <span class="keyword">in</span> <span class="built_in">enumerate</span>(string)&#125;</span><br><span class="line">mapping</span><br></pre></td></tr></table></figure>




<pre><code>&#123;&#39;china&#39;: 0, &#39;uk&#39;: 1, &#39;brazil&#39;: 2, &#39;us&#39;: 3&#125;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">names = [[<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;andy&#x27;</span>,<span class="string">&#x27;joe&#x27;</span>],[<span class="string">&#x27;alice&#x27;</span>,<span class="string">&#x27;eve&#x27;</span>,<span class="string">&#x27;jose&#x27;</span>]]</span><br><span class="line">morethan2e = [n1 <span class="keyword">for</span> n2 <span class="keyword">in</span> names <span class="keyword">for</span> n1 <span class="keyword">in</span> n2 <span class="keyword">if</span> n1.count(<span class="string">&#x27;e&#x27;</span>)&gt;<span class="number">0</span>]</span><br><span class="line">morethan2e</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;joe&#39;, &#39;alice&#39;, &#39;eve&#39;, &#39;jose&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">morethan2e = []</span><br><span class="line"><span class="keyword">for</span> n2 <span class="keyword">in</span> names:</span><br><span class="line">    <span class="keyword">for</span> n1 <span class="keyword">in</span> n2:</span><br><span class="line">        <span class="keyword">if</span> n1.count(<span class="string">&#x27;e&#x27;</span>)&gt;=<span class="number">2</span>:</span><br><span class="line">            morethan2e.append(n1)</span><br><span class="line">morethan2e</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;eve&#39;]
</code></pre>
<h1 id="【04】语句和控制流"><a href="#【04】语句和控制流" class="headerlink" title="【04】语句和控制流"></a>【04】语句和控制流</h1><h2 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h2><p>python语句与其它高级语言类似，包括<strong>顺序、条件、循环语句</strong><br>    - input函数：返回值永远是字符串，需要转格式</p>
<ul>
<li><strong>条件语句</strong>：<ul>
<li>if语句：注意有冒号，用缩进来控制；elif：语句嵌套<ul>
<li>也可以在同一行的位置上使用if条件判断语句</li>
</ul>
</li>
</ul>
</li>
<li><strong>循环语句</strong>：<ul>
<li>while循环：当循环，只要条件不为false或者循环没有被break，代码块不断执行</li>
<li>while…else循环：else中的语句会在循环正常执行完之后被执行，在break的情况下不会执行，直接跳出段落</li>
<li>for循环：在python中通常用于迭代，对集合（如列表或元组）或迭代器进行迭代<ul>
<li><em><strong>注意，对字典进行的for循环是按照键来循环</strong></em></li>
</ul>
</li>
<li>推导式：利用其它列表创建新列表、集合以及字典的一种方法，其工作方式类似于for循环</li>
</ul>
</li>
<li><strong>循环控制语句</strong>：<ul>
<li>break：终止循环，直接跳出循环语句</li>
<li>continue：中止循环，停止本次循环，进入下一次</li>
<li>while true/break：实现一个永远不会自己停止的循环</li>
<li>else：在使用break的时候，可以使用else语句在没有调用break的时候执行对应语句</li>
<li>pass：不做任何实行，仅做占位</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">givenname = <span class="string">&#x27;hcy&#x27;</span></span><br><span class="line"><span class="string">&#x27;marvelous!&#x27;</span> <span class="keyword">if</span> givenname == <span class="string">&#x27;hcy&#x27;</span> <span class="keyword">else</span> <span class="string">&#x27;who are you!&#x27;</span></span><br></pre></td></tr></table></figure>




<pre><code>&#39;marvelous!&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">101</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">d=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;hcy&#x27;</span>,<span class="string">&#x27;gender&#x27;</span>: <span class="string">&#x27;male&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> d:</span><br><span class="line">    <span class="built_in">print</span>(key, <span class="string">&#x27;corresponds to&#x27;</span>, d[key])</span><br></pre></td></tr></table></figure>

<pre><code>0
10
20
30
40
50
60
70
80
90
100
name corresponds to hcy
gender corresponds to male
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">d=&#123;<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;hcy&#x27;</span>,<span class="string">&#x27;gender&#x27;</span>,<span class="string">&#x27;male&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i,j <span class="keyword">in</span> <span class="built_in">enumerate</span>(d):</span><br><span class="line">    <span class="keyword">if</span>(j.count(<span class="string">&#x27;e&#x27;</span>)&gt;<span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(i+<span class="number">1</span>,j)</span><br><span class="line">    <span class="keyword">elif</span>(j.count(<span class="string">&#x27;h&#x27;</span>)&gt;<span class="number">0</span>):</span><br><span class="line">        <span class="built_in">print</span>(j)</span><br></pre></td></tr></table></figure>

<pre><code>hcy
4 gender
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">d=&#123;<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;hcy&#x27;</span>,<span class="string">&#x27;gender&#x27;</span>,<span class="string">&#x27;male&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;good man!&#x27;</span>) <span class="keyword">if</span> <span class="string">&#x27;hcy&#x27;</span> <span class="keyword">in</span> d <span class="keyword">else</span> <span class="built_in">print</span>(<span class="string">&#x27;bad!&#x27;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>good man!
</code></pre>
<h1 id="【05】函数"><a href="#【05】函数" class="headerlink" title="【05】函数"></a>【05】函数</h1><h3 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h3><ul>
<li>代码块以def语句开头</li>
<li>依次写出函数名、括号、括号中的参数和冒号</li>
<li>函数的第一行语句可以选择性地使用文档字符串用于存放函数说明</li>
<li>在缩进块中编写函数体</li>
<li>函数的返回值用return，可返回多个值</li>
<li>如果到达函数末尾时没有遇到任何一条return，则返回none</li>
<li>默认情况下，参数值和参数名称按函数声明中的定义顺序匹配</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">move</span>(<span class="params">x,y,step,angle=<span class="number">0</span></span>):</span></span><br><span class="line">    nx=x+step*math.cos(angle)</span><br><span class="line">    ny=y-step*math.sin(angle)</span><br><span class="line">    <span class="keyword">return</span> nx,ny</span><br><span class="line"></span><br><span class="line">t=move(<span class="number">100</span>,<span class="number">100</span>,<span class="number">1</span>,math.pi/<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(t)</span><br></pre></td></tr></table></figure>

<pre><code>(100.70710678118655, 99.29289321881345)
</code></pre>
<h3 id="函数的参数"><a href="#函数的参数" class="headerlink" title="函数的参数"></a>函数的参数</h3><p>参数：在python里都是按引用传递</p>
<ul>
<li>必备参数：以正确的顺序传入函数，调用时的数量必须跟申明（def）的时候一样</li>
<li>命名（关键字）参数：用参数的命名确定传入的参数值，可以跳过不传的参数或者乱序传，因为python解释器能够用参数名匹配参数值</li>
<li>缺省参数：只要在def中赋了初始值，都叫缺省参数，调用时不传入就按照默认值使用</li>
<li>不定参数：函数能处理比声明时更多的参数，声明时不会命名，实际上是可以处理任意多个参数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span>(<span class="params">arg1,*vartuple</span>):</span></span><br><span class="line">    <span class="string">&quot;打印任何传入的参数&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;print out:&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(arg1)</span><br><span class="line">    <span class="keyword">for</span> var <span class="keyword">in</span> vartuple:</span><br><span class="line">        <span class="built_in">print</span> (var, end = <span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">printinfo(<span class="string">&#x27;hcy&#x27;</span>,<span class="string">&#x27;born&#x27;</span>,<span class="string">&quot;for music&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>print out:
hcy
born for music 
</code></pre>
<h3 id="关于-和-的用法"><a href="#关于-和-的用法" class="headerlink" title="关于*和**的用法"></a>关于*和**的用法</h3><ul>
<li>拆分可迭代对象作为函数参数</li>
<li>压缩被传递到函数中的参数：**获取key-value，能处理带名字的参数，压缩成字典，名字处理成key，值处理成value</li>
<li>接受只有关键字的位置参数</li>
<li>元组、列表、字典中的特殊用途：例如拆包；将迭代器存储到新列表中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = [<span class="string">&#x27;douniu&#x27;</span>,<span class="string">&#x27;fengrenyuan&#x27;</span>,<span class="string">&#x27;hanya&#x27;</span>,<span class="string">&#x27;shenshu&#x27;</span>,<span class="string">&#x27;jianglin&#x27;</span>,<span class="string">&#x27;huohai&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(*name)</span><br><span class="line"><span class="built_in">print</span>(name)</span><br></pre></td></tr></table></figure>

<pre><code>douniu fengrenyuan hanya shenshu jianglin huohai
[&#39;douniu&#39;, &#39;fengrenyuan&#39;, &#39;hanya&#39;, &#39;shenshu&#39;, &#39;jianglin&#39;, &#39;huohai&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test1</span>(<span class="params">*l</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(l[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">return</span> </span><br><span class="line">list1=[<span class="string">&#x27;douniu&#x27;</span>,<span class="string">&#x27;fengrenyuan&#x27;</span>,<span class="string">&#x27;hanya&#x27;</span>]</span><br><span class="line">test1(*list1)</span><br></pre></td></tr></table></figure>

<pre><code>douniu
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multi</span>(<span class="params">**abcd</span>):</span></span><br><span class="line">    s=<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> key, value <span class="keyword">in</span> abcd.items():</span><br><span class="line">        s*=value</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line">multi(a=<span class="number">1</span>,b=<span class="number">2</span>,c=<span class="number">3</span>,d=<span class="number">5</span>)</span><br></pre></td></tr></table></figure>




<pre><code>30
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dn,fry,*remaining=name</span><br><span class="line">dn,remaining</span><br></pre></td></tr></table></figure>




<pre><code>(&#39;douniu&#39;, [&#39;hanya&#39;, &#39;shenshu&#39;, &#39;jianglin&#39;, &#39;huohai&#39;])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">order_reverse</span>(<span class="params">seq</span>):</span></span><br><span class="line">    <span class="keyword">return</span> [*seq,*<span class="built_in">reversed</span>(seq)]    <span class="comment">#使用*号可以直接把不同类型的序列连接在一起</span></span><br><span class="line">order_reverse(name)</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;douniu&#39;,
 &#39;fengrenyuan&#39;,
 &#39;hanya&#39;,
 &#39;shenshu&#39;,
 &#39;jianglin&#39;,
 &#39;huohai&#39;,
 &#39;huohai&#39;,
 &#39;jianglin&#39;,
 &#39;shenshu&#39;,
 &#39;hanya&#39;,
 &#39;fengrenyuan&#39;,
 &#39;douniu&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">one</span>(<span class="params">**x</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(x)</span><br><span class="line">    b=()</span><br><span class="line">    <span class="keyword">for</span> a <span class="keyword">in</span> x.keys():</span><br><span class="line">        <span class="built_in">print</span>(x[a])</span><br><span class="line">        <span class="comment">#b+=(a,)</span></span><br><span class="line">    <span class="comment">#print(b)</span></span><br><span class="line"></span><br><span class="line">dect=&#123;<span class="string">&quot;two&quot;</span>:<span class="number">2</span>,<span class="string">&quot;three&quot;</span>:<span class="number">3</span>&#125;</span><br><span class="line">one(**dect)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>&#123;&#39;two&#39;: 2, &#39;three&#39;: 3&#125;
2
3
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ordersort</span>(<span class="params">seq</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(seq))</span><br><span class="line">    <span class="keyword">return</span>(*seq,*<span class="built_in">reversed</span>(seq))</span><br><span class="line"></span><br><span class="line">ordersort(name_l)</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;list&#39;&gt;





(&#39;douniu&#39;,
 &#39;fengrenyuan&#39;,
 &#39;hanya&#39;,
 &#39;shenshu&#39;,
 &#39;jianglin&#39;,
 &#39;huohai&#39;,
 &#39;huohai&#39;,
 &#39;jianglin&#39;,
 &#39;shenshu&#39;,
 &#39;hanya&#39;,
 &#39;fengrenyuan&#39;,
 &#39;douniu&#39;)
</code></pre>
<h3 id="函数的作用域"><a href="#函数的作用域" class="headerlink" title="函数的作用域"></a>函数的作用域</h3><ul>
<li>全局对象与局部对象：定义在函数内部的对象是局部对象，只能在其被声明的语句内部访问（例如海淀彭于晏）<ul>
<li>全局对象可以在整个程序范围内访问</li>
</ul>
</li>
</ul>
<h3 id="匿名函数（lambda）"><a href="#匿名函数（lambda）" class="headerlink" title="匿名函数（lambda）"></a>匿名函数（lambda）</h3><ul>
<li>仅有单条语句组成，结果就是返回值，省略了用def声明函数的标准过程，语法为：lambda[arg1,arg2]: expression</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">any_function</span>(<span class="params">some_list,f</span>):</span></span><br><span class="line">    <span class="keyword">return</span> [f(x) <span class="keyword">for</span> x <span class="keyword">in</span> some_list]</span><br><span class="line"></span><br><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">b=any_function(a,<span class="keyword">lambda</span> x:x**<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br></pre></td></tr></table></figure>

<pre><code>[1, 4, 9, 16, 25]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name.sort(key=<span class="keyword">lambda</span> x:<span class="built_in">len</span>(<span class="built_in">set</span>(<span class="built_in">list</span>(x))))</span><br><span class="line">name</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;hanya&#39;, &#39;douniu&#39;, &#39;shenshu&#39;, &#39;huohai&#39;, &#39;jianglin&#39;, &#39;fengrenyuan&#39;]
</code></pre>
<h3 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fact</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> n*fact(n-<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h3 id="闭包函数"><a href="#闭包函数" class="headerlink" title="闭包函数"></a>闭包函数</h3><ul>
<li>闭包（closure）指由其他函数动态生成并返回的函数，如果在一个内部函数里，对在外部作用域（但不是全局作用域）的变量进行引用，那么内部函数就被认为是闭包<ul>
<li>关键：被返回的函数可以访问<strong>其创建者的局部命名空间中的变量</strong></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addx</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addy</span>(<span class="params">y</span>):</span></span><br><span class="line">        <span class="keyword">return</span> x+y</span><br><span class="line">    <span class="keyword">return</span> addy</span><br><span class="line"></span><br><span class="line">a=addx(<span class="number">10</span>)    <span class="comment"># addx返回的是一个函数对象，a也是一个函数，功能为a（num）返回num+10</span></span><br><span class="line">a(<span class="number">100</span>)        <span class="comment"># addx仍然能被访问到（x=10）</span></span><br></pre></td></tr></table></figure>




<pre><code>110
</code></pre>
<h3 id="柯里化"><a href="#柯里化" class="headerlink" title="柯里化"></a>柯里化</h3><ul>
<li>一个函数在参数没给全时返回另一个函数，返回的函数参数正好是余下的参数（currying）<ul>
<li>例如，函数指定了参数x、y，（2，3）返回8；如果只指定x为2，y没指定，就返回一个函数：2的y次方，仅一个参数</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">power</span>(<span class="params">x,y,z</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x**y*z</span><br><span class="line">powerof2=<span class="keyword">lambda</span> y: power(<span class="number">2</span>,y,<span class="number">1</span>)</span><br><span class="line">powerof2(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>




<pre><code>8
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line">powerof=partial(power,<span class="number">2</span>,z=<span class="number">3</span>)</span><br><span class="line">powerof(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>




<pre><code>24
</code></pre>
<ul>
<li>python内置的functools模块可用partial函数（偏函数）将上述过程简化：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line">powerof=partial(power,<span class="number">2</span>)</span><br><span class="line">powerof(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>




<pre><code>32
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multip</span>(<span class="params">x,y,z</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x*y*z</span><br><span class="line">multip2=partial(multip,<span class="number">2</span>,<span class="number">3</span>)   <span class="comment">#没有名称就是按顺序给参数，此处只给给了x、y的值，自动认为是关于z的函数</span></span><br><span class="line">multip2(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>




<pre><code>18
</code></pre>
<h3 id="反柯里化"><a href="#反柯里化" class="headerlink" title="反柯里化"></a>反柯里化</h3><ul>
<li>柯里化的逆过程，将多个只含单个参数的函数模拟成一个多参数函数，实质上<u>闭包等同于反柯里化<u></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">power233</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">p233</span>(<span class="params">y</span>):</span></span><br><span class="line">        <span class="keyword">return</span> x**y</span><br><span class="line">    <span class="keyword">return</span> p233</span><br><span class="line"></span><br><span class="line">powerof2=power233(<span class="number">2</span>)</span><br><span class="line">powerof2(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>




<pre><code>8
</code></pre>
<h3 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h3><ul>
<li>**filter(bool_func, seq)**：过滤器，调用一个布尔函数来遍历每个seq中的元素，返回一个使bool_seq返回值为true的迭代器</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x%<span class="number">2</span>==<span class="number">0</span>,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]))</span><br></pre></td></tr></table></figure>




<pre><code>[2, 4]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name</span><br></pre></td></tr></table></figure>




<pre><code>[&#39;douniu&#39;, &#39;fengrenyuan&#39;, &#39;hanya&#39;, &#39;shenshu&#39;, &#39;jianglin&#39;, &#39;huohai&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:<span class="built_in">len</span>(x)&lt;<span class="number">7</span>,name))    <span class="comment">#list一下相当于把filter中的东西提取出来作为结果</span></span><br></pre></td></tr></table></figure>




<pre><code>[&#39;douniu&#39;, &#39;hanya&#39;, &#39;huohai&#39;]
</code></pre>
<ul>
<li>用filter函数显示某个对象的非私有成员：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x[<span class="number">0</span>]!=<span class="string">&#x27;_&#x27;</span>,<span class="built_in">dir</span>(<span class="built_in">list</span>))))</span><br></pre></td></tr></table></figure>

<pre><code>[&#39;append&#39;, &#39;clear&#39;, &#39;copy&#39;, &#39;count&#39;, &#39;extend&#39;, &#39;index&#39;, &#39;insert&#39;, &#39;pop&#39;, &#39;remove&#39;, &#39;reverse&#39;, &#39;sort&#39;]
</code></pre>
<ul>
<li>**map(func,seq1[,seq2…])**：将函数func作用于序列的每个元素，返回迭代器，可以说是python的内置基本库中最常用的函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x:x*<span class="number">2</span>,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]))</span><br></pre></td></tr></table></figure>




<pre><code>[2, 4, 6]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x:x*<span class="number">2</span>,[<span class="number">1</span>,<span class="number">2</span>,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]])) <span class="comment">#“元素级别”只能应用到父对象层面，不是123乘2，而是这个列表乘2，变成了123123</span></span><br></pre></td></tr></table></figure>




<pre><code>[2, 4, [1, 2, 3, 1, 2, 3]]
</code></pre>
<ul>
<li>**reduce(func,seq[,init])**：func为二元函数，将func作用于seq序列的元素，每次携带一对（先前的结果以及下一个序列的元素），连续将现有的结果和下一个值作用在获得的随后的结果上，最后化简序列为一个单一的返回值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line">reduce(<span class="keyword">lambda</span> x,y:x*y,(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br></pre></td></tr></table></figure>




<pre><code>24
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reduce(<span class="keyword">lambda</span> x,y:x+y,<span class="built_in">range</span>(<span class="number">101</span>))</span><br></pre></td></tr></table></figure>




<pre><code>5050
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reduce(<span class="keyword">lambda</span> x,y:x*y,<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>))</span><br></pre></td></tr></table></figure>




<pre><code>362880
</code></pre>
<ul>
<li>查看python其他的内置函数：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x[<span class="number">0</span>]!=<span class="string">&quot;_&quot;</span>,<span class="built_in">dir</span>(__builtins__))))</span><br></pre></td></tr></table></figure>

<pre><code>[&#39;ArithmeticError&#39;, &#39;AssertionError&#39;, &#39;AttributeError&#39;, &#39;BaseException&#39;, &#39;BlockingIOError&#39;, &#39;BrokenPipeError&#39;, &#39;BufferError&#39;, &#39;BytesWarning&#39;, &#39;ChildProcessError&#39;, &#39;ConnectionAbortedError&#39;, &#39;ConnectionError&#39;, &#39;ConnectionRefusedError&#39;, &#39;ConnectionResetError&#39;, &#39;DeprecationWarning&#39;, &#39;EOFError&#39;, &#39;Ellipsis&#39;, &#39;EnvironmentError&#39;, &#39;Exception&#39;, &#39;False&#39;, &#39;FileExistsError&#39;, &#39;FileNotFoundError&#39;, &#39;FloatingPointError&#39;, &#39;FutureWarning&#39;, &#39;GeneratorExit&#39;, &#39;IOError&#39;, &#39;ImportError&#39;, &#39;ImportWarning&#39;, &#39;IndentationError&#39;, &#39;IndexError&#39;, &#39;InterruptedError&#39;, &#39;IsADirectoryError&#39;, &#39;KeyError&#39;, &#39;KeyboardInterrupt&#39;, &#39;LookupError&#39;, &#39;MemoryError&#39;, &#39;ModuleNotFoundError&#39;, &#39;NameError&#39;, &#39;None&#39;, &#39;NotADirectoryError&#39;, &#39;NotImplemented&#39;, &#39;NotImplementedError&#39;, &#39;OSError&#39;, &#39;OverflowError&#39;, &#39;PendingDeprecationWarning&#39;, &#39;PermissionError&#39;, &#39;ProcessLookupError&#39;, &#39;RecursionError&#39;, &#39;ReferenceError&#39;, &#39;ResourceWarning&#39;, &#39;RuntimeError&#39;, &#39;RuntimeWarning&#39;, &#39;StopAsyncIteration&#39;, &#39;StopIteration&#39;, &#39;SyntaxError&#39;, &#39;SyntaxWarning&#39;, &#39;SystemError&#39;, &#39;SystemExit&#39;, &#39;TabError&#39;, &#39;TimeoutError&#39;, &#39;True&#39;, &#39;TypeError&#39;, &#39;UnboundLocalError&#39;, &#39;UnicodeDecodeError&#39;, &#39;UnicodeEncodeError&#39;, &#39;UnicodeError&#39;, &#39;UnicodeTranslateError&#39;, &#39;UnicodeWarning&#39;, &#39;UserWarning&#39;, &#39;ValueError&#39;, &#39;Warning&#39;, &#39;WindowsError&#39;, &#39;ZeroDivisionError&#39;, &#39;abs&#39;, &#39;all&#39;, &#39;any&#39;, &#39;ascii&#39;, &#39;bin&#39;, &#39;bool&#39;, &#39;breakpoint&#39;, &#39;bytearray&#39;, &#39;bytes&#39;, &#39;callable&#39;, &#39;chr&#39;, &#39;classmethod&#39;, &#39;compile&#39;, &#39;complex&#39;, &#39;copyright&#39;, &#39;credits&#39;, &#39;delattr&#39;, &#39;dict&#39;, &#39;dir&#39;, &#39;display&#39;, &#39;divmod&#39;, &#39;enumerate&#39;, &#39;eval&#39;, &#39;exec&#39;, &#39;execfile&#39;, &#39;filter&#39;, &#39;float&#39;, &#39;format&#39;, &#39;frozenset&#39;, &#39;get_ipython&#39;, &#39;getattr&#39;, &#39;globals&#39;, &#39;hasattr&#39;, &#39;hash&#39;, &#39;help&#39;, &#39;hex&#39;, &#39;id&#39;, &#39;input&#39;, &#39;int&#39;, &#39;isinstance&#39;, &#39;issubclass&#39;, &#39;iter&#39;, &#39;len&#39;, &#39;license&#39;, &#39;list&#39;, &#39;locals&#39;, &#39;map&#39;, &#39;max&#39;, &#39;memoryview&#39;, &#39;min&#39;, &#39;next&#39;, &#39;object&#39;, &#39;oct&#39;, &#39;open&#39;, &#39;ord&#39;, &#39;pow&#39;, &#39;print&#39;, &#39;property&#39;, &#39;range&#39;, &#39;repr&#39;, &#39;reversed&#39;, &#39;round&#39;, &#39;runfile&#39;, &#39;set&#39;, &#39;setattr&#39;, &#39;slice&#39;, &#39;sorted&#39;, &#39;staticmethod&#39;, &#39;str&#39;, &#39;sum&#39;, &#39;super&#39;, &#39;tuple&#39;, &#39;type&#39;, &#39;vars&#39;, &#39;zip&#39;]
</code></pre>
<h1 id="【06】迭代器、生成器、装饰器"><a href="#【06】迭代器、生成器、装饰器" class="headerlink" title="【06】迭代器、生成器、装饰器"></a>【06】迭代器、生成器、装饰器</h1><h2 id="可迭代对象"><a href="#可迭代对象" class="headerlink" title="可迭代对象"></a>可迭代对象</h2><ul>
<li>可迭代对象：可以直接作用于for循环的对象，例如前面介绍过的list、tuple、dict、set等集合数据类型<ul>
<li>可以用isinstance()判断一个对象是否为可iterable对象</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#对字典来说，迭代的是键，因为只有键是唯一的</span></span><br><span class="line">it=&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">101</span>,<span class="string">&#x27;b&#x27;</span>:<span class="number">102</span>,<span class="string">&#x27;c&#x27;</span>:<span class="number">103</span>&#125; </span><br><span class="line"><span class="keyword">for</span> keys <span class="keyword">in</span> it:</span><br><span class="line">    <span class="built_in">print</span>(keys)</span><br></pre></td></tr></table></figure>

<pre><code>a
b
c
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable</span><br><span class="line">it=&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">101</span>,<span class="string">&#x27;b&#x27;</span>:<span class="number">202</span>,<span class="string">&#x27;c&#x27;</span>:<span class="number">303</span>&#125;</span><br><span class="line"><span class="built_in">isinstance</span>(it,Iterable)</span><br></pre></td></tr></table></figure>




<pre><code>True
</code></pre>
<h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><ul>
<li><strong>迭代器</strong>：能够通过一种使对象可迭代的方式，对序列的第一个元素开始访问，直到所有元素被访问结束<ul>
<li>迭代器是python的一个重要特性</li>
<li>迭代器<strong>只能往前不能后退</strong></li>
</ul>
</li>
<li><strong>迭代器是一种特殊对象</strong>：<ul>
<li>可以在for等语句中输送对象</li>
<li>大部分能接受列表类型的对象的方法，也可接受可迭代对象</li>
<li><strong>最重要的特征：迭代器不要求事先准备好整个迭代过程中所有的元素，仅仅在迭代到某个元素的时候才计算该元素，而在这之前或之后，元素可以不存在或被销毁</strong></li>
<li>特别适合遍历一些巨大或无限的集合</li>
<li>可以用list、tuple等函数提取所有元素</li>
</ul>
</li>
<li><strong>两个基本操作</strong>：<ul>
<li>iter：返回迭代器对象本身</li>
<li>next：返回迭代器的下一个元素<ul>
<li>迭代器也可被定义为，可被next（）函数调用并不断返回下一个值的对象</li>
</ul>
</li>
<li>可以用isinstance()判断一个对象是否为Iterator对象</li>
</ul>
</li>
<li>Iterator对象是一个数据流，可以不断next()，直到没数了，抛出StopIteration错误</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#迭代器可由iter函数创建</span></span><br><span class="line">itit=<span class="built_in">iter</span>(it)</span><br><span class="line">itit</span><br></pre></td></tr></table></figure>




<pre><code>&lt;dict_keyiterator at 0x27f6d1fa900&gt;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">some = &#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>,<span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>&#125;</span><br><span class="line">dict_it = <span class="built_in">iter</span>(some)</span><br><span class="line"><span class="built_in">next</span>(dict_it)</span><br></pre></td></tr></table></figure>




<pre><code>&#39;a&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">next</span>(dict_it)</span><br></pre></td></tr></table></figure>




<pre><code>&#39;b&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">next</span>(dict_it)</span><br></pre></td></tr></table></figure>


<pre><code>---------------------------------------------------------------------------

StopIteration                             Traceback (most recent call last)

C:\Users\FUJINY~1\AppData\Local\Temp/ipykernel_13256/3496275118.py in &lt;module&gt;
----&gt; 1 next(dict_it)


StopIteration: 
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="built_in">isinstance</span>(some,Iterable)</span><br></pre></td></tr></table></figure>




<pre><code>True
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tuple</span>(dict_it)</span><br></pre></td></tr></table></figure>




<pre><code>(&#39;b&#39;,)
</code></pre>
<p>总结：</p>
<ul>
<li>凡是可作用于for循环的都是iterable类型</li>
<li>凡是可作用域next（）函数的对象都是iterator类型</li>
<li>迭代器可以通过list、tuple等函数强制取出所有元素变成非iterator的iterable对象</li>
<li><strong>迭代器每次只能提供下一个元素</strong></li>
<li><strong>这样理解</strong>：迭代器是可迭代对象的描述，每次只提供可迭代对象的下一个元素；非迭代器的可迭代对象在内存中存储了每一个元素，想取哪个取哪个</li>
</ul>
<h2 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h2><ul>
<li>构造新的迭代对象的一种简单方式，一边循环一边计算</li>
<li>一般函数执行之后只会返回单个值，而<strong>生成器以延迟的方式返回一个值序列：每返回一个值后暂停，直至下一个值被请求时继续</strong><ul>
<li>例如，一个1亿个元素的列表，要占用巨大的存储空间，如果仅需要访问前几个元素，那后面元素占用的空间就白白浪费了</li>
<li>而如果该列表元素可以以某种算法推算出来，那就可以在循环过程中不必先得到全部元素</li>
</ul>
</li>
<li>构造方式：<ul>
<li><strong>生成器表达式</strong>：类似列表、字典、集合推导式，只需要把列表推导式的两边方括号改成圆括号；</li>
</ul>
</li>
<li>generator保存的是算法：<ul>
<li>每次调用next（）函数或者__next__()方法就计算出下一个元素的值，直到最后一个</li>
<li>不断调用生成器的__next__()方法是一个不好的习惯，<strong>正确方法是使用for循环</strong>，因为generator也是可迭代对象，所以生成器通常不会利用next</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#生成器表达式</span></span><br><span class="line">gen_l=[x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line">gen_g=(x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line"><span class="built_in">next</span>(gen_g)</span><br></pre></td></tr></table></figure>




<pre><code>0
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">next</span>(gen_g)</span><br></pre></td></tr></table></figure>


<pre><code>---------------------------------------------------------------------------

StopIteration                             Traceback (most recent call last)

C:\Users\FUJINY~1\AppData\Local\Temp/ipykernel_16960/2830280389.py in &lt;module&gt;
----&gt; 1 next(gen_g)


StopIteration: 
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span>(gen_g)</span><br></pre></td></tr></table></figure>




<pre><code>29
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> gen_g:</span><br><span class="line">    <span class="built_in">print</span>(x)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span>(gen_g)</span><br></pre></td></tr></table></figure>




<pre><code>0
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#例：给定列表&#123;0，1，2，3，4&#125;，要求每个元素增加1</span></span><br><span class="line">l1=[]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    l1.append(i+<span class="number">1</span>)</span><br><span class="line">l1</span><br></pre></td></tr></table></figure>




<pre><code>[1, 2, 3, 4, 5]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#可用map函数生成一个迭代器</span></span><br><span class="line">l=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">l2=<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x:x+<span class="number">1</span>,l))</span><br><span class="line">l2</span><br></pre></td></tr></table></figure>




<pre><code>[1, 2, 3, 4, 5]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">l=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">l1=(i+<span class="number">1</span> <span class="keyword">for</span> i <span class="keyword">in</span> l)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> l1:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>

<pre><code>1
2
3
4
5
</code></pre>
<ul>
<li><strong>生成器函数</strong>：如果算法比较复杂，用类似列表生成器表达式的for无法实现的时候，可以用函数实现<ul>
<li>要创建一个生成器函数，只需要把函数中的return替换为yield即可，带有yield函数在python中被称之为生成器</li>
<li>调用的时候，没有任何代码被立即执行。直到从生成器中请求元素时，才会开始执行代码</li>
<li>从<strong>生成器函数</strong>中请求元素，相当于从<strong>生成器</strong>中请求元素，本质上生成器函数也是一个生成器</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">squa</span>(<span class="params">n=<span class="number">10</span></span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;generate from 1 to %d: &#x27;</span>%(n**<span class="number">2</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">yield</span> i**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> squa():</span><br><span class="line">    <span class="built_in">print</span>(i, end=<span class="string">&#x27; &#x27;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>generate from 1 to 100: 
1 4 9 16 25 36 49 64 81 100 
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#用生成器函数生成斐波那契数列</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fibi</span>(<span class="params"><span class="built_in">max</span>=<span class="number">5</span></span>):</span></span><br><span class="line">    a,b=<span class="number">0</span>,<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">max</span>):</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        b=a+b</span><br><span class="line">        a=b-a</span><br><span class="line">        i+=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> fibi(<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(i,end=<span class="string">&#x27; &#x27;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>1 1 2 3 5 8 13 21 34 55 
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fibo</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;seriries with %d items: &#x27;</span>%n)</span><br><span class="line">    x,a,b=<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> x&lt;n:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a,b=b,a+b</span><br><span class="line">        x+=<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> fibo(<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(i,end=<span class="string">&#x27; &#x27;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>seriries with 10 items: 
1 1 2 3 5 8 13 21 34 55 
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#例：找出将1美元（100美分）兑换成任意一组硬币的所有方式</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_change</span>(<span class="params">amount,coins=[<span class="number">1</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">25</span>],hand=<span class="literal">None</span></span>):</span></span><br><span class="line">    hand=[] <span class="keyword">if</span> hand <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">else</span> hand</span><br><span class="line">    <span class="keyword">if</span> amount==<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">yield</span> hand</span><br><span class="line">    <span class="keyword">for</span> coin <span class="keyword">in</span> coins:</span><br><span class="line">        <span class="keyword">if</span> coin&gt;amount <span class="keyword">or</span> (<span class="built_in">len</span>(hand)&gt;<span class="number">0</span> <span class="keyword">and</span> hand[-<span class="number">1</span>]&lt;coin):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">for</span> result <span class="keyword">in</span> make_change(amount-coin,coins=coins,hand=hand+[coin]):</span><br><span class="line">            <span class="keyword">yield</span> result</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> way <span class="keyword">in</span> make_change(<span class="number">100</span>,coins=[<span class="number">10</span>,<span class="number">15</span>]):</span><br><span class="line">    <span class="built_in">print</span>(way)</span><br></pre></td></tr></table></figure>

<pre><code>[10, 10, 10, 10, 10, 10, 10, 10, 10, 10]
[15, 15, 10, 10, 10, 10, 10, 10, 10]
[15, 15, 15, 15, 10, 10, 10, 10]
[15, 15, 15, 15, 15, 15, 10]
</code></pre>
<ul>
<li><strong>yield from</strong>：允许一个generator将其部分操作委派给其他生成器或可迭代对象<ul>
<li>这使得生成器能够分为多个拥有send和throw方法的子生成器，相当于大函数分成多个小函数</li>
<li>对于简单的迭代器，yield from iterable本质上等于for item in iterable: yield item的缩写</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">from</span> <span class="built_in">range</span>(x,<span class="number">0</span>,-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">from</span> <span class="built_in">range</span>(x)</span><br><span class="line"></span><br><span class="line"><span class="comment">#上述函数等同于：</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen1</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(x,<span class="number">0</span>,-<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">yield</span> i</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(x):</span><br><span class="line">        <span class="keyword">yield</span> j</span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(gen(<span class="number">5</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(gen1(<span class="number">5</span>)))</span><br></pre></td></tr></table></figure>

<pre><code>[5, 4, 3, 2, 1, 0, 1, 2, 3, 4]
[5, 4, 3, 2, 1, 0, 1, 2, 3, 4]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#例：求n以内所有素数</span></span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isprimenumber</span>(<span class="params">n</span>):</span></span><br><span class="line">    k=<span class="number">0</span>;j=<span class="number">2</span></span><br><span class="line">    <span class="keyword">while</span> j&lt;=sqrt(n):</span><br><span class="line">        <span class="keyword">if</span> n/j==<span class="built_in">int</span>(n/j):</span><br><span class="line">            k=<span class="number">1</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        j+=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> k==<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">yield</span> n</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>itertools模块</strong>：标准库的这一模块中有一组用于许多常见数据算法的生成器</li>
</ul>
<h2 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h2><ul>
<li>装饰器：在代码运行期间动态增加功能的一种方式<ul>
<li>可以在函数调用前后，让已有函数在不做任何改动情况下增加特定功能</li>
<li>装饰器本质上是一个返回函数的高阶函数（即可接受另一个函数作为参数，返回值也是一个函数）。它充分利用了闭包的特性，用于现有函数的包装，从而为现有函数增加功能</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#例：定义一个可以计算函数执行时间的函数</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timecal</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args,**ky</span>):</span></span><br><span class="line">        start=time.time()</span><br><span class="line">        func(*args,**ky)</span><br><span class="line">        stop=time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;run time is %s &#x27;</span>%(stop-start))</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">snn</span>(<span class="params">n,beg=<span class="number">1</span></span>):</span></span><br><span class="line">    s=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(beg,n+<span class="number">1</span>):</span><br><span class="line">        s+=i</span><br><span class="line">    <span class="built_in">print</span>(s)</span><br><span class="line"></span><br><span class="line"><span class="comment">#利用闭包函数来得到snn的运行时间</span></span><br><span class="line">snn=timecal(snn)</span><br><span class="line">snn(<span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<pre><code>5050
run time is 0.0 
</code></pre>
<p>这里的wrapper函数参数为（*args，**kw）可以接受任意参数的调用。</p>
<ul>
<li><p>首先获取执行func前的时间</p>
</li>
<li><p>然后执行func</p>
</li>
<li><p>获取时间</p>
</li>
<li><p>输出时间差</p>
</li>
<li><p>一种更优雅的写法：**@语法糖**</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@timecal</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">snn</span>(<span class="params">n,beg=<span class="number">1</span></span>):</span></span><br><span class="line">    s=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(beg,n+<span class="number">1</span>):</span><br><span class="line">        s+=i</span><br><span class="line">    <span class="built_in">print</span>(s)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>这里的timecal成为了一个装饰器，利用@语法糖把timecal给snn装饰出一种新的功能</strong><ul>
<li>再调用snn函数时，因为装饰器的存在，会自动显示出执行时间（秒）</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snn(<span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<pre><code>5050
run time is 0.0 
</code></pre>
<ul>
<li>装饰器本身也是可以带参数的，需要编写一个返回装饰器本身的高阶函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timecal</span>(<span class="params">promt</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dec</span>(<span class="params">func</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args,**kw</span>):</span></span><br><span class="line">            start=time.time()</span><br><span class="line">            func(*args,**kw)</span><br><span class="line">            stop=time.time()</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;%s run time is: %s&quot;</span>%(promt,stop-start))</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> dec</span><br><span class="line"></span><br><span class="line"><span class="meta">@timecal(<span class="params"><span class="string">&#x27;Warning:&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">smm</span>(<span class="params">n,beg=<span class="number">1</span></span>):</span></span><br><span class="line">    s=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(beg,n+<span class="number">1</span>):</span><br><span class="line">        s+=i</span><br><span class="line">    <span class="built_in">print</span>(s)</span><br><span class="line">    </span><br><span class="line">smm(<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>

<pre><code>500500
Warning: run time is: 0.0009987354278564453
</code></pre>
<ul>
<li>装饰器可以动态地给已定义的函数增加功能，比如参数检查</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#屏蔽报系统默认的报错信息</span></span><br><span class="line"><span class="keyword">import</span> logging  </span><br><span class="line">logging.basicConfig(level = logging.INFO)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkParams</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">a,b</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(a,(<span class="built_in">int</span>,<span class="built_in">float</span>)) <span class="keyword">and</span> <span class="built_in">isinstance</span>(b,(<span class="built_in">int</span>,<span class="built_in">float</span>)):  <span class="comment">#a和b必须都是整数或者浮点数，注意这里isinstance函数的用法</span></span><br><span class="line">            <span class="keyword">return</span> func(a,b)</span><br><span class="line">        logging.warning(<span class="string">&quot;invalid data type!!!&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@checkParams</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a,b</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a+b</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">1</span>,<span class="string">&#x27;2&#x27;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>WARNING:root:invalid data type!!!
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>




<pre><code>3
</code></pre>
<h1 id="【07】面向对象的编程技术基础"><a href="#【07】面向对象的编程技术基础" class="headerlink" title="【07】面向对象的编程技术基础"></a>【07】面向对象的编程技术基础</h1><ul>
<li>简称OO——把对象作为程序的基本单元，一个对象包含了数据和操作数据的函数</li>
<li>面向过程vs面向对象：<ul>
<li><strong>面向过程</strong>：把计算机程序视为一系列的命令集合，即一组函数的顺序执行。为简化程序设计，面向过程把函数继续切分为子函数，即大块函数切割成小函数，来降低系统的复杂度</li>
<li><strong>面向对象</strong>：把计算机程序视为一组对象的集合，每个对象都可以接收其他对象发过来的消息，并处理这些消息，计算机程序的执行就是一系列消息在各个对象之间传递</li>
</ul>
</li>
<li>python中，所有数据类型都可以视为对象，当然也可以自定义对象。自定义的对象数据类型就是面向对象中的“类”概念</li>
<li>重要概念：<ul>
<li><strong>类class</strong>：用来描述具有相同属性和方法的对象的集合</li>
<li><strong>类变量</strong>：类变量在整个实例化的对象中是公用的，定义在类中</li>
<li><strong>数据成员</strong>：类变量或实例变量用于处理类及其实例对象的相关数据</li>
<li><strong>实例变量</strong>：定义在方法中的变量</li>
<li><strong>方法重载</strong>：从父类中继承的方法不能满足子类的需求，可以进行改写，这种覆盖也叫做方法重载</li>
<li><strong>继承</strong>：一个派生类继承基类的字段和方法</li>
<li><strong>实例化</strong>：创建一个类的实例，即具体对象</li>
<li><strong>方法</strong>：定义在类中的函数</li>
<li><strong>对象</strong>：通过类定义的数据结构实例，对象包括两个数据成员（类变量和实例变量）和方法</li>
</ul>
</li>
</ul>
<h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><ul>
<li>类是一种抽象概念，而对象是实实在在的事物，是类创造出来的实例，具备类的属性和方法（即类的成员）</li>
<li><strong>声明类</strong>：<ul>
<li>class来声明，驼峰命名法（首字母大写）</li>
<li>如何使用声明过的类？需要实例化，可通过“实例名.属性名”获得该实例的属性值，属性值可修改</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    object是python中的上帝，所有类的基类，声明的类均继承自它，可以省略</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    phylum=<span class="string">&#x27;Chordata&#x27;</span></span><br><span class="line">    order=<span class="string">&#x27;Primates&#x27;</span></span><br><span class="line">    family=<span class="string">&#x27;human being&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#这段程序定义了叫Human的类，有3种属性。属性的名称本身是静态的，但值可变</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zhangsan=Human()    <span class="comment">#注意不能省略圆括号()</span></span><br><span class="line">zhangsan.family = <span class="string">&#x27;Mankind&#x27;</span></span><br><span class="line">zhangsan.family</span><br></pre></td></tr></table></figure>




<pre><code>&#39;Mankind&#39;
</code></pre>
<ul>
<li>注意，如果在修改类属性之前，已经对某实例的属性值进行了重新定义，那么该实例不会受到类属性值变化的影响</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Human.family = <span class="string">&#x27;Homo&#x27;</span></span><br><span class="line">lisi=Human()</span><br><span class="line"><span class="built_in">print</span>(lisi.family,zhangsan.family)</span><br></pre></td></tr></table></figure>

<pre><code>Homo Mankind
</code></pre>
<ul>
<li>实例的属性或类的属性成员都可以直接添加</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zhangsan.kingdom=<span class="string">&#x27;Ani&#x27;</span></span><br><span class="line">zhangsan.kingdom</span><br></pre></td></tr></table></figure>




<pre><code>&#39;Ani&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Human.kingdom=<span class="string">&#x27;Bni&#x27;</span></span><br><span class="line">lisi.kingdom</span><br></pre></td></tr></table></figure>




<pre><code>&#39;Bni&#39;
</code></pre>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><ul>
<li>类方法有大致三种：实例方法；类方法；静态方法</li>
</ul>
<ul>
<li><strong>实例方法</strong>：<ul>
<li>类实例化为一个对象，针对实例对象的方法，也就是平时说的方法</li>
<li><strong>第一个参数必须是self</strong></li>
<li>实际上，实例方法就是在类中定义的函数。任何实例方法都至少包含一个参数，即self，self的参数值就是调用该方法的对象</li>
<li>当创建类的实例时，python会检查是否定义了一个名为“__init__”的函数，如已定义则会自动调用并运行</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    kingdom=<span class="string">&#x27;A&#x27;</span></span><br><span class="line">    phylum=<span class="string">&#x27;C&#x27;</span></span><br><span class="line">    order=<span class="string">&#x27;P&#x27;</span></span><br><span class="line">    family=<span class="string">&#x27;HB&#x27;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">typewrite</span>(<span class="params">self</span>):</span>  <span class="comment">##实例方法，必须是self，指调用该方法的实例对象</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;this is %s typing!&#x27;</span>%self.family)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">self,n1,n2</span>):</span></span><br><span class="line">        n=n1+n2</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(n1)+<span class="string">&#x27;+&#x27;</span>+<span class="built_in">str</span>(n2)+<span class="string">&#x27;=&#x27;</span>+<span class="built_in">str</span>(n))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s can calculate!&#x27;</span>%self.family)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zhangsan=Human()</span><br><span class="line">zhangsan.typewrite()</span><br><span class="line">zhangsan.add(<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<pre><code>this is HB typing!
2+3=5
HB can calculate!
</code></pre>
<ul>
<li><ul>
<li>当创建类的实例时，python会检查是否定义了一个名为“__init__”的函数，如已定义则会自动调用并运行</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    domain = <span class="string">&#x27;euk&#x27;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,kingdom=<span class="string">&#x27;A&#x27;</span>,phylum=<span class="string">&#x27;C&#x27;</span>,order=<span class="string">&#x27;P&#x27;</span>,family=<span class="string">&#x27;HB&#x27;</span></span>):</span></span><br><span class="line">        self.kingdom=kingdom</span><br><span class="line">        self.phylum=phylum</span><br><span class="line">        self.order=order</span><br><span class="line">        self.family=family</span><br><span class="line"></span><br><span class="line">wangwu=Human(kingdom=<span class="string">&#x27;Mars&#x27;</span>)</span><br><span class="line">wangwu.kingdom</span><br></pre></td></tr></table></figure>




<pre><code>&#39;Mars&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mazi=Human()</span><br><span class="line">mazi.kingdom</span><br></pre></td></tr></table></figure>




<pre><code>&#39;A&#39;
</code></pre>
<ul>
<li><ul>
<li>__init__是python的构造器方法，也是类中的特殊方法，这些特殊的方法往往可以再某种操作发生时被调用。这里，init（）的方便之处在于创建类的实例时，可以向这个实例传递参数值</li>
<li>__del__：对象被删除前被调用</li>
<li>__str__：在对象使用print语句或是str函数时调用</li>
<li>__getitem__</li>
<li>__getattribute__</li>
<li>__iter__</li>
<li>__len__</li>
</ul>
</li>
<li><p><strong>类方法</strong>：</p>
<ul>
<li>类方法的<strong>第一个参数是cls</strong>，表示类本身，定义类方法时必须使用@classmethod装饰器</li>
<li>类方法可以通过<strong>类名或实例名</strong>来调用</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    domain = <span class="string">&#x27;euk&#x27;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,kingdom=<span class="string">&#x27;A&#x27;</span>,phylum=<span class="string">&#x27;C&#x27;</span>,order=<span class="string">&#x27;P&#x27;</span>,family=<span class="string">&#x27;HB&#x27;</span></span>):</span></span><br><span class="line">        self.kingdom=kingdom</span><br><span class="line">        self.phylum=phylum</span><br><span class="line">        self.order=order</span><br><span class="line">        self.family=family</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">typewrite</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;this is %s typing!&#x27;</span>%self.family)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">self,n1,n2</span>):</span></span><br><span class="line">        n=n1+n2</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(n1)+<span class="string">&#x27;+&#x27;</span>+<span class="built_in">str</span>(n2)+<span class="string">&#x27;=&#x27;</span>+<span class="built_in">str</span>(n))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s can calculate!&#x27;</span>%self.family)</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">showinfo</span>(<span class="params">cls</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;正在调用：&quot;</span>,cls.__name__)  <span class="comment">#__name__属性，其值为类名</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">dir</span>(cls))  <span class="comment">#使用dir列示本类的所有方法</span></span><br><span class="line"></span><br><span class="line">zhangsan=Human()</span><br><span class="line">zhangsan.showinfo()</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">注意调用方法的时候要加()!</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<pre><code>正在调用： Human
[&#39;__class__&#39;, &#39;__delattr__&#39;, &#39;__dict__&#39;, &#39;__dir__&#39;, &#39;__doc__&#39;, &#39;__eq__&#39;, &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__getattribute__&#39;, &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__init__&#39;, &#39;__init_subclass__&#39;, &#39;__le__&#39;, &#39;__lt__&#39;, &#39;__module__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__setattr__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;__weakref__&#39;, &#39;add&#39;, &#39;domain&#39;, &#39;showinfo&#39;, &#39;typewrite&#39;]
3
</code></pre>
<ul>
<li><strong>静态方法</strong>：<ul>
<li>静态方法不需要类方法和实例方法。定义时使用“@staticmethod”装饰器</li>
<li>通过类名或实例名来调用</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    domain = <span class="string">&#x27;euk&#x27;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,kingdom=<span class="string">&#x27;A&#x27;</span>,phylum=<span class="string">&#x27;C&#x27;</span>,order=<span class="string">&#x27;P&#x27;</span>,family=<span class="string">&#x27;HB&#x27;</span></span>):</span></span><br><span class="line">        self.kingdom=kingdom</span><br><span class="line">        self.phylum=phylum</span><br><span class="line">        self.order=order</span><br><span class="line">        self.family=family</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">typewrite</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;this is %s typing!&#x27;</span>%self.family)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">self,n1,n2</span>):</span></span><br><span class="line">        n=n1+n2</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(n1)+<span class="string">&#x27;+&#x27;</span>+<span class="built_in">str</span>(n2)+<span class="string">&#x27;=&#x27;</span>+<span class="built_in">str</span>(n))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s can calculate!&#x27;</span>%self.family)</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">showinfo</span>(<span class="params">cls</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;正在调用：&quot;</span>,cls.__name__)</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">dir</span>(cls))  </span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">showclassattribute</span>():</span></span><br><span class="line">        <span class="built_in">print</span>(Human.__dict__) <span class="comment">#__dict__属性，返回一个键为属性名、键值为属性值的字典</span></span><br><span class="line"></span><br><span class="line">zhangsan=Human()</span><br><span class="line">zhangsan.showclassattribute()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;注意调用方法的时候要加()!&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>&#123;&#39;__module__&#39;: &#39;__main__&#39;, &#39;domain&#39;: &#39;euk&#39;, &#39;__init__&#39;: &lt;function Human.__init__ at 0x0000027A2AE031F0&gt;, &#39;typewrite&#39;: &lt;function Human.typewrite at 0x0000027A2AE03160&gt;, &#39;add&#39;: &lt;function Human.add at 0x0000027A2AE03310&gt;, &#39;showinfo&#39;: &lt;classmethod object at 0x0000027A2ADFED60&gt;, &#39;showclassattribute&#39;: &lt;staticmethod object at 0x0000027A2ADFE7C0&gt;, &#39;__dict__&#39;: &lt;attribute &#39;__dict__&#39; of &#39;Human&#39; objects&gt;, &#39;__weakref__&#39;: &lt;attribute &#39;__weakref__&#39; of &#39;Human&#39; objects&gt;, &#39;__doc__&#39;: None&#125;





&#39;注意调用方法的时候要加()!&#39;
</code></pre>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><ul>
<li>属性可以分为类属性和实例属性，也可以分为公有属性和私有属性。属性都可以进行添加，其值都可以修改<ul>
<li><strong>实例属性</strong>：一般在__init()__中以self为前缀定义的。如最后声明的human类中，kingdom、family等属性。实例属性只能通过实例名访问</li>
<li><strong>类属性</strong>：在类中所有方法之外定义的成员。类属性属于类，通过类名或实例对象名访问</li>
<li><strong>私有属性</strong>：在声明类过程中定义属性时，带有__前缀的属性。只能在类的内部调用，无法外部直接访问（其实可通过“实例名._类名__私有属性名”访问）</li>
<li><strong>公有属性</strong>：除私有属性之外的所有属性</li>
</ul>
</li>
</ul>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><ul>
<li>继承是面向对象程序设计的重要特性之一，为代码的复用提供了极大便利<ul>
<li>在继承机制中，将已有的或已声明的类称为“父类”、“基类”或“超类”，在父类基础上创建的新类称之为“子类”</li>
</ul>
</li>
<li>三种方式：<ul>
<li><strong>隐形继承</strong>：子类从父类完全继承了所有成员，用户无需任何多余操作，就可以使子类具备父类的功能<ul>
<li>例如，声明一个类Male，继承于父类Human。这里声明的Male没有添加任何成员，现在实例化;</li>
<li>如果在子类中，用__init__来构造实例属性，<strong>不会自动继承父类的实例属性</strong>，一定要用<strong>super函数</strong>去初始化父类。否则子类的实例属性只有自己用__init__构造的</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Male</span>(<span class="params">Human</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">someoneismale=Male()</span><br><span class="line">someoneismale.family</span><br></pre></td></tr></table></figure>




<pre><code>&#39;HB&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Male2</span>(<span class="params">Human</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,gender=<span class="string">&#x27;male&#x27;</span></span>):</span></span><br><span class="line">        self.gender=gender</span><br><span class="line">someoneismale=Male2()</span><br><span class="line">someoneismale.kingdom</span><br></pre></td></tr></table></figure>


<pre><code>---------------------------------------------------------------------------

AttributeError                            Traceback (most recent call last)

C:\Users\FUJINY~1\AppData\Local\Temp/ipykernel_18340/397069122.py in &lt;module&gt;
      3         self.gender=gender
      4 someoneismale=Male2()
----&gt; 5 someoneismale.kingdom


AttributeError: &#39;Male2&#39; object has no attribute &#39;kingdom&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Male3</span>(<span class="params">Human</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,gender=<span class="string">&#x27;male&#x27;</span></span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Male3,self).__init__()  <span class="comment">#super函数的第一个参数是子类的名字</span></span><br><span class="line">        self.gender=gender</span><br><span class="line">someoneismale=Male3()</span><br><span class="line">someoneismale.kingdom</span><br></pre></td></tr></table></figure>




<pre><code>&#39;A&#39;
</code></pre>
<ul>
<li><ul>
<li><strong>显式覆盖</strong>：子类继承了父类的方法，在声明子类时可以直接使用def定义函数为子类增加新的方法，这时子类除了具有父类的方法之外，还具有自己定义的方法。但是有些时候，子类的方法名称和父类相同，但实现的功能不同。子类中的方法会把父类的覆盖掉</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Male</span>(<span class="params">Human</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,gender=<span class="string">&#x27;male&#x27;</span></span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Male,self).__init__()</span><br><span class="line">        self.gender=gender</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">less</span>(<span class="params">self,n1,n2</span>):</span></span><br><span class="line">        <span class="comment">#为子类Male增加一个less方法</span></span><br><span class="line">        n=n1-n2</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(n1)+<span class="string">&#x27;+&#x27;</span>+<span class="built_in">str</span>(n2)+<span class="string">&#x27;=&#x27;</span>+<span class="built_in">str</span>(n))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s can calculate!&#x27;</span>%self.gender)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">self,n1,n2</span>):</span></span><br><span class="line">        <span class="comment">#在子类中重新定义add方法，覆盖父类中定义的同名方法</span></span><br><span class="line">        n=n1-n2</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(n1)+<span class="string">&#x27;-&#x27;</span>+<span class="built_in">str</span>(n2)+<span class="string">&#x27;=&#x27;</span>+<span class="built_in">str</span>(n))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s can not calculate!&#x27;</span>%self.gender)</span><br></pre></td></tr></table></figure>

<ul>
<li><ul>
<li><strong>super继承</strong>：在子类中运用super函数可以达到与调用与子类成员名称相同的父类成员的目的。如，重新声明子类Male并在子类中使用super继承的方法调用父类同名方法</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Male</span>(<span class="params">Human</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,gender=<span class="string">&#x27;male&#x27;</span></span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Male,self).__init__()</span><br><span class="line">        self.gender=gender</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">less</span>(<span class="params">self,n1,n2</span>):</span></span><br><span class="line">        n=n1-n2</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s - %s = %s&quot;</span>%(n1,n2,n))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;you see %s!&quot;</span>%self.gender)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">showclassmethodinfo</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;this is Male info:&quot;</span>)</span><br><span class="line">        <span class="built_in">super</span>(Male,self).showclassmethodinfo()   <span class="comment">#使用super函数调用父类同名方法</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\na Male&#x27;s instance method info:&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">dir</span>(self))</span><br></pre></td></tr></table></figure>

<h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><ul>
<li>多态是继承的重要特性，是python的动态语言特性的体现之一<ul>
<li>调用同一方法的结果不同</li>
<li>python中声明的类其实就是一种数据类型，是所有继承于父类的子类实例都跟父类是同一个数据类型，例如Male，继承自父类Human，Male的实例和Human是同一个数据类型。<strong>但是，这反过来并不成立</strong></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">somemale = Male()</span><br><span class="line"><span class="built_in">isinstance</span>(somemale,Human)</span><br></pre></td></tr></table></figure>




<pre><code>True
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">somehuman = Human()</span><br><span class="line"><span class="built_in">isinstance</span>(somehuman,Male)</span><br></pre></td></tr></table></figure>




<pre><code>False
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Female</span>(<span class="params">Human</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,gender=<span class="string">&#x27;female&#x27;</span></span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Female,self).__init__()</span><br><span class="line">        self.gender=gender</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">self,n1,n2</span>):</span></span><br><span class="line">        n=n1-n2</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s - %s = %s&quot;</span>%(n1,n2,n))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;she can calculate!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addition</span>(<span class="params">obj,n1,n2</span>):</span></span><br><span class="line">    obj.add(n1,n2)</span><br><span class="line"></span><br><span class="line">alice=Female();bob=Human()</span><br><span class="line">addition(alice,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">addition(bob,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<pre><code>2 - 3 = -1
she can calculate!
2+3=5
HB can calculate!
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Female</span>(<span class="params">Human</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,gender=<span class="string">&#x27;female&#x27;</span></span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Female,self).__init__()</span><br><span class="line">        self.gender=gender</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">self,n1,n2</span>):</span></span><br><span class="line">        n=n1-n2</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s - %s = %s&quot;</span>%(n1,n2,n))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;she can calculate!&quot;</span>)</span><br><span class="line"></span><br><span class="line">someoneisfemale=Female()</span><br><span class="line"></span><br><span class="line"><span class="comment">#可以利用addition函数对上述实例对象的add方法进行调用</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addition</span>(<span class="params">obj,n1,n2</span>):</span></span><br><span class="line">    obj.add(n1,n2)</span><br><span class="line"></span><br><span class="line">addition(someoneisfemale,<span class="number">1</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<pre><code>1 - 1 = 0
she can calculate!
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addition(someoneismale,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<pre><code>2+3=5
HB can calculate!
</code></pre>
<ul>
<li><p>注：someoneismale和someoneisfemale分别是子类Male、Female的实例对象，上述addition函数还可以直接调用类实例。对任意新增父类Human的子类、Female或Male的子类，由于多态作用，只要方法存在且参数正确，不必对addition函数进行修改，就可以运行得到add方法的结果</p>
</li>
<li><ul>
<li>多态的意义在于，子类继承了父类的方法，但可能有不同的实施结果，而父类新增任何子类仍然能正常调用</li>
</ul>
</li>
</ul>
<h2 id="多重继承"><a href="#多重继承" class="headerlink" title="多重继承"></a>多重继承</h2><ul>
<li>子类不仅可以从一个父类继承，也可以从多个父类继承。具备所有父类的成员</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Somebody</span>(<span class="params">Male,Female</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x[<span class="number">0</span>]!=<span class="string">&#x27;_&#x27;</span>,<span class="built_in">dir</span>(Somebody()))))  <span class="comment">#使用filter函数过滤</span></span><br></pre></td></tr></table></figure>

<pre><code>[&#39;add&#39;, &#39;domain&#39;, &#39;family&#39;, &#39;gender&#39;, &#39;kingdom&#39;, &#39;less&#39;, &#39;order&#39;, &#39;phylum&#39;, &#39;showclassattribute&#39;, &#39;showinfo&#39;, &#39;typewrite&#39;]
</code></pre>
<h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul>
<li>特性是指在对一个特定属性操作时，执行特定的函数，以实现对属性的控制<ul>
<li>换言之，特性再调用属性的时候会自动调用相应的方法，也就是增加了一些额外的处理过程，如属性值的类型检查、验证属性值设置是否合法等</li>
<li>下面的例子中定义了get_age()方法来获取实例对象的指定属性值，这种方法为getter方法</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Female</span>(<span class="params">Human</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,gender=<span class="string">&#x27;female&#x27;</span></span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Female,self).__init__()</span><br><span class="line">        self.gender=gender</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_age</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.age</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_age</span>(<span class="params">self,age_value</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(age_value,<span class="built_in">int</span>):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;age must be an integar!&#x27;</span>)    <span class="comment">#手动抛出异常</span></span><br><span class="line">        <span class="keyword">if</span> age_value&lt;<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;you were born!&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> age_value&gt;<span class="number">150</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;you live too long!&#x27;</span>)</span><br><span class="line">        self.age=age_value</span><br><span class="line"></span><br><span class="line">misschen=Female()</span><br><span class="line">misschen.set_age(<span class="number">27</span>)</span><br><span class="line">misschen.get_age()</span><br></pre></td></tr></table></figure>




<pre><code>27
</code></pre>
<ul>
<li>上面声明的Female类，自定义的get_age()方法可以获取实例对象的指定属性值，这种方法可称之为<strong>getter方法</strong>；set_age()可以对实例对象的属性进行设置，称之为<strong>setter方法</strong></li>
<li>虽然这种方式再一定程度上能进行信息验证、防止属性值被随意修改，但使用较为复杂，且可以不适用set_age()方法、直接对age属性赋值，仍然可以绕过我们设定的输入范围</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">misschen.age=<span class="number">180</span></span><br><span class="line">misschen.age</span><br></pre></td></tr></table></figure>




<pre><code>180
</code></pre>
<ul>
<li><strong>@property</strong>就是把一个方法变成属性调用的装饰器，一般来装饰getter方法。它本身又会创建另一个<strong>以@被装饰方法.setter命名</strong>的装饰器用来修饰setter方法，将setter方法变成属性设置。例如声明类Female：<ul>
<li>此时，使用属性直接复制的方法是会受到控制的</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Female</span>(<span class="params">Human</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,gender=<span class="string">&#x27;female&#x27;</span></span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Female,self).__init__()</span><br><span class="line">        self.gender=gender</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">age</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._age  <span class="comment">#为了与age方法不同名</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @age.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">age</span>(<span class="params">self,age_value</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(age_value,<span class="built_in">int</span>):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;age must be an integar!&#x27;</span>)    <span class="comment">#手动抛出异常</span></span><br><span class="line">        <span class="keyword">if</span> age_value&lt;<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;you were born!&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> age_value&gt;<span class="number">150</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;you live too long!&#x27;</span>)</span><br><span class="line">        self._age=age_value</span><br><span class="line"></span><br><span class="line">misschen=Female()</span><br><span class="line">misschen.age=<span class="number">1500</span></span><br><span class="line">misschen.age</span><br></pre></td></tr></table></figure>


<pre><code>---------------------------------------------------------------------------

ValueError                                Traceback (most recent call last)

C:\Users\FUJINY~1\AppData\Local\Temp/ipykernel_16960/3751726243.py in &lt;module&gt;
     19 
     20 misschen=Female()
---&gt; 21 misschen.age=1500
     22 misschen.age


C:\Users\FUJINY~1\AppData\Local\Temp/ipykernel_16960/3751726243.py in age(self, age_value)
     15             raise ValueError(&#39;you were born!&#39;)
     16         if age_value&gt;150:
---&gt; 17             raise ValueError(&#39;you live too long!&#39;)
     18         self._age=age_value
     19 


ValueError: you live too long!
</code></pre>
<ul>
<li>如果只使用@property来装饰getter方法，不装饰setter方法时，该方法实现的就是一个<strong>只读属性</strong>，例如：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Female</span>(<span class="params">Human</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,gender=<span class="string">&#x27;female&#x27;</span>,bloodtype=<span class="string">&#x27;&#x27;</span></span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Female,self).__init__()</span><br><span class="line">        self.gender=gender</span><br><span class="line">        self._bloodtype=bloodtype</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">age</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._age  <span class="comment">#为了与age方法不同名</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @age.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">age</span>(<span class="params">self,age_value</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(age_value,<span class="built_in">int</span>):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;age must be an integar!&#x27;</span>)    <span class="comment">#手动抛出异常</span></span><br><span class="line">        <span class="keyword">if</span> age_value&lt;<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;you were born!&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> age_value&gt;<span class="number">150</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;you live too long!&#x27;</span>)</span><br><span class="line">        self._age=age_value</span><br><span class="line">        </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bloodtype</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._bloodtype</span><br><span class="line"></span><br><span class="line">missfu=Female(bloodtype=<span class="string">&#x27;B&#x27;</span>)  <span class="comment">#在定义类时定义的属性只能是__init__里面的</span></span><br><span class="line">missfu.age=<span class="number">27</span></span><br><span class="line">missfu.bloodtype=<span class="string">&#x27;AB&#x27;</span></span><br></pre></td></tr></table></figure>


<pre><code>---------------------------------------------------------------------------

AttributeError                            Traceback (most recent call last)

C:\Users\FUJINY~1\AppData\Local\Temp/ipykernel_18340/1636305406.py in &lt;module&gt;
     25 missfu=Female(bloodtype=&#39;B&#39;)  #在定义类时定义的属性只能是__init__里面的
     26 missfu.age=27
---&gt; 27 missfu.bloodtype=&#39;AB&#39;


AttributeError: can&#39;t set attribute
</code></pre>
<h1 id="【08】异常捕获与容错处理"><a href="#【08】异常捕获与容错处理" class="headerlink" title="【08】异常捕获与容错处理"></a>【08】异常捕获与容错处理</h1><ul>
<li><p>异常：即非正常状态，在python中使用异常对象来表示异常</p>
<ul>
<li>若程序在编译或运行时发生错误，程序的执行过程就会发生改变，抛出异常对象，程序流进入异常处理</li>
<li>如果异常对象没有被处理，程序会回溯（traceback）来终止程序</li>
</ul>
</li>
<li><p>python提供了两个</p>
<ul>
<li>标准异常</li>
</ul>
</li>
<li><p>标准异常：</p>
<ul>
<li><strong>exception类</strong>：通用异常基类，不需要import模块，额可以直接用</li>
</ul>
</li>
<li><p>触发异常：</p>
<ul>
<li><strong>raise语句</strong>：手动抛出一个通用的异常类型（exception），raise关键字后跟异常的名称<ul>
<li><em>注意：一旦执行raise语句后，程序终止</em></li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">raisetest</span>(<span class="params">obj</span>):</span></span><br><span class="line">    <span class="keyword">if</span> obj !=<span class="string">&#x27;RJ&#x27;</span>: <span class="keyword">raise</span> ValueError(<span class="string">&#x27;Invalid!!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">raisetest(<span class="string">&#x27;JR&#x27;</span>)</span><br></pre></td></tr></table></figure>


<pre><code>---------------------------------------------------------------------------

ValueError                                Traceback (most recent call last)

C:\Users\FUJINY~1\AppData\Local\Temp/ipykernel_22060/1582717738.py in &lt;module&gt;
      2     if obj !=&#39;RJ&#39;: raise ValueError(&#39;Invalid!!&#39;)
      3 
----&gt; 4 raisetest(&#39;JR&#39;)


C:\Users\FUJINY~1\AppData\Local\Temp/ipykernel_22060/1582717738.py in raisetest(obj)
      1 def raisetest(obj):
----&gt; 2     if obj !=&#39;RJ&#39;: raise ValueError(&#39;Invalid!!&#39;)
      3 
      4 raisetest(&#39;JR&#39;)


ValueError: Invalid!!
</code></pre>
<ul>
<li>与其让程序最后崩溃，不如在出现错误条件时就崩溃——<ul>
<li><strong>assert语句</strong>：断言语句，根据后面表达式的真假来控制程序流<ul>
<li>T，则往下执行；F，则中断程序并调用默认的异常处理器，同时输出指定信息</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="built_in">input</span>(<span class="string">&#x27;best person:&#x27;</span>)</span><br><span class="line"><span class="keyword">assert</span> a==<span class="string">&#x27;fjy&#x27;</span>,<span class="string">&#x27;you are such an idiot!&#x27;</span></span><br></pre></td></tr></table></figure>

<pre><code>best person:fjyy



---------------------------------------------------------------------------

AssertionError                            Traceback (most recent call last)

C:\Users\FUJINY~1\AppData\Local\Temp/ipykernel_22060/417852551.py in &lt;module&gt;
      1 a=input(&#39;best person:&#39;)
----&gt; 2 assert a==&#39;fjy&#39;,&#39;you are such an idiot!&#39;


AssertionError: you are such an idiot!
</code></pre>
<ul>
<li><p><strong>捕获异常</strong>：<strong>try…expect…else</strong>语句</p>
<ul>
<li>try：可能触发异常的语句块</li>
<li>except [exceptionType]:捕获可能触发的异常，可以指定类型</li>
<li>except：没有指定类型，捕获任意异常</li>
<li>else：没有捕获异常时执行<ul>
<li>注意：except子句没有数量限制，但是有继承关系，有些异常可能继承于别的异常，因此子类应该写在前面，父类放在后面，否则父类会直接截获子类异常</li>
<li>else语句仅在不执行except时被执行，与while..else一致</li>
</ul>
</li>
</ul>
</li>
<li><p>示例：</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    openFile=<span class="built_in">open</span>(<span class="string">&#x27;notExists.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    filecontent=openFile.readlines()</span><br><span class="line"><span class="keyword">except</span> IOError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;File not exists&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;processing exception&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;reading the file&#x27;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>File not exists
</code></pre>
<ul>
<li><strong>try finally语句</strong><ul>
<li>无论try是否触发异常，都会执行finally子句，一般用于关闭文件或关闭因系统错误而无法正常释放的资源</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="number">1</span>/<span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;0!!!&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;no exception&#x27;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;最后都需要执行finally啦~&#x27;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>0!!!
最后都需要执行finally啦~
</code></pre>
<ul>
<li><p>with语句：更优雅，适用于访问资源或文件</p>
</li>
<li><p><strong>文件I/0</strong>：</p>
<ul>
<li>数据输入输出：print、input函数等</li>
<li>文件操作：<ul>
<li>open函数、file对象及方法等</li>
<li>os模块的目录、文件操作</li>
</ul>
</li>
<li>屏幕输入输出：<ul>
<li><strong>input函数</strong>：注意，返回的<strong>永远是str类型</strong></li>
<li><strong>神奇的eval函数</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">putin = <span class="built_in">eval</span>(<span class="built_in">input</span>(<span class="string">&#x27;please enter your wisher:&#x27;</span>))</span><br></pre></td></tr></table></figure>

<pre><code>please enter your wisher:[x*5 for x in range(5)]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">putin</span><br></pre></td></tr></table></figure>




<pre><code>[0, 5, 10, 15, 20]
</code></pre>
<ul>
<li><p>打开和关闭文件：</p>
<ul>
<li>open()函数：打开一个文件，创建一个file对象</li>
</ul>
</li>
<li><p>file对象的主要方法：</p>
<ul>
<li>close</li>
<li>read</li>
<li>write</li>
<li>tell</li>
<li>seek</li>
</ul>
</li>
<li><p>这些东西在后面几乎用不到，有更先进的办法</p>
</li>
<li><p>模块：</p>
<ul>
<li>一个.py文件就是一个模块，保存了python代码。编写程序时可以引用python内置的模块或第三方的模块</li>
<li><strong>import</strong>：导入模块，逗号隔开不同模块</li>
<li>**from…import..**：从模块中导入指定的部分<ul>
<li>这种情况下，使用模块中的东西不需要加前缀</li>
</ul>
</li>
<li><strong>import…as…</strong>:将导入的模块重命名为xx，用xx.XX来实现模块部件的功能，该种导入的方式往往在模块名较长的时候使用</li>
<li><strong>from…import *</strong>:懒人模式，*代表everything。但是不推荐，因为可能覆盖自己编制的对象，并且一些大型库所涵盖的内容可能非常多，会造成运行效率的低下</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line">math.floor(<span class="number">99.99</span>)</span><br></pre></td></tr></table></figure>




<pre><code>99
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line">sqrt(<span class="number">3721</span>)</span><br></pre></td></tr></table></figure>




<pre><code>61.0
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="built_in">round</span>(np.sqrt(<span class="number">2731</span>),<span class="number">2</span>)</span><br></pre></td></tr></table></figure>




<pre><code>52.26
</code></pre>
<ul>
<li><p><strong>包</strong></p>
</li>
<li><p>多核并行处理：跳过不讲</p>
</li>
</ul>
<h1 id="【09】数据预处理与数据探索-numpy"><a href="#【09】数据预处理与数据探索-numpy" class="headerlink" title="【09】数据预处理与数据探索 - numpy"></a>【09】数据预处理与数据探索 - numpy</h1><ul>
<li>数据预处理涉及到数据整理和整合的各个方面，是数据分析工作的准备阶段。</li>
<li>python的数据分析主要涉及到numpy、pandas、scipy、matplotlib、statsmodels、sklearn等包或分析工具</li>
<li>用numpy数组的方式来处理数据运算速度更快！</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pythonpw</span>(<span class="params">n</span>):</span></span><br><span class="line">    a=<span class="built_in">list</span>(<span class="built_in">range</span>(n))</span><br><span class="line">    b=<span class="built_in">list</span>(<span class="built_in">range</span>(n))</span><br><span class="line">    c=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>((<span class="built_in">len</span>(a))):</span><br><span class="line">        a[i]=i**<span class="number">2</span></span><br><span class="line">        b[i]=i**<span class="number">3</span></span><br><span class="line">        c.append(a[i]*b[i])</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">numpypw</span>(<span class="params">n</span>):</span></span><br><span class="line">    c=np.arange(n)**<span class="number">2</span>*np.arange(n)**<span class="number">3</span>    <span class="comment">#numpy中的arange函数，用来生成从0到n-1的数组</span></span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;pythonpw proceeding time:&quot;</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">%timeit <span class="built_in">str</span>(pythonpw(<span class="number">1000</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;numpypw proceeding time:&quot;</span>,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">%timeit <span class="built_in">str</span>(numpypw(<span class="number">1000</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>pythonpw proceeding time:816 µs ± 39.6 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
numpypw proceeding time:1.78 ms ± 135 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</code></pre>
<ul>
<li>numpy的数组对象：<ul>
<li>用于创建数组的主要函数：<ul>
<li>array：把列表、元组等其他数据类型转换成ndarray</li>
<li>arange：类似range，返回一个ndarray</li>
</ul>
</li>
<li>可以不用循环就对数据进行批量计算（矢量化，vertorization），大小相等的数组之间的任何算术运算都会运算<strong>应用到元素</strong></li>
<li>因此，数组与标量的运算也会“传播”到每个元素<ul>
<li>可用arange函数创建向量，即一维向量</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">v = np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(v)</span><br><span class="line"><span class="built_in">print</span>(v.dtype)</span><br><span class="line"><span class="built_in">print</span>(v.shape)</span><br></pre></td></tr></table></figure>

<pre><code>[0 1 2 3 4 5 6 7 8 9]
int32
(10,)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vstep=np.arange(<span class="number">0</span>,<span class="number">10</span>,<span class="number">0.5</span>)</span><br><span class="line">vstep</span><br></pre></td></tr></table></figure>




<pre><code>array([0. , 0.5, 1. , 1.5, 2. , 2.5, 3. , 3.5, 4. , 4.5, 5. , 5.5, 6. ,
       6.5, 7. , 7.5, 8. , 8.5, 9. , 9.5])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(vstep)</span><br></pre></td></tr></table></figure>

<pre><code>[0.  0.5 1.  1.5 2.  2.5 3.  3.5 4.  4.5 5.  5.5 6.  6.5 7.  7.5 8.  8.5
 9.  9.5]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vstep*<span class="number">100</span></span><br></pre></td></tr></table></figure>




<pre><code>array([  0.,  50., 100., 150., 200., 250., 300., 350., 400., 450., 500.,
       550., 600., 650., 700., 750., 800., 850., 900., 950.])
</code></pre>
<ul>
<li><ul>
<li>其他函数：<ul>
<li>linspace生成等差数列</li>
<li>logspace生成等比数列，基数（公比）可以用base指定</li>
<li>random生成随机向量，例入np.random.randn(1)随机生成10个标准正态分布</li>
<li>frombuffer, fromstring, fromfile函数，从字节序列或文件中创建数组（不怎么用）</li>
<li>fromfunction，通过指定的函数创建数组，第一个参数为函数名称，第二个为数组形状（必须为序列）</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.linspace(<span class="number">1</span>,<span class="number">19</span>,<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<pre><code>array([ 1.,  3.,  5.,  7.,  9., 11., 13., 15., 17., 19.])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.logspace(<span class="number">1</span>,<span class="number">2</span>,<span class="number">10</span>,base=<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<pre><code>array([ 10.        ,  12.91549665,  16.68100537,  21.5443469 ,
        27.82559402,  35.93813664,  46.41588834,  59.94842503,
        77.42636827, 100.        ])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.random.randn(<span class="number">10</span>)    <span class="comment">#生成标准正态分布的随机函数</span></span><br></pre></td></tr></table></figure>




<pre><code>array([-1.11811069, -1.32110806,  0.63170289, -0.19546752,  0.69279043,
       -0.52499589, -0.68390397, -0.13557948,  2.26710794,  0.63249809])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.random.uniform(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<pre><code>4.600320541895333
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.random.normal(loc=<span class="number">0.0</span>,scale=<span class="number">12</span>,size=(<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line"><span class="comment">#loc为均值，scale是标准差，size指定维数</span></span><br></pre></td></tr></table></figure>




<pre><code>array([[-17.06071427,   3.02277433,  -8.03257642],
       [ 18.67148984,  -4.74196622,   2.70896054]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">arraygen</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="keyword">return</span> n**<span class="number">2</span>/<span class="number">2</span>-<span class="number">1</span></span><br><span class="line"></span><br><span class="line">np.fromfunction(arraygen,(<span class="number">10</span>,))</span><br><span class="line"><span class="comment">#第一个参数为计算数组元素的函数（实际上是递推公式），第二个指定形状，注意必须有个逗号</span></span><br></pre></td></tr></table></figure>




<pre><code>array([-1. , -0.5,  1. ,  3.5,  7. , 11.5, 17. , 23.5, 31. , 39.5])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multiply99</span>(<span class="params">i,j</span>):</span></span><br><span class="line">    <span class="keyword">return</span> (i+<span class="number">1</span>)*(j+<span class="number">1</span>)</span><br><span class="line">np.fromfunction(multiply99,(<span class="number">3</span>,<span class="number">3</span>))</span><br></pre></td></tr></table></figure>




<pre><code>array([[1., 2., 3.],
       [2., 4., 6.],
       [3., 6., 9.]])
</code></pre>
<ul>
<li><p><strong>判断数组维度</strong>：看方括号有几层，上述就是二维的，而不能看行列</p>
</li>
<li><p><strong>多维数组</strong>：（1）实际数据+（2）描述这些数据的元数据</p>
<ul>
<li>以下的a就是一个二维数组，形状是（2，3），也就是2行3列</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a=np.array([np.arange(<span class="number">3</span>),np.arange(<span class="number">3</span>)])</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(a.shape)</span><br><span class="line"><span class="built_in">print</span>(a.ndim)</span><br></pre></td></tr></table></figure>

<pre><code>[[0 1 2]
 [0 1 2]]
(2, 3)
2
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a[<span class="number">0</span>,<span class="number">0</span>]</span><br></pre></td></tr></table></figure>




<pre><code>0
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.tolist()</span><br></pre></td></tr></table></figure>




<pre><code>[[0, 1, 2], [0, 1, 2]]
</code></pre>
<ul>
<li>创建n×n的单位矩阵：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.identity(<span class="number">9</span>).astype(np.int16)</span><br></pre></td></tr></table></figure>




<pre><code>array([[1, 0, 0, 0, 0, 0, 0, 0, 0],
       [0, 1, 0, 0, 0, 0, 0, 0, 0],
       [0, 0, 1, 0, 0, 0, 0, 0, 0],
       [0, 0, 0, 1, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 1, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 1, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 1, 0, 0],
       [0, 0, 0, 0, 0, 0, 0, 1, 0],
       [0, 0, 0, 0, 0, 0, 0, 0, 1]], dtype=int16)
</code></pre>
<ul>
<li>创建随机数的数组</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.random.randn(<span class="number">5</span>,<span class="number">3</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>




<pre><code>array([[[-0.56260046,  0.4635362 ],
        [-0.39391719,  1.10220506],
        [-0.64074463, -1.25036938]],

       [[ 1.74447403, -0.59476746],
        [-0.5092663 ,  1.28921102],
        [ 2.0545498 ,  0.35448802]],

       [[-1.16455311,  1.34383823],
        [ 1.16075706, -0.57016874],
        [-1.57174417, -0.78931   ]],

       [[-2.01890204,  1.0192597 ],
        [-0.05475546,  0.44491359],
        [-0.7251603 , -2.02032877]],

       [[-0.37734347,  0.9647722 ],
        [-0.2651307 ,  1.73731004],
        [ 0.46876967, -2.76685451]]])
</code></pre>
<ul>
<li><strong>numpy的数据类型</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">set</span>(np.typeDict.values()))</span><br></pre></td></tr></table></figure>

<pre><code>&#123;&lt;class &#39;numpy.uint8&#39;&gt;, &lt;class &#39;numpy.float64&#39;&gt;, &lt;class &#39;numpy.bool_&#39;&gt;, &lt;class &#39;numpy.float32&#39;&gt;, &lt;class &#39;numpy.datetime64&#39;&gt;, &lt;class &#39;numpy.str_&#39;&gt;, &lt;class &#39;numpy.object_&#39;&gt;, &lt;class &#39;numpy.complex64&#39;&gt;, &lt;class &#39;numpy.uint16&#39;&gt;, &lt;class &#39;numpy.bytes_&#39;&gt;, &lt;class &#39;numpy.float16&#39;&gt;, &lt;class &#39;numpy.clongdouble&#39;&gt;, &lt;class &#39;numpy.int32&#39;&gt;, &lt;class &#39;numpy.timedelta64&#39;&gt;, &lt;class &#39;numpy.complex128&#39;&gt;, &lt;class &#39;numpy.uintc&#39;&gt;, &lt;class &#39;numpy.int64&#39;&gt;, &lt;class &#39;numpy.void&#39;&gt;, &lt;class &#39;numpy.longdouble&#39;&gt;, &lt;class &#39;numpy.uint32&#39;&gt;, &lt;class &#39;numpy.int16&#39;&gt;, &lt;class &#39;numpy.uint64&#39;&gt;, &lt;class &#39;numpy.intc&#39;&gt;, &lt;class &#39;numpy.int8&#39;&gt;&#125;
</code></pre>
<ul>
<li><strong>自定义数据类型（结构数组）</strong><ul>
<li>通常用来记录一行数据或一些列数据</li>
<li>可以利用array函数把基本库中的序列转化为结构数组</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">goodslist=np.dtype([(<span class="string">&#x27;name&#x27;</span>,np.str_,<span class="number">50</span>),(<span class="string">&#x27;location&#x27;</span>,np.str_,<span class="number">30</span>),(<span class="string">&#x27;price&#x27;</span>,np.float16),(<span class="string">&#x27;volume&#x27;</span>,np.int32)])</span><br><span class="line">goodslist</span><br></pre></td></tr></table></figure>




<pre><code>dtype([(&#39;name&#39;, &#39;&lt;U50&#39;), (&#39;location&#39;, &#39;&lt;U30&#39;), (&#39;price&#39;, &#39;&lt;f2&#39;), (&#39;volume&#39;, &#39;&lt;i4&#39;)])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">goodslist[<span class="string">&#x27;location&#x27;</span>]</span><br></pre></td></tr></table></figure>




<pre><code>dtype(&#39;&lt;U30&#39;)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#定义结构数组</span></span><br><span class="line">goods=np.array([(<span class="string">&#x27;Gree airconditional&#x27;</span>,<span class="string">&#x27;JD.com&#x27;</span>,<span class="number">6464</span>,<span class="number">12</span>),(<span class="string">&#x27;Sony player&#x27;</span>,<span class="string">&#x27;Amazon,com&#x27;</span>,<span class="number">1233</span>,<span class="number">1</span>)], dtype=goodslist)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">goods</span><br></pre></td></tr></table></figure>




<pre><code>array([(&#39;Gree airconditional&#39;, &#39;JD.com&#39;, 6464., 12),
       (&#39;Sony player&#39;, &#39;Amazon,com&#39;, 1233.,  1)],
      dtype=[(&#39;name&#39;, &#39;&lt;U50&#39;), (&#39;location&#39;, &#39;&lt;U30&#39;), (&#39;price&#39;, &#39;&lt;f2&#39;), (&#39;volume&#39;, &#39;&lt;i4&#39;)])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">goods[<span class="string">&#x27;name&#x27;</span>]</span><br></pre></td></tr></table></figure>




<pre><code>array([&#39;Gree airconditional&#39;, &#39;Sony player&#39;], dtype=&#39;&lt;U50&#39;)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">goods[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>




<pre><code>(&#39;Gree airconditional&#39;, &#39;JD.com&#39;, 6464., 12)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span>(goods[<span class="string">&#x27;volume&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>13
</code></pre>
<ul>
<li>可以用使用描述结构类型的各个字段的字典来定义结构数组。该字典有两个键：names和formats，每个键的值是一个列表，names定义字段名称，formats定义字段类型</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">goodsdict=np.dtype(&#123;<span class="string">&#x27;names&#x27;</span>:[<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;location&#x27;</span>,<span class="string">&#x27;price&#x27;</span>,<span class="string">&#x27;volume&#x27;</span>],</span><br><span class="line">                    <span class="string">&#x27;formats&#x27;</span>:[<span class="string">&#x27;S50&#x27;</span>,<span class="string">&#x27;S30&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;i&#x27;</span>]&#125;)</span><br><span class="line">goods_new=np.array([(<span class="string">&#x27;Gree airconditional&#x27;</span>,<span class="string">&#x27;JD.com&#x27;</span>,<span class="number">6464</span>,<span class="number">12</span>),</span><br><span class="line">                    (<span class="string">&#x27;Sony player&#x27;</span>,<span class="string">&#x27;Amazon,com&#x27;</span>,<span class="number">1233</span>,<span class="number">1</span>)],dtype=goodsdict)</span><br><span class="line">goods_new</span><br></pre></td></tr></table></figure>




<pre><code>array([(b&#39;Gree airconditional&#39;, b&#39;JD.com&#39;, 6464., 12),
       (b&#39;Sony player&#39;, b&#39;Amazon,com&#39;, 1233.,  1)],
      dtype=[(&#39;name&#39;, &#39;S50&#39;), (&#39;location&#39;, &#39;S30&#39;), (&#39;price&#39;, &#39;&lt;f4&#39;), (&#39;volume&#39;, &#39;&lt;i4&#39;)])
</code></pre>
<ul>
<li>可以用选定下标来实现数组索引与切片，也可以用”:”来分割起始位置与间隔，用”,”表示不同维度，用”…”表示遍历剩下的维度。一维数组的与list类似：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a=np.arange(<span class="number">1</span>,<span class="number">20</span>,<span class="number">2</span>);a</span><br></pre></td></tr></table></figure>




<pre><code>array([ 1,  3,  5,  7,  9, 11, 13, 15, 17, 19])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a[<span class="number">3</span>]</span><br></pre></td></tr></table></figure>




<pre><code>7
</code></pre>
<ul>
<li>多维数组的索引与切片如下。注意，可以用reshape方法从arange生成多维数组</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b=np.arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>).reshape(<span class="number">12</span>,<span class="number">2</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);b</span><br></pre></td></tr></table></figure>




<pre><code>array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]],

       [[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b[<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>]</span><br></pre></td></tr></table></figure>




<pre><code>22
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b[<span class="number">1</span>,<span class="number">2</span>,:]</span><br></pre></td></tr></table></figure>




<pre><code>array([20, 21, 22, 23])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b[:,<span class="number">1</span>] <span class="comment">#选取各层第二行的数据</span></span><br></pre></td></tr></table></figure>




<pre><code>array([[ 4,  5,  6,  7],
       [16, 17, 18, 19]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b[:,:,<span class="number">1</span>] <span class="comment">#选取各层第二列的数据</span></span><br></pre></td></tr></table></figure>




<pre><code>array([[ 1,  5,  9],
       [13, 17, 21]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b[...,<span class="number">1</span>]  <span class="comment">#多个冒号可以用“...”来代替</span></span><br></pre></td></tr></table></figure>




<pre><code>array([[ 1,  5,  9],
       [13, 17, 21]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b[<span class="number">0</span>,::<span class="number">2</span>,-<span class="number">2</span>] <span class="comment">#间隔选取元素，在第一层中，每隔一行取倒数第二个数</span></span><br></pre></td></tr></table></figure>




<pre><code>array([ 2, 10])
</code></pre>
<ul>
<li><strong>布尔索引（条件索引）</strong>：通过指定布尔数组或条件进行索引</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b[b&gt;=<span class="number">15</span>]</span><br></pre></td></tr></table></figure>




<pre><code>array([15, 16, 17, 18, 19, 20, 21, 22, 23])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b[(b%<span class="number">2</span>==<span class="number">0</span>)&amp;(b&gt;<span class="number">15</span>)] <span class="comment">#注意这里只能用&amp;，逻辑运算符and、or在布尔数组中无效</span></span><br></pre></td></tr></table></figure>




<pre><code>array([16, 18, 20, 22])
</code></pre>
<ul>
<li><ul>
<li>创建一个布尔型数组：</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b_bool1=np.array([<span class="literal">False</span>,<span class="literal">True</span>],dtype=<span class="built_in">bool</span>)</span><br><span class="line">b[b_bool1]  <span class="comment">#貌似只能对维度进行索引</span></span><br></pre></td></tr></table></figure>




<pre><code>array([[[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">b_bool2=np.array([<span class="literal">False</span>,<span class="literal">True</span>,<span class="literal">True</span>],dtype=<span class="built_in">bool</span>)</span><br><span class="line">b_bool3=np.array([<span class="literal">False</span>,<span class="literal">True</span>,<span class="literal">False</span>,<span class="literal">False</span>],dtype=<span class="built_in">bool</span>)</span><br><span class="line">b[b_bool1,b_bool2,b_bool3]</span><br></pre></td></tr></table></figure>




<pre><code>array([17, 21])
</code></pre>
<ul>
<li><strong>花式索引</strong>：即利用整数数组进行索引，或者说使用指定顺序对数组提取子集</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b</span><br></pre></td></tr></table></figure>




<pre><code>array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]],

       [[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b[([<span class="number">0</span>],[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">2</span>,<span class="number">3</span>])]    <span class="comment">#提取第0层第1行第2列、第0层第2行第3列的子集</span></span><br></pre></td></tr></table></figure>




<pre><code>array([ 6, 11])
</code></pre>
<ul>
<li>ix_函数：将若干一维数组转换成一个用于选取矩形区域的索引器</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">b[np.ix_([<span class="number">1</span>,<span class="number">0</span>],[<span class="number">2</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">3</span>,<span class="number">2</span>])]</span><br><span class="line"><span class="comment">#参数个数与数组维度一致，并分别对应各维度</span></span><br><span class="line"><span class="comment">#这句话的意思是[第2层，第1层]，[第3行,第2行],[第1列，第4列，第3列]</span></span><br></pre></td></tr></table></figure>




<pre><code>array([[[20, 23, 22],
        [16, 19, 18]],

       [[ 8, 11, 10],
        [ 4,  7,  6]]])
</code></pre>
<ul>
<li><strong>注意</strong>：数组切片是原始数组的视图（view），即数据不会被复制，而是一种绑定，视图上的任何修改都会被反映到原数组</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b_slice=b[<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>:<span class="number">3</span>];b_slice</span><br></pre></td></tr></table></figure>




<pre><code>array([5, 6])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b_slice[<span class="number">1</span>]=<span class="number">888</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b</span><br></pre></td></tr></table></figure>




<pre><code>array([[[  0,   1,   2,   3],
        [  4,   5, 888,   7],
        [  8,   9,  10,  11]],

       [[ 12,  13,  14,  15],
        [ 16,  17,  18,  19],
        [ 20,  21,  22,  23]]])
</code></pre>
<ul>
<li><ul>
<li>可以用copy方法进行显式复制，复制出来的东西的变化不影响原数组</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b_copy=b[<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>:<span class="number">3</span>].copy();b_copy</span><br></pre></td></tr></table></figure>




<pre><code>array([  5, 888])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b_copy[<span class="number">1</span>]=<span class="number">6</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b</span><br></pre></td></tr></table></figure>




<pre><code>array([[[  0,   1,   2,   3],
        [  4,   5, 888,   7],
        [  8,   9,  10,  11]],

       [[ 12,  13,  14,  15],
        [ 16,  17,  18,  19],
        [ 20,  21,  22,  23]]])
</code></pre>
<ul>
<li>数组排序：sort, lexsort, argsort, ndarray类sort方法，msort</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s=np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">5</span>])</span><br><span class="line">np.sort(s) <span class="comment">#不改变原数组顺序</span></span><br></pre></td></tr></table></figure>




<pre><code>array([1, 2, 2, 2, 2, 3, 4, 5, 5, 6, 6, 8])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.sort()  <span class="comment">#原地排序，改变顺序</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s</span><br></pre></td></tr></table></figure>




<pre><code>array([1, 2, 2, 2, 2, 3, 4, 5, 5, 6, 6, 8])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.argsort(s)  <span class="comment">#返回排序后的下标</span></span><br></pre></td></tr></table></figure>




<pre><code>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11], dtype=int64)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s[np.argsort(-s)]   <span class="comment">#相当于倒序排列</span></span><br></pre></td></tr></table></figure>




<pre><code>array([8, 6, 6, 5, 5, 4, 3, 2, 2, 2, 2, 1])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s=np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">5</span>]).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">s</span><br></pre></td></tr></table></figure>




<pre><code>array([[1, 2, 3, 2],
       [5, 2, 6, 8],
       [2, 4, 6, 5]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s.sort(axis=<span class="number">1</span>) <span class="comment">#按轴排序：每行的元素组成不变，按照从左到右进行排序</span></span><br><span class="line">s</span><br></pre></td></tr></table></figure>




<pre><code>array([[1, 2, 2, 3],
       [2, 5, 6, 8],
       [2, 4, 5, 6]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s.sort(axis=<span class="number">0</span>) <span class="comment">#按轴排序：每列的元素不变，列内按从上到下进行排序</span></span><br><span class="line">s</span><br></pre></td></tr></table></figure>




<pre><code>array([[1, 2, 2, 3],
       [2, 4, 5, 6],
       [2, 5, 6, 8]])
</code></pre>
<ul>
<li><strong>数组维度的改变</strong>：<ul>
<li><strong>展平</strong>：ravel、flatten函数可以降维<ul>
<li>ravel是视图，flatten会请求分配内存来保存结果（copy）</li>
</ul>
</li>
<li><strong>改变维度</strong>：reshape方法改变维数<ul>
<li>二者的区别是resize会直接修改操作数组</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">br=np.ravel(b);br</span><br></pre></td></tr></table></figure>




<pre><code>array([  0,   1,   2,   3,   4,   5, 888,   7,   8,   9,  10,  11,  12,
        13,  14,  15,  16,  17,  18,  19,  20,  21,  22,  23])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">br[<span class="number">5</span>]=<span class="number">222</span>;b</span><br></pre></td></tr></table></figure>




<pre><code>array([[[  0,   1,   2,   3],
        [  4, 222, 888,   7],
        [  8,   9,  10,  11]],

       [[ 12,  13,  14,  15],
        [ 16,  17,  18,  19],
        [ 20,  21,  22,  23]]])
</code></pre>
<ul>
<li><ul>
<li><strong>转置</strong>：T属性</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b.T</span><br></pre></td></tr></table></figure>




<pre><code>array([[[  0,  12],
        [  4,  16],
        [  8,  20]],

       [[  1,  13],
        [222,  17],
        [  9,  21]],

       [[  2,  14],
        [888,  18],
        [ 10,  22]],

       [[  3,  15],
        [  7,  19],
        [ 11,  23]]])
</code></pre>
<ul>
<li><strong>数组的组合</strong><ul>
<li>水平组合、垂直组合、深度组合、列组合、行组合<ul>
<li><strong>水平组合</strong>：所有参加组合的数组拼接起来，各数组行数应该相等（水平拼在一起）</li>
<li><strong>垂直组合</strong>：追加在一起，各数组列数应一致（垂直拼在一起）</li>
<li><strong>深度组合</strong>：将各数组相同位置的数据组合在一起，要求所有数组维度属性相同 →这通常会增加维度</li>
<li>如果数组的size不符合标准会报错</li>
<li><strong>列组合、行组合</strong>：对二维数组，分别与hstack、vstack的效果相同</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a=np.arange(<span class="number">9</span>).reshape(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line">b=np.array([[<span class="number">0</span>,<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]])</span><br><span class="line">np.hstack((a,b))   <span class="comment">#注意，这里是两层括号，外层是调用方法需要的，内层表示元组</span></span><br><span class="line"><span class="comment">#等价于np.concatenate((a,b),axis=1)</span></span><br></pre></td></tr></table></figure>




<pre><code>array([[ 0,  1,  2,  0, 11, 22, 33],
       [ 3,  4,  5,  1,  2,  3,  4],
       [ 6,  7,  8,  2,  3,  4,  5]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">c=np.arange(<span class="number">12</span>).reshape(<span class="number">4</span>,<span class="number">3</span>)</span><br><span class="line">np.vstack((a,c))</span><br><span class="line"><span class="comment">#等价于np.concatenate((a,b),axis=0)</span></span><br></pre></td></tr></table></figure>




<pre><code>array([[ 0,  1,  2],
       [ 3,  4,  5],
       [ 6,  7,  8],
       [ 0,  1,  2],
       [ 3,  4,  5],
       [ 6,  7,  8],
       [ 9, 10, 11]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d=np.delete(b,<span class="number">3</span>,axis=<span class="number">1</span>);d    <span class="comment">#delte函数可以删除指定数据，axis=1表示列，axis=0或空表示行</span></span><br></pre></td></tr></table></figure>




<pre><code>array([[ 0, 11, 22],
       [ 1,  2,  3],
       [ 2,  3,  4]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.dstack((a,d))</span><br></pre></td></tr></table></figure>




<pre><code>array([[[ 0,  0],
        [ 1, 11],
        [ 2, 22]],

       [[ 3,  1],
        [ 4,  2],
        [ 5,  3]],

       [[ 6,  2],
        [ 7,  3],
        [ 8,  4]]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a1=np.arange(<span class="number">4</span>);a2=np.arange(<span class="number">4</span>)*<span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(a1,a2)</span><br></pre></td></tr></table></figure>

<pre><code>[0 1 2 3] [0 2 4 6]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.column_stack((a1,a2))</span><br></pre></td></tr></table></figure>




<pre><code>array([[0, 0],
       [1, 2],
       [2, 4],
       [3, 6]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.row_stack((a1,a2))</span><br></pre></td></tr></table></figure>




<pre><code>array([[0, 1, 2, 3],
       [0, 2, 4, 6]])
</code></pre>
<ul>
<li>数组的分拆：结果是一个由数组作为元素构成的列表<ul>
<li>水平分拆、垂直分拆、深度分拆</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ads=np.arange(<span class="number">12</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">np.dsplit(ads,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>




<pre><code>[array([[[0],
         [3]],
 
        [[6],
         [9]]]),
 array([[[ 1],
         [ 4]],
 
        [[ 7],
         [10]]]),
 array([[[ 2],
         [ 5]],
 
        [[ 8],
         [11]]])]
</code></pre>
<ul>
<li><strong>数组的属性</strong>：<ul>
<li>ndim:给出数组的维数或数组轴的个数</li>
<li>size：给出数组元素总个数</li>
<li>itemsize：数组中的元素在内存中所占字节数</li>
<li>nbytes：整个数组占用的空间，=size×itemsize</li>
<li>T:转置</li>
<li>flat：返回numpy.faltiter, 一个扁平迭代器，可以遍历多维数组中的每一个元素，也可以从迭代器中获取指定数组元素<ul>
<li><strong>注意，flat属性是一个可赋值的属性，可以通过改变flat属性的值来改变原数组的值</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ad=np.arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">ad</span><br></pre></td></tr></table></figure>




<pre><code>array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]],

       [[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ad.T</span><br></pre></td></tr></table></figure>




<pre><code>array([[[ 0, 12],
        [ 4, 16],
        [ 8, 20]],

       [[ 1, 13],
        [ 5, 17],
        [ 9, 21]],

       [[ 2, 14],
        [ 6, 18],
        [10, 22]],

       [[ 3, 15],
        [ 7, 19],
        [11, 23]]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">acf=ad.flat</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> acf:</span><br><span class="line">    <span class="built_in">print</span>(i,end=<span class="string">&#x27; &#x27;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acf[<span class="number">10</span>:<span class="number">12</span>]</span><br></pre></td></tr></table></figure>




<pre><code>array([10, 11])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">acf[<span class="number">10</span>]=<span class="number">100</span></span><br><span class="line">ad</span><br></pre></td></tr></table></figure>




<pre><code>array([[[  0,   1,   2,   3],
        [  4,   5,   6,   7],
        [  8,   9, 100,  11]],

       [[ 12,  13,  14,  15],
        [ 16,  17,  18,  19],
        [ 20,  21,  22,  23]]])
</code></pre>
<ul>
<li>tolist方法：数组转换成列表</li>
<li>astype方法：数组转换成其他类型的数组</li>
<li>array函数：python数据类型转换成数组</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ac=np.arange(<span class="number">12</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">ac.tolist()</span><br></pre></td></tr></table></figure>




<pre><code>[[[0, 1, 2], [3, 4, 5]], [[6, 7, 8], [9, 10, 11]]]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ac.dtype</span><br></pre></td></tr></table></figure>




<pre><code>dtype(&#39;int32&#39;)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aftrans=ac.astype(<span class="string">&#x27;int64&#x27;</span>);aftrans.dtype</span><br></pre></td></tr></table></figure>




<pre><code>dtype(&#39;int64&#39;)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lst=[<span class="number">2021</span>,<span class="number">11</span>,<span class="number">3</span>,<span class="number">19</span>,<span class="number">27</span>]</span><br><span class="line">list_trans=np.array(lst);list_trans</span><br></pre></td></tr></table></figure>




<pre><code>array([2021,   11,    3,   19,   27])
</code></pre>
<ul>
<li><strong>ufunc运算</strong>：universal function，它是一种能对数组中每个元素进行操作的函数，这些函数可以进行四则运算、比较运算以及布尔运算<ul>
<li>可以用**frompyfunc()**来自定义ufunc函数，（func-函数名称，函数接受参数的个数，返回值的个数）</li>
<li>numpy的ufunc函数很多是在C语言级别实现的，比python内置函数运算速度更快</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a1=np.arange(<span class="number">0</span>,<span class="number">10</span>);a1</span><br></pre></td></tr></table></figure>




<pre><code>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a2=np.arange(<span class="number">0</span>,<span class="number">20</span>,<span class="number">2</span>);a2</span><br></pre></td></tr></table></figure>




<pre><code>array([ 0,  2,  4,  6,  8, 10, 12, 14, 16, 18])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a3=np.add(a1,a2,out=a1)    <span class="comment">#out=后面的数组一定要事先定义，一般省略，作用是把函数的运算结果存储到指定的对象中</span></span><br><span class="line">(a3,a1)    </span><br></pre></td></tr></table></figure>




<pre><code>(array([ 0,  3,  6,  9, 12, 15, 18, 21, 24, 27]),
 array([ 0,  3,  6,  9, 12, 15, 18, 21, 24, 27]))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#比较运算与布尔运算</span></span><br><span class="line">b1=np.arange(<span class="number">0</span>,<span class="number">10</span>);b2=np.arange(<span class="number">0</span>,<span class="number">20</span>,<span class="number">2</span>)</span><br><span class="line">b1+=b2</span><br><span class="line"><span class="built_in">print</span>(b1)</span><br><span class="line">(<span class="built_in">any</span>(b1&gt;b2),<span class="built_in">all</span>(b1&gt;b2))</span><br></pre></td></tr></table></figure>

<pre><code>[ 0  3  6  9 12 15 18 21 24 27]





(True, False)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mathc</span>(<span class="params">n</span>):</span></span><br><span class="line">    s=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n+<span class="number">1</span>):</span><br><span class="line">        s.append(i**<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ufmathc</span>(<span class="params">n</span>):</span></span><br><span class="line">    s=np.arange(n+<span class="number">1</span>)**<span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line">%timeit mathc(<span class="number">100</span>)</span><br><span class="line">%timeit ufmathc(<span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<pre><code>85.2 µs ± 565 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
4.44 µs ± 91.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">liftscore</span>(<span class="params">n</span>):</span></span><br><span class="line">    n_new=np.sqrt(n*<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">return</span> n_new</span><br><span class="line"></span><br><span class="line">score = np.array([<span class="number">87</span>,<span class="number">77</span>,<span class="number">56</span>,<span class="number">60</span>,<span class="number">95</span>])</span><br><span class="line"></span><br><span class="line">score_1=np.frompyfunc(liftscore,<span class="number">1</span>,<span class="number">1</span>)(score);score_1</span><br></pre></td></tr></table></figure>




<pre><code>array([93.27379053088815, 87.74964387392122, 74.83314773547883,
       77.45966692414834, 97.46794344808964], dtype=object)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">liftscore(score)</span><br></pre></td></tr></table></figure>




<pre><code>array([93.27379053, 87.74964387, 74.83314774, 77.45966692, 97.46794345])
</code></pre>
<ul>
<li>注意，虽然直接对score调用liftscore也能实现目的，但<strong>返回结果的类型不同</strong>。<ul>
<li>使用frompyfunc返回的值都是<strong>object类型</strong>，而直接调用返回了浮点型</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">score_1.dtype,liftscore(score).dtype</span><br></pre></td></tr></table></figure>




<pre><code>(dtype(&#39;O&#39;), dtype(&#39;float64&#39;))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">score_1=score_1.astype(<span class="built_in">float</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><ul>
<li>使用vectorize可以实现与frompyfunc()类似的功能，但它可以通过otypes参数直接指定返回数组的元素类型</li>
</ul>
</li>
<li><p><strong>广播</strong>：</p>
<ul>
<li>当使用ufunc函数对两个数组进行计算时，会对这两个数组的对应元素进行处理</li>
</ul>
</li>
<li><p>ufunc函数拥有只对两个输入一个输出的ufunc函数有效的方法，例如：</p>
<ul>
<li>reduce方法：与python基本库中的reduce函数类似，沿着axis轴对数组元素进行操作</li>
<li>accumulate方法：返回数组与输入数组形状相同，同时保存中间结果</li>
<li>reduceat方法：可通过indices参数指定对多对reduce的其实和终止位置</li>
</ul>
</li>
<li><p><strong>矩阵</strong>：mat或matrix函数</p>
</li>
<li><p><strong>numpy的文件读写</strong>：</p>
<ul>
<li>通过I/O函数实现</li>
<li>savetxt：将数据存储到文件中，需要指定文件名及要保存的数组</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.savetxt(<span class="string">&#x27;m2.txt&#x27;</span>,a)</span><br></pre></td></tr></table></figure>

<ul>
<li>例：有如下JD的历史股票价格数据：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">stock=np.dtype([(<span class="string">&#x27;name&#x27;</span>,np.str_,<span class="number">2</span>),(<span class="string">&#x27;time&#x27;</span>,np.str_,<span class="number">10</span>),(<span class="string">&#x27;opening_price&#x27;</span>,np.float64),(<span class="string">&#x27;closing_price&#x27;</span>,np.float64),(<span class="string">&#x27;lowest_price&#x27;</span>,np.float64),(<span class="string">&#x27;highest_price&#x27;</span>,np.float64),(<span class="string">&#x27;volume&#x27;</span>,np.int32)])</span><br><span class="line">jd_stock=np.loadtxt(<span class="string">&#x27;C:\For FJY\Believeseike\大三\数据科学的python基础\PPT\JD.csv&#x27;</span>,delimiter=<span class="string">&#x27;,&#x27;</span>,dtype=stock)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jd_stock</span><br></pre></td></tr></table></figure>




<pre><code>array([(&#39;JD&#39;, &#39;08/16/2021&#39;, 68.21, 66.67, 64.8 , 68.22, 12502810),
       (&#39;JD&#39;, &#39;08/13/2021&#39;, 69.95, 69.86, 69.19, 70.49,  5630593),
       (&#39;JD&#39;, &#39;08/12/2021&#39;, 70.36, 70.53, 69.41, 70.96,  5783820), ...,
       (&#39;JD&#39;, &#39;08/19/2016&#39;, 26.15, 25.91, 25.7 , 26.2 , 20549000),
       (&#39;JD&#39;, &#39;08/18/2016&#39;, 25.34, 25.4 , 25.12, 25.52, 10071250),
       (&#39;JD&#39;, &#39;08/17/2016&#39;, 24.9 , 25.39, 24.8 , 25.44, 12083340)],
      dtype=[(&#39;name&#39;, &#39;&lt;U2&#39;), (&#39;time&#39;, &#39;&lt;U10&#39;), (&#39;opening_price&#39;, &#39;&lt;f8&#39;), (&#39;closing_price&#39;, &#39;&lt;f8&#39;), (&#39;lowest_price&#39;, &#39;&lt;f8&#39;), (&#39;highest_price&#39;, &#39;&lt;f8&#39;), (&#39;volume&#39;, &#39;&lt;i4&#39;)])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jd_stock[<span class="string">&#x27;name&#x27;</span>]</span><br></pre></td></tr></table></figure>




<pre><code>array([&#39;JD&#39;, &#39;JD&#39;, &#39;JD&#39;, ..., &#39;JD&#39;, &#39;JD&#39;, &#39;JD&#39;], dtype=&#39;&lt;U2&#39;)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jd_stock[<span class="string">&#x27;highest_price&#x27;</span>]</span><br></pre></td></tr></table></figure>




<pre><code>array([68.22, 70.49, 70.96, ..., 26.2 , 25.52, 25.44])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jd_stock[[<span class="string">&#x27;opening_price&#x27;</span>,<span class="string">&#x27;closing_price&#x27;</span>]]</span><br></pre></td></tr></table></figure>




<pre><code>array([(68.21, 66.67), (69.95, 69.86), (70.36, 70.53), ...,
       (26.15, 25.91), (25.34, 25.4 ), (24.9 , 25.39)],
      dtype=&#123;&#39;names&#39;:[&#39;opening_price&#39;,&#39;closing_price&#39;], &#39;formats&#39;:[&#39;&lt;f8&#39;,&#39;&lt;f8&#39;], &#39;offsets&#39;:[48,56], &#39;itemsize&#39;:84&#125;)
</code></pre>
<h1 id="【10】数据预处理与数据探索-pandas"><a href="#【10】数据预处理与数据探索-pandas" class="headerlink" title="【10】数据预处理与数据探索 - pandas"></a>【10】数据预处理与数据探索 - pandas</h1><ul>
<li>构造在numpy的基础之上，兼具numpy高性能的<strong>数组</strong>计算功能及电子表格和关系型数据灵活的数据处理能力</li>
<li><strong>DataFrame - 最典型的结构化数据</strong><ul>
<li>面向列的二维表结构，含有行标和列标</li>
<li>相比excel、SPSS，panadas处理上千万的数据易如反掌，比SQL表达能力更强，code更少</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br></pre></td></tr></table></figure>

<h2 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s1=pd.Series([<span class="number">100</span>,<span class="number">78</span>,<span class="number">59</span>,<span class="number">63</span>])</span><br><span class="line">s1</span><br></pre></td></tr></table></figure>




<pre><code>0    100
1     78
2     59
3     63
dtype: int64
</code></pre>
<ul>
<li>Series的交互式显示的字符串表示形式是索引在左，值在右<ul>
<li>默认索引0到N-1</li>
<li>可通过values和index属性来获得数组表示和索引对象</li>
<li>索引可以通过赋值直接更改</li>
<li>可以创建一个带索引来确定每一个数据点的series</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s1.values</span><br></pre></td></tr></table></figure>




<pre><code>array([100,  78,  59,  63], dtype=int64)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s1.index</span><br></pre></td></tr></table></figure>




<pre><code>RangeIndex(start=0, stop=4, step=1)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s1.index=[<span class="string">&#x27;NO.1&#x27;</span>,<span class="string">&#x27;NO.2&#x27;</span>,<span class="string">&#x27;NO.3&#x27;</span>,<span class="string">&#x27;NO.4&#x27;</span>]</span><br><span class="line">s1</span><br></pre></td></tr></table></figure>




<pre><code>NO.1    100
NO.2     78
NO.3     59
NO.4     63
dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s2=pd.Series([<span class="number">100</span>,<span class="number">78</span>,<span class="number">59</span>,<span class="number">63</span>],index=[<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;D&#x27;</span>])</span><br><span class="line">s2</span><br></pre></td></tr></table></figure>




<pre><code>A    100
B     78
C     59
D     63
dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s2[[<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;C&#x27;</span>]]    <span class="comment">#注意，要以列表的形式把复合索引组合在一起</span></span><br></pre></td></tr></table></figure>




<pre><code>A    100
C     59
dtype: int64
</code></pre>
<ul>
<li>从字典直接创建Series：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d3=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;zhangsan&#x27;</span>,<span class="string">&#x27;gender&#x27;</span>:<span class="string">&#x27;F&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">22</span>&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s3=pd.Series(d3)</span><br><span class="line">s3</span><br></pre></td></tr></table></figure>




<pre><code>name      zhangsan
gender           F
age             22
dtype: object
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">student=[<span class="string">&#x27;ID&#x27;</span>,<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>,<span class="string">&#x27;gender&#x27;</span>]</span><br><span class="line">s4=pd.Series(d3,index=student)</span><br><span class="line">s4</span><br></pre></td></tr></table></figure>




<pre><code>ID             NaN
name      zhangsan
age             22
gender           F
dtype: object
</code></pre>
<ul>
<li>pandas中的缺失函数被标记为NaN，可以用函数isnull、notnull或者<strong>对象的isnull、notnull方法</strong>来检测缺失值<ul>
<li>建议优先使用方法</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s4.notnull()</span><br></pre></td></tr></table></figure>




<pre><code>ID        False
name       True
age        True
gender     True
dtype: bool
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.isnull(s4)</span><br></pre></td></tr></table></figure>




<pre><code>ID         True
name      False
age       False
gender    False
dtype: bool
</code></pre>
<ul>
<li>Seires重要功能之一：可<strong>自动对齐不同索引</strong>的数据</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s3+s4</span><br></pre></td></tr></table></figure>




<pre><code>ID                     NaN
age                     44
gender                  FF
name      zhangsanzhangsan
dtype: object
</code></pre>
<ul>
<li>Seires对象和它的索引都有一个name属性。（just like大名和绰号）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s4.name=<span class="string">&#x27;Profile&#x27;</span>;s4.index.name=<span class="string">&#x27;Attri&#x27;</span></span><br><span class="line">s4</span><br></pre></td></tr></table></figure>




<pre><code>Attri
ID             NaN
name      zhangsan
age             22
gender           F
Name: Profile, dtype: object
</code></pre>
<ul>
<li>reindex方法，可按指定顺序重新索引<ul>
<li>可以用fill_value为原索引中没有新增索引指定填充内容，此时index必须是单调的</li>
<li>reindex不改变原索引的位置，而是返回一个新的对象</li>
<li>还可以用method：{‘backfill’,’bfill’,’pad’,’ffill’,None}对缺失值填充</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s4.reindex(index=[<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;gender&#x27;</span>,<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;age&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>Attri
name      zhangsan
gender           F
id             NaN
age             22
Name: Profile, dtype: object
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s4.index=[<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;g&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;d&#x27;</span>]</span><br><span class="line">s4</span><br></pre></td></tr></table></figure>




<pre><code>b         NaN
g    zhangsan
a          22
d           F
Name: Profile, dtype: object
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s4=s4.reindex(index=[<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;g&#x27;</span>],fill_value=<span class="number">0</span>)</span><br><span class="line">s4</span><br></pre></td></tr></table></figure>




<pre><code>c      0
a     22
b    NaN
d      F
g      0
Name: Profile, dtype: object
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s4.index=[<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">13</span>]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s4.reindex(<span class="built_in">range</span>(<span class="number">5</span>),method=<span class="string">&#x27;bfill&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>0      0
1      0
2      0
3     22
4    NaN
Name: Profile, dtype: object
</code></pre>
<h2 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h2><ul>
<li>一个dataframe表示一个表格，类似电子表格的数据结构，包含一个经过排序的列表集，每一个都可以有不同的类型值</li>
<li>行和列的索引，可以看作一个series的字典</li>
<li>底层是作为一个或多个二维数组存储的</li>
</ul>
<h3 id="字典构造dataframe"><a href="#字典构造dataframe" class="headerlink" title="字典构造dataframe"></a><strong>字典构造dataframe</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dfdata=&#123;<span class="string">&#x27;name&#x27;</span>:[<span class="string">&#x27;zhang&#x27;</span>,<span class="string">&#x27;li&#x27;</span>,<span class="string">&#x27;wang&#x27;</span>,<span class="string">&#x27;zhou&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;subject&#x27;</span>:[<span class="string">&#x27;literature&#x27;</span>,<span class="string">&#x27;maths&#x27;</span>,<span class="string">&#x27;english&#x27;</span>,<span class="string">&#x27;chemics&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;score&#x27;</span>:[<span class="number">98</span>,<span class="number">75</span>,<span class="number">99</span>,<span class="number">72</span>]&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scoresheet=pd.DataFrame(dfdata)</span><br><span class="line">scoresheet</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
    </tr>
    <tr>
      <th>1</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
    </tr>
    <tr>
      <th>2</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
    </tr>
    <tr>
      <th>3</th>
      <td>zhou</td>
      <td>chemics</td>
      <td>72</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(scoresheet)</span><br></pre></td></tr></table></figure>

<pre><code>    name     subject  score
0  zhang  literature     98
1     li       maths     75
2   wang     english     99
3   zhou     chemics     72
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet.head(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
    </tr>
    <tr>
      <th>1</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
    </tr>
    <tr>
      <th>2</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet.sample(<span class="number">3</span>)    <span class="comment">#随机抽3行，顺序也随机</span></span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3</th>
      <td>zhou</td>
      <td>chemics</td>
      <td>72</td>
    </tr>
    <tr>
      <th>1</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
    </tr>
    <tr>
      <th>0</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>可以使用columns和values分别把列索引和各行观测值提取出来：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet.columns</span><br></pre></td></tr></table></figure>




<pre><code>Index([&#39;name&#39;, &#39;subject&#39;, &#39;score&#39;], dtype=&#39;object&#39;)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet.values</span><br></pre></td></tr></table></figure>




<pre><code>array([[&#39;zhang&#39;, &#39;literature&#39;, 98],
       [&#39;li&#39;, &#39;maths&#39;, 75],
       [&#39;wang&#39;, &#39;english&#39;, 99],
       [&#39;zhou&#39;, &#39;chemics&#39;, 72]], dtype=object)
</code></pre>
<ul>
<li>使用嵌套的字典构造DataFrame，<strong>外部的键是列索引，内部的键被理解为行索引</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dfdata2=&#123;<span class="string">&#x27;name&#x27;</span>:&#123;<span class="number">101</span>:<span class="string">&#x27;zhang&#x27;</span>,<span class="number">102</span>:<span class="string">&#x27;li&#x27;</span>&#125;,<span class="string">&#x27;score&#x27;</span>:&#123;<span class="number">103</span>:<span class="number">96</span>,<span class="number">105</span>:<span class="number">98</span>&#125;&#125;</span><br><span class="line">scoresheet2=pd.DataFrame(dfdata2)</span><br><span class="line">scoresheet2</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>101</th>
      <td>zhang</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>102</th>
      <td>li</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>103</th>
      <td>NaN</td>
      <td>96.0</td>
    </tr>
    <tr>
      <th>105</th>
      <td>NaN</td>
      <td>98.0</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>DataFrame是Series构成的，每列都是一个Series</li>
</ul>
<h3 id="numpy数组构造dataframe"><a href="#numpy数组构造dataframe" class="headerlink" title="numpy数组构造dataframe"></a>numpy数组构造dataframe</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">numframe=np.random.randn(<span class="number">10</span>,<span class="number">5</span>)</span><br><span class="line">numframe</span><br></pre></td></tr></table></figure>




<pre><code>array([[-0.18305964, -1.39820616, -1.37192149,  0.61821723, -0.34239575],
       [ 1.31906653,  0.78477489,  0.69435375, -0.58305207,  0.70246159],
       [-0.21761508, -1.06321183,  1.98224416,  0.46310508,  0.36693894],
       [-0.20716151,  0.70876958,  0.32791649,  0.51025168,  0.3006318 ],
       [-2.29515136, -0.77596363,  1.12202857,  1.07724912,  0.73940057],
       [-0.06363121, -0.9593158 ,  0.38883668,  0.01871606,  0.69120285],
       [-2.49169257, -0.34529974, -1.00724828,  0.68192221, -1.71003138],
       [-0.6041674 , -0.97530728,  0.99344697, -0.08315825, -1.43191534],
       [-0.65121791,  1.93252428,  0.68928913,  0.55844356,  0.8956827 ],
       [-0.29695565, -0.06137712,  1.92613135,  1.37600472, -1.07471109]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">framenum=pd.DataFrame(numframe)</span><br><span class="line">framenum.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.183060</td>
      <td>-1.398206</td>
      <td>-1.371921</td>
      <td>0.618217</td>
      <td>-0.342396</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.319067</td>
      <td>0.784775</td>
      <td>0.694354</td>
      <td>-0.583052</td>
      <td>0.702462</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.217615</td>
      <td>-1.063212</td>
      <td>1.982244</td>
      <td>0.463105</td>
      <td>0.366939</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.207162</td>
      <td>0.708770</td>
      <td>0.327916</td>
      <td>0.510252</td>
      <td>0.300632</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-2.295151</td>
      <td>-0.775964</td>
      <td>1.122029</td>
      <td>1.077249</td>
      <td>0.739401</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">framenum.info()    <span class="comment">#info属性打印数据框的属性信息</span></span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 10 entries, 0 to 9
Data columns (total 5 columns):
 #   Column  Non-Null Count  Dtype  
---  ------  --------------  -----  
 0   0       10 non-null     float64
 1   1       10 non-null     float64
 2   2       10 non-null     float64
 3   3       10 non-null     float64
 4   4       10 non-null     float64
dtypes: float64(5)
memory usage: 528.0 bytes
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jd_stock</span><br></pre></td></tr></table></figure>




<pre><code>array([(&#39;JD&#39;, &#39;08/16/2021&#39;, 68.21, 66.67, 64.8 , 68.22, 12502810),
       (&#39;JD&#39;, &#39;08/13/2021&#39;, 69.95, 69.86, 69.19, 70.49,  5630593),
       (&#39;JD&#39;, &#39;08/12/2021&#39;, 70.36, 70.53, 69.41, 70.96,  5783820), ...,
       (&#39;JD&#39;, &#39;08/19/2016&#39;, 26.15, 25.91, 25.7 , 26.2 , 20549000),
       (&#39;JD&#39;, &#39;08/18/2016&#39;, 25.34, 25.4 , 25.12, 25.52, 10071250),
       (&#39;JD&#39;, &#39;08/17/2016&#39;, 24.9 , 25.39, 24.8 , 25.44, 12083340)],
      dtype=[(&#39;name&#39;, &#39;&lt;U2&#39;), (&#39;time&#39;, &#39;&lt;U10&#39;), (&#39;opening_price&#39;, &#39;&lt;f8&#39;), (&#39;closing_price&#39;, &#39;&lt;f8&#39;), (&#39;lowest_price&#39;, &#39;&lt;f8&#39;), (&#39;highest_price&#39;, &#39;&lt;f8&#39;), (&#39;volume&#39;, &#39;&lt;i4&#39;)])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jd=pd.DataFrame(jd_stock)</span><br><span class="line">jd.tail()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>time</th>
      <th>opening_price</th>
      <th>closing_price</th>
      <th>lowest_price</th>
      <th>highest_price</th>
      <th>volume</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1253</th>
      <td>JD</td>
      <td>08/23/2016</td>
      <td>25.81</td>
      <td>25.94</td>
      <td>25.79</td>
      <td>26.30</td>
      <td>8980175</td>
    </tr>
    <tr>
      <th>1254</th>
      <td>JD</td>
      <td>08/22/2016</td>
      <td>25.95</td>
      <td>25.77</td>
      <td>25.52</td>
      <td>25.99</td>
      <td>7809738</td>
    </tr>
    <tr>
      <th>1255</th>
      <td>JD</td>
      <td>08/19/2016</td>
      <td>26.15</td>
      <td>25.91</td>
      <td>25.70</td>
      <td>26.20</td>
      <td>20549000</td>
    </tr>
    <tr>
      <th>1256</th>
      <td>JD</td>
      <td>08/18/2016</td>
      <td>25.34</td>
      <td>25.40</td>
      <td>25.12</td>
      <td>25.52</td>
      <td>10071250</td>
    </tr>
    <tr>
      <th>1257</th>
      <td>JD</td>
      <td>08/17/2016</td>
      <td>24.90</td>
      <td>25.39</td>
      <td>24.80</td>
      <td>25.44</td>
      <td>12083340</td>
    </tr>
  </tbody>
</table>
</div>



<h3 id="直接读入csv文件或excel文件，构造DataFrame"><a href="#直接读入csv文件或excel文件，构造DataFrame" class="headerlink" title="直接读入csv文件或excel文件，构造DataFrame"></a>直接读入csv文件或excel文件，构造DataFrame</h3><ul>
<li>pandas可用read_csv读入本地或web的csv文件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jddf=pd.read_csv(<span class="string">&#x27;C:\For FJY\Believeseike\大三\数据科学的python基础\PPT\JD.csv&#x27;</span>,</span><br><span class="line">                 header=<span class="literal">None</span>, </span><br><span class="line">                 names=[<span class="string">&#x27;names&#x27;</span>,<span class="string">&#x27;time&#x27;</span>,<span class="string">&#x27;opening_price&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;low&#x27;</span>,<span class="string">&#x27;high&#x27;</span>,<span class="string">&#x27;v&#x27;</span>])</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddf.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>names</th>
      <th>time</th>
      <th>opening_price</th>
      <th>c</th>
      <th>low</th>
      <th>high</th>
      <th>v</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>JD</td>
      <td>08/16/2021</td>
      <td>68.21</td>
      <td>66.67</td>
      <td>64.80</td>
      <td>68.22</td>
      <td>12502810</td>
    </tr>
    <tr>
      <th>1</th>
      <td>JD</td>
      <td>08/13/2021</td>
      <td>69.95</td>
      <td>69.86</td>
      <td>69.19</td>
      <td>70.49</td>
      <td>5630593</td>
    </tr>
    <tr>
      <th>2</th>
      <td>JD</td>
      <td>08/12/2021</td>
      <td>70.36</td>
      <td>70.53</td>
      <td>69.41</td>
      <td>70.96</td>
      <td>5783820</td>
    </tr>
    <tr>
      <th>3</th>
      <td>JD</td>
      <td>08/11/2021</td>
      <td>72.54</td>
      <td>71.07</td>
      <td>70.81</td>
      <td>72.70</td>
      <td>5674238</td>
    </tr>
    <tr>
      <th>4</th>
      <td>JD</td>
      <td>08/10/2021</td>
      <td>72.80</td>
      <td>71.76</td>
      <td>71.52</td>
      <td>73.49</td>
      <td>5195324</td>
    </tr>
  </tbody>
</table>
</div>



<h3 id="其他数据构造方式"><a href="#其他数据构造方式" class="headerlink" title="其他数据构造方式"></a>其他数据构造方式</h3><ul>
<li>read_table可读取具有分隔符的一般文件，其他广泛应用的包括：<ul>
<li>read_sql读取SQL、MySQL，</li>
<li>read_sas读入SAS的xpt数据集，</li>
<li>read_stata读入STATA，</li>
<li>read_json读入json数据，</li>
<li>read_html读入网页中的表，</li>
<li>read_clipboard读入剪贴板中的数据内容</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddf2=pd.read_table(<span class="string">&#x27;JD.csv&#x27;</span>,sep=<span class="string">&#x27;,&#x27;</span>,header=<span class="literal">None</span>.names=...)</span><br></pre></td></tr></table></figure>

<ul>
<li>有时候，DataFrame中可能就有一列数据本身作为DataFrame的索引，比如上表中的time列。这时可以利用set_index方法将其设置为DataFrame的行索引</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jddf3=jddf.set_index(jddf[<span class="string">&#x27;time&#x27;</span>])</span><br><span class="line">jddf3.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>names</th>
      <th>time</th>
      <th>opening_price</th>
      <th>c</th>
      <th>low</th>
      <th>high</th>
      <th>v</th>
    </tr>
    <tr>
      <th>time</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>08/16/2021</th>
      <td>JD</td>
      <td>08/16/2021</td>
      <td>68.21</td>
      <td>66.67</td>
      <td>64.80</td>
      <td>68.22</td>
      <td>12502810</td>
    </tr>
    <tr>
      <th>08/13/2021</th>
      <td>JD</td>
      <td>08/13/2021</td>
      <td>69.95</td>
      <td>69.86</td>
      <td>69.19</td>
      <td>70.49</td>
      <td>5630593</td>
    </tr>
    <tr>
      <th>08/12/2021</th>
      <td>JD</td>
      <td>08/12/2021</td>
      <td>70.36</td>
      <td>70.53</td>
      <td>69.41</td>
      <td>70.96</td>
      <td>5783820</td>
    </tr>
    <tr>
      <th>08/11/2021</th>
      <td>JD</td>
      <td>08/11/2021</td>
      <td>72.54</td>
      <td>71.07</td>
      <td>70.81</td>
      <td>72.70</td>
      <td>5674238</td>
    </tr>
    <tr>
      <th>08/10/2021</th>
      <td>JD</td>
      <td>08/10/2021</td>
      <td>72.80</td>
      <td>71.76</td>
      <td>71.52</td>
      <td>73.49</td>
      <td>5195324</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span>(jddf[<span class="string">&#x27;time&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>pandas.core.series.Series
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span>(jddf3[<span class="string">&#x27;time&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>pandas.core.series.Series
</code></pre>
<h2 id="数据输出"><a href="#数据输出" class="headerlink" title="数据输出"></a>数据输出</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddf.to_csv(<span class="string">&#x27;jdstock.csv&#x27;</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddf.to_excel(<span class="string">&#x27;jdstock.xlsx&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="attachment:image.png" alt="image.png"></p>
<ul>
<li>调整变量（列）的顺序</li>
<li>reindex指定columns</li>
</ul>
<h2 id="提取数据子集（切片）"><a href="#提取数据子集（切片）" class="headerlink" title="提取数据子集（切片）"></a>提取数据子集（切片）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span>(scoresheet.subject)</span><br></pre></td></tr></table></figure>




<pre><code>pandas.core.series.Series
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet[[<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;score&#x27;</span>]]  <span class="comment">#注意这里需要用两个方括号，组合起来</span></span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>zhang</td>
      <td>98</td>
    </tr>
    <tr>
      <th>1</th>
      <td>li</td>
      <td>75</td>
    </tr>
    <tr>
      <th>2</th>
      <td>wang</td>
      <td>99</td>
    </tr>
    <tr>
      <th>3</th>
      <td>zhou</td>
      <td>72</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet[:<span class="number">3</span>] <span class="comment">#【注意】：当用非整数进行冒号切片时，上界包括在内；但整数的上界不包括在内</span></span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
    </tr>
    <tr>
      <th>1</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
    </tr>
    <tr>
      <th>2</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scoresheet.reindex([<span class="string">&#x27;no.1&#x27;</span>,<span class="string">&#x27;no.2&#x27;</span>,<span class="string">&#x27;no.3&#x27;</span>,<span class="string">&#x27;no.4&#x27;</span>],columns=[<span class="string">&#x27;Name&#x27;</span>,<span class="string">&#x27;Subject&#x27;</span>,<span class="string">&#x27;Score&#x27;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Subject</th>
      <th>Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>no.2</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>no.4</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>提取不连续的行和列，可以用<strong>loc、iloc索引</strong>来实现：<ul>
<li>iloc - index location，利用索引号索引</li>
<li>loc - 利用索引名称来索引</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet.iloc[[<span class="number">1</span>,<span class="number">3</span>],[<span class="number">0</span>,<span class="number">2</span>]]  <span class="comment">#iloc是用索引号进行索引,表示第2、4行，第1、3列</span></span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.2</th>
      <td>li</td>
      <td>75</td>
    </tr>
    <tr>
      <th>no.4</th>
      <td>zhou</td>
      <td>72</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet.loc[[<span class="string">&#x27;no.1&#x27;</span>,<span class="string">&#x27;no.4&#x27;</span>],[<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;score&#x27;</span>]]</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>98</td>
    </tr>
    <tr>
      <th>no.4</th>
      <td>zhou</td>
      <td>72</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>逻辑索引/切片：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet[(scoresheet.score&gt;<span class="number">80</span>) &amp; (scoresheet.score&lt;=<span class="number">100</span>)]</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet[[<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;subject&#x27;</span>]][(scoresheet.score&gt;<span class="number">80</span>)]</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>literature</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>wang</td>
      <td>english</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="删除-修改行列数据"><a href="#删除-修改行列数据" class="headerlink" title="删除/修改行列数据"></a>删除/修改行列数据</h2><ul>
<li>可以通过直接赋值的方式，来修改或添加新的行列数据</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scoresheet[<span class="string">&#x27;homeword&#x27;</span>]=<span class="number">90</span></span><br><span class="line">scoresheet</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
      <th>homeword</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
      <td>90</td>
    </tr>
    <tr>
      <th>no.2</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
      <td>90</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
      <td>90</td>
    </tr>
    <tr>
      <th>no.4</th>
      <td>zhou</td>
      <td>chemics</td>
      <td>72</td>
      <td>90</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>对<strong>列名称/变量名称的修改</strong>，可通过rename方法进行：<ul>
<li>如果缺少<em>inplace=True</em>，则默认为添加而不是修改</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scoresheet.rename(columns=&#123;<span class="string">&#x27;homeword&#x27;</span>:<span class="string">&#x27;homework&#x27;</span>&#125;,inplace=<span class="literal">True</span>)</span><br><span class="line">scoresheet</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
      <th>homework</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
      <td>90</td>
    </tr>
    <tr>
      <th>no.2</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
      <td>90</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
      <td>90</td>
    </tr>
    <tr>
      <th>no.4</th>
      <td>zhou</td>
      <td>chemics</td>
      <td>72</td>
      <td>90</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scoresheet[<span class="string">&#x27;ID&#x27;</span>]=np.arange(<span class="number">4</span>)</span><br><span class="line">scoresheet</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
      <th>homework</th>
      <th>ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
      <td>90</td>
      <td>0</td>
    </tr>
    <tr>
      <th>no.2</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
      <td>90</td>
      <td>1</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
      <td>90</td>
      <td>2</td>
    </tr>
    <tr>
      <th>no.4</th>
      <td>zhou</td>
      <td>chemics</td>
      <td>72</td>
      <td>90</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>更多的情况下是对部分数据进行插补或者修改。这种情况可以使用Series来赋值，它会替代在DataFrame中精确匹配的索引的值，如果没有匹配的索引则赋值为缺失值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fixed=pd.Series([<span class="number">97</span>,<span class="number">76</span>,<span class="number">83</span>],index=[<span class="string">&#x27;no.1&#x27;</span>,<span class="string">&#x27;no.3&#x27;</span>,<span class="string">&#x27;no.4&#x27;</span>])</span><br><span class="line">scoresheet[<span class="string">&#x27;homework&#x27;</span>]=fixed</span><br><span class="line">scoresheet</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
      <th>homework</th>
      <th>ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
      <td>97.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>no.2</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
      <td>NaN</td>
      <td>1</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
      <td>76.0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>no.4</th>
      <td>zhou</td>
      <td>chemics</td>
      <td>72</td>
      <td>83.0</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fixed2=pd.Series([<span class="number">99</span>],index=[<span class="string">&#x27;no.2&#x27;</span>])</span><br><span class="line">scoresheet[<span class="string">&#x27;homework&#x27;</span>]=fixed2</span><br><span class="line">scoresheet</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
      <th>homework</th>
      <th>ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
      <td>NaN</td>
      <td>0</td>
    </tr>
    <tr>
      <th>no.2</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
      <td>99.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
      <td>NaN</td>
      <td>2</td>
    </tr>
    <tr>
      <th>no.4</th>
      <td>zhou</td>
      <td>chemics</td>
      <td>72</td>
      <td>NaN</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
      <th>homework</th>
      <th>ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
      <td>NaN</td>
      <td>0</td>
    </tr>
    <tr>
      <th>no.2</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
      <td>99.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
      <td>NaN</td>
      <td>2</td>
    </tr>
    <tr>
      <th>no.4</th>
      <td>zhou</td>
      <td>chemics</td>
      <td>72</td>
      <td>NaN</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet.drop(<span class="string">&#x27;no.4&#x27;</span>,axis=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
      <th>homework</th>
      <th>ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
      <td>NaN</td>
      <td>0</td>
    </tr>
    <tr>
      <th>no.2</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
      <td>99.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
      <td>NaN</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li><p>对不需要使用的列，可以通过del删除</p>
</li>
<li><p>对指定的行或列，可以用drop删除</p>
</li>
<li><p>注意，凡是对原数组做出修改并返回一个新数组的，往往有一个<strong>inplace可选参数</strong>。如果手动设置为True，则原数组会被替换；默认为False，原数组对应的内存值不变，需要将新结果赋给一个新的数组或覆盖原数组的位置</p>
</li>
</ul>
<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><ul>
<li>sort_index方法可对行或列索引进行排序，返回一个已排序的新对象<ul>
<li><strong>默认升序排列</strong>，可以指定ascending=False进行降序排列</li>
<li>NaN总是被放在末尾</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssort=pd.Series(<span class="built_in">range</span>(<span class="number">5</span>),index=[<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;c&#x27;</span>])</span><br><span class="line">ssort.sort_index()</span><br></pre></td></tr></table></figure>




<pre><code>a    3
b    0
c    4
d    1
e    2
dtype: int64
</code></pre>
<ul>
<li>对于dataframe，可以通过sort_index(axis=0/1）根据任意一个轴上的索引进行排序<ul>
<li><strong>axis=0 按行排序</strong>：行的相对位置变化，对行进行处理</li>
<li><strong>axis=1 按列排序</strong></li>
<li>默认按行处理</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
      <th>homework</th>
      <th>ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
      <td>97.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>no.2</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
      <td>NaN</td>
      <td>1</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
      <td>76.0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>no.4</th>
      <td>zhou</td>
      <td>chemics</td>
      <td>72</td>
      <td>83.0</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scoresheet2=scoresheet.sort_index()</span><br><span class="line">scoresheet2</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
      <th>homework</th>
      <th>ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
      <td>97.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>no.2</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
      <td>NaN</td>
      <td>1</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
      <td>76.0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>no.4</th>
      <td>zhou</td>
      <td>chemics</td>
      <td>72</td>
      <td>83.0</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet2.sort_index(axis=<span class="number">0</span>,ascending=<span class="literal">False</span>)   <span class="comment">#axis=0按行排序，意思是行的位置变化</span></span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
      <th>homework</th>
      <th>ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.4</th>
      <td>zhou</td>
      <td>chemics</td>
      <td>72</td>
      <td>83.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
      <td>76.0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>no.2</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
      <td>NaN</td>
      <td>1</td>
    </tr>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
      <td>97.0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet2.sort_index(axis=<span class="number">1</span>,ascending=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>homework</th>
      <th>name</th>
      <th>score</th>
      <th>subject</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>0</td>
      <td>97.0</td>
      <td>zhang</td>
      <td>98</td>
      <td>literature</td>
    </tr>
    <tr>
      <th>no.2</th>
      <td>1</td>
      <td>NaN</td>
      <td>li</td>
      <td>75</td>
      <td>maths</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>2</td>
      <td>76.0</td>
      <td>wang</td>
      <td>99</td>
      <td>english</td>
    </tr>
    <tr>
      <th>no.4</th>
      <td>3</td>
      <td>83.0</td>
      <td>zhou</td>
      <td>72</td>
      <td>chemics</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>应用最多的是利用<strong>sort_values</strong>的by选项，指定dataframe的某一些列进行排序：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoresheet2.sort_values(by=<span class="string">&#x27;homework&#x27;</span>,ascending=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>subject</th>
      <th>score</th>
      <th>homework</th>
      <th>ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no.1</th>
      <td>zhang</td>
      <td>literature</td>
      <td>98</td>
      <td>97.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>no.4</th>
      <td>zhou</td>
      <td>chemics</td>
      <td>72</td>
      <td>83.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>no.3</th>
      <td>wang</td>
      <td>english</td>
      <td>99</td>
      <td>76.0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>no.2</th>
      <td>li</td>
      <td>maths</td>
      <td>75</td>
      <td>NaN</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="排名"><a href="#排名" class="headerlink" title="排名"></a>排名</h2><ul>
<li>ranking，返回位置，从1开始一直到数据中有效数据的数量</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rrank=pd.Series([<span class="number">10</span>,<span class="number">9</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">1</span>])</span><br><span class="line">rrank.rank()</span><br></pre></td></tr></table></figure>




<pre><code>0    7.0
1    5.5
2    3.5
3    2.0
4    3.5
5    5.5
6    1.0
dtype: float64
</code></pre>
<ul>
<li>当有多个数据值一样的时候，会出现相同排名，这时候可以用rank方法的method参数来处理：<ul>
<li>average：默认选项，在相同排名中，为各个值平均分配</li>
<li>min：使用整个相同排名的最小排名</li>
<li>max：使用整个相同排名的最大排名</li>
<li>first：按照在原始数据中出现顺序进行排名</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rrank.rank(method=<span class="string">&#x27;first&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>0    7.0
1    5.0
2    3.0
3    2.0
4    4.0
5    6.0
6    1.0
dtype: float64
</code></pre>
<h2 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h2><ul>
<li>对不同索引的对象进行算术运算，运算时会按照索引自动对齐。</li>
<li>如果存在不同索引，结果就是所有索引的并集，对应不同索引的值标记为NaN，也就是只有索引的交集会相加，不是交集的都是缺失值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cs1=pd.Series([<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>],index=[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>])</span><br><span class="line">cs2=pd.Series([<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">200</span>],index=[<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;g&#x27;</span>,<span class="string">&#x27;h&#x27;</span>,<span class="string">&#x27;z&#x27;</span>])</span><br><span class="line">cs1+cs2</span><br></pre></td></tr></table></figure>




<pre><code>a    21.0
c    15.0
d     NaN
e     NaN
f    35.0
g     NaN
h     NaN
z     NaN
dtype: float64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cdf1=pd.DataFrame(np.arange(<span class="number">10</span>).reshape((<span class="number">2</span>,<span class="number">5</span>)),columns=<span class="built_in">list</span>(<span class="string">&#x27;bcaed&#x27;</span>))</span><br><span class="line">cdf1</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>b</th>
      <th>c</th>
      <th>a</th>
      <th>e</th>
      <th>d</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>1</td>
      <td>2</td>
      <td>3</td>
      <td>4</td>
    </tr>
    <tr>
      <th>1</th>
      <td>5</td>
      <td>6</td>
      <td>7</td>
      <td>8</td>
      <td>9</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cdf2=pd.DataFrame(np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>),columns=<span class="built_in">list</span>(<span class="string">&#x27;abcd&#x27;</span>))</span><br><span class="line">cdf2</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>1</td>
      <td>2</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>4</td>
      <td>5</td>
      <td>6</td>
      <td>7</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8</td>
      <td>9</td>
      <td>10</td>
      <td>11</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cdf1+cdf2</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
      <th>e</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2.0</td>
      <td>1.0</td>
      <td>3.0</td>
      <td>7.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11.0</td>
      <td>10.0</td>
      <td>12.0</td>
      <td>16.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>可通过add、sub、div、mul等方法，将其他dataframe的值传入指定对象<ul>
<li>fill_value这个参数让我们能够对缺失值进行控制</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cdf1.add(cdf2,fill_value=<span class="number">0</span>) <span class="comment">#同时没有的仍然是NaN，并集而非交集的把缺失值填补为0参与运算</span></span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
      <th>e</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2.0</td>
      <td>1.0</td>
      <td>3.0</td>
      <td>7.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11.0</td>
      <td>10.0</td>
      <td>12.0</td>
      <td>16.0</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8.0</td>
      <td>9.0</td>
      <td>10.0</td>
      <td>11.0</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cdf2.add(cdf1,fill_value=<span class="number">100</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
      <th>e</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2.0</td>
      <td>1.0</td>
      <td>3.0</td>
      <td>7.0</td>
      <td>103.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11.0</td>
      <td>10.0</td>
      <td>12.0</td>
      <td>16.0</td>
      <td>108.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>108.0</td>
      <td>109.0</td>
      <td>110.0</td>
      <td>111.0</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="函数的应用与映射"><a href="#函数的应用与映射" class="headerlink" title="函数的应用与映射"></a>函数的应用与映射</h2><ul>
<li>ufunc也可以用于操作pandas对象，可以应用到series的每一个元素中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">reversef=<span class="keyword">lambda</span> x:-x</span><br><span class="line">reversef(cs2)</span><br><span class="line"><span class="comment">#注意，这里函数的应用范围是每个元素</span></span><br></pre></td></tr></table></figure>




<pre><code>c    -10
a    -20
f    -30
g    -50
h   -100
z   -200
dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rangef=<span class="keyword">lambda</span> x:x.<span class="built_in">max</span>()-x.<span class="built_in">min</span>()</span><br><span class="line">rangef(cs2)</span><br><span class="line"><span class="comment">#注意，这里rangef应用的范围变成了整个series，因为max和min是集合操作</span></span><br></pre></td></tr></table></figure>




<pre><code>190
</code></pre>
<ul>
<li>DataFrame的apply方法可以把函数应用到各行各列上</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rangef(cdf1.add(cdf2,fill_value=<span class="number">0</span>))  <span class="comment">#默认对列使用</span></span><br></pre></td></tr></table></figure>




<pre><code>a    9.0
b    9.0
c    9.0
d    9.0
e    5.0
dtype: float64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(cdf1.add(cdf2,fill_value=<span class="number">0</span>)).apply(rangef,axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>




<pre><code>0    6.0
1    8.0
2    3.0
dtype: float64
</code></pre>
<ul>
<li>applymap方法，可格式化各个元素<ul>
<li>【注意】apply是应用到每行/列中，而applymap是应用到每个元素上</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sta</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> pd.Series([x.<span class="built_in">max</span>(),x.<span class="built_in">min</span>(),x.<span class="built_in">max</span>()-x.<span class="built_in">min</span>(),x.count()],</span><br><span class="line">                     index=[<span class="string">&#x27;max&#x27;</span>,<span class="string">&#x27;min&#x27;</span>,<span class="string">&#x27;range&#x27;</span>,<span class="string">&#x27;count&#x27;</span>])</span><br><span class="line"></span><br><span class="line">outformat=<span class="keyword">lambda</span> x:<span class="string">&#x27;%.2f&#x27;</span>%x</span><br><span class="line">((cdf1.add(cdf2,fill_value=<span class="number">0</span>)).apply(sta)).applymap(outformat)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
      <th>e</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>max</th>
      <td>11.00</td>
      <td>10.00</td>
      <td>12.00</td>
      <td>16.00</td>
      <td>8.00</td>
    </tr>
    <tr>
      <th>min</th>
      <td>2.00</td>
      <td>1.00</td>
      <td>3.00</td>
      <td>7.00</td>
      <td>3.00</td>
    </tr>
    <tr>
      <th>range</th>
      <td>9.00</td>
      <td>9.00</td>
      <td>9.00</td>
      <td>9.00</td>
      <td>5.00</td>
    </tr>
    <tr>
      <th>count</th>
      <td>3.00</td>
      <td>3.00</td>
      <td>3.00</td>
      <td>3.00</td>
      <td>2.00</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>apply、applymap、map的区别如下：<ul>
<li>apply（）操作对象是DataFrame的一列或一行数据</li>
<li>applymap（）是element-wise，作用于每个元素</li>
<li>map（）也是element-wise，对Series中的每个数据调用一次函数</li>
</ul>
</li>
</ul>
<h2 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h2><ul>
<li>pandas可用<strong>groupby对数据进行分组分析</strong><ul>
<li>经过groupby处理之后，就可以分组数据分析了</li>
<li>例如对JD分组，按照开盘价和收盘价进行定性：</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jddf.rename(columns=&#123;<span class="string">&#x27;c&#x27;</span>:<span class="string">&#x27;closing_price&#x27;</span>,<span class="string">&#x27;v&#x27;</span>:<span class="string">&#x27;volume&#x27;</span>&#125;,inplace=<span class="literal">True</span>)</span><br><span class="line">jddf[<span class="string">&#x27;market&#x27;</span>]=<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x:<span class="string">&#x27;Good&#x27;</span> <span class="keyword">if</span> x&gt;<span class="number">0</span> <span class="keyword">else</span> (<span class="string">&#x27;Bad&#x27;</span> <span class="keyword">if</span> x&lt;<span class="number">0</span> <span class="keyword">else</span> <span class="string">&#x27;OK&#x27;</span>),</span><br><span class="line">                        jddf[<span class="string">&#x27;closing_price&#x27;</span>]-jddf[<span class="string">&#x27;opening_price&#x27;</span>]))</span><br><span class="line">jddf.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>names</th>
      <th>time</th>
      <th>opening_price</th>
      <th>closing_price</th>
      <th>low</th>
      <th>high</th>
      <th>volume</th>
      <th>market</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>JD</td>
      <td>08/16/2021</td>
      <td>68.21</td>
      <td>66.67</td>
      <td>64.80</td>
      <td>68.22</td>
      <td>12502810</td>
      <td>Bad</td>
    </tr>
    <tr>
      <th>1</th>
      <td>JD</td>
      <td>08/13/2021</td>
      <td>69.95</td>
      <td>69.86</td>
      <td>69.19</td>
      <td>70.49</td>
      <td>5630593</td>
      <td>Bad</td>
    </tr>
    <tr>
      <th>2</th>
      <td>JD</td>
      <td>08/12/2021</td>
      <td>70.36</td>
      <td>70.53</td>
      <td>69.41</td>
      <td>70.96</td>
      <td>5783820</td>
      <td>Good</td>
    </tr>
    <tr>
      <th>3</th>
      <td>JD</td>
      <td>08/11/2021</td>
      <td>72.54</td>
      <td>71.07</td>
      <td>70.81</td>
      <td>72.70</td>
      <td>5674238</td>
      <td>Bad</td>
    </tr>
    <tr>
      <th>4</th>
      <td>JD</td>
      <td>08/10/2021</td>
      <td>72.80</td>
      <td>71.76</td>
      <td>71.52</td>
      <td>73.49</td>
      <td>5195324</td>
      <td>Bad</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jddfgroup=jddf.groupby(jddf[<span class="string">&#x27;market&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(jddfgroup)</span><br></pre></td></tr></table></figure>

<pre><code>&lt;pandas.core.groupby.generic.DataFrameGroupBy object at 0x0000029174D973A0&gt;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddfgroup.describe()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead tr th &#123;
    text-align: left;
&#125;

.dataframe thead tr:last-of-type th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="8" halign="left">opening_price</th>
      <th colspan="2" halign="left">closing_price</th>
      <th>...</th>
      <th colspan="2" halign="left">high</th>
      <th colspan="8" halign="left">volume</th>
    </tr>
    <tr>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
      <th>count</th>
      <th>mean</th>
      <th>...</th>
      <th>75%</th>
      <th>max</th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
    <tr>
      <th>market</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Bad</th>
      <td>671.0</td>
      <td>45.214098</td>
      <td>20.735133</td>
      <td>19.86</td>
      <td>29.81</td>
      <td>39.480</td>
      <td>52.9750</td>
      <td>106.58</td>
      <td>671.0</td>
      <td>44.540537</td>
      <td>...</td>
      <td>53.40</td>
      <td>107.67</td>
      <td>671.0</td>
      <td>1.336463e+07</td>
      <td>7.809882e+06</td>
      <td>2865924.0</td>
      <td>8454971.5</td>
      <td>11699350.0</td>
      <td>16059490.0</td>
      <td>82402400.0</td>
    </tr>
    <tr>
      <th>Good</th>
      <td>574.0</td>
      <td>44.068641</td>
      <td>20.529868</td>
      <td>19.76</td>
      <td>28.85</td>
      <td>38.025</td>
      <td>51.0125</td>
      <td>106.64</td>
      <td>574.0</td>
      <td>44.774251</td>
      <td>...</td>
      <td>53.50</td>
      <td>108.29</td>
      <td>574.0</td>
      <td>1.349781e+07</td>
      <td>7.159630e+06</td>
      <td>3106833.0</td>
      <td>8911734.0</td>
      <td>11711280.0</td>
      <td>16447140.0</td>
      <td>49463160.0</td>
    </tr>
    <tr>
      <th>OK</th>
      <td>13.0</td>
      <td>33.626923</td>
      <td>6.941729</td>
      <td>22.25</td>
      <td>29.52</td>
      <td>33.230</td>
      <td>39.0100</td>
      <td>45.71</td>
      <td>13.0</td>
      <td>33.626923</td>
      <td>...</td>
      <td>39.18</td>
      <td>46.13</td>
      <td>13.0</td>
      <td>1.121168e+07</td>
      <td>4.118075e+06</td>
      <td>5542540.0</td>
      <td>9370850.0</td>
      <td>11145090.0</td>
      <td>12290010.0</td>
      <td>18686200.0</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 40 columns</p>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddfgroup[<span class="string">&#x27;opening_price&#x27;</span>].describe()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
    <tr>
      <th>market</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Bad</th>
      <td>671.0</td>
      <td>45.214098</td>
      <td>20.735133</td>
      <td>19.86</td>
      <td>29.81</td>
      <td>39.480</td>
      <td>52.9750</td>
      <td>106.58</td>
    </tr>
    <tr>
      <th>Good</th>
      <td>574.0</td>
      <td>44.068641</td>
      <td>20.529868</td>
      <td>19.76</td>
      <td>28.85</td>
      <td>38.025</td>
      <td>51.0125</td>
      <td>106.64</td>
    </tr>
    <tr>
      <th>OK</th>
      <td>13.0</td>
      <td>33.626923</td>
      <td>6.941729</td>
      <td>22.25</td>
      <td>29.52</td>
      <td>33.230</td>
      <td>39.0100</td>
      <td>45.71</td>
    </tr>
  </tbody>
</table>
</div>



<h3 id="数据合并"><a href="#数据合并" class="headerlink" title="数据合并"></a>数据合并</h3><p>不讲了</p>
<h2 id="分类数据"><a href="#分类数据" class="headerlink" title="分类数据"></a>分类数据</h2><ul>
<li>比如，性别是一个分类数据，但我们存储数据的时候不会是男女，而是0或者1，节省空间，效率高。这时候我们应该把数值或简写存储的数据变成分类数据，告诉大家是什么</li>
<li>这是Categorical类型的数据，以实现值标签（value label）功能，便于分析结果的展示<ul>
<li>astype方法可将原始数据转化为category类型，利用cat.categories为数据值挂上标签</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">students=pd.DataFrame(&#123;<span class="string">&#x27;name&#x27;</span>:[<span class="string">&#x27;jackie&#x27;</span>,<span class="string">&#x27;bob&#x27;</span>,<span class="string">&#x27;jessy&#x27;</span>,<span class="string">&#x27;alice&#x27;</span>],</span><br><span class="line">                       <span class="string">&#x27;gender&#x27;</span>:[<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>],<span class="string">&#x27;blood&#x27;</span>:[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;ab&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;b&#x27;</span>],</span><br><span class="line">                      <span class="string">&#x27;height&#x27;</span>:[<span class="number">172</span>,<span class="number">190</span>,<span class="number">160</span>,<span class="number">150</span>]&#125;)</span><br><span class="line">students</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>gender</th>
      <th>blood</th>
      <th>height</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>jackie</td>
      <td>1</td>
      <td>a</td>
      <td>172</td>
    </tr>
    <tr>
      <th>1</th>
      <td>bob</td>
      <td>0</td>
      <td>ab</td>
      <td>190</td>
    </tr>
    <tr>
      <th>2</th>
      <td>jessy</td>
      <td>1</td>
      <td>o</td>
      <td>160</td>
    </tr>
    <tr>
      <th>3</th>
      <td>alice</td>
      <td>2</td>
      <td>b</td>
      <td>150</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">students[<span class="string">&#x27;gender_value&#x27;</span>]=students[<span class="string">&#x27;gender&#x27;</span>].astype(<span class="string">&#x27;category&#x27;</span>)</span><br><span class="line">students[<span class="string">&#x27;gender_value&#x27;</span>].cat.categories=[<span class="string">&#x27;Female&#x27;</span>,<span class="string">&#x27;Male&#x27;</span>,<span class="string">&#x27;unconfirmed&#x27;</span>]</span><br><span class="line"><span class="comment">#自动按照0、1、2的对应顺序进行赋值</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">students</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>gender</th>
      <th>blood</th>
      <th>height</th>
      <th>gender_value</th>
      <th>height_group</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>jackie</td>
      <td>1</td>
      <td>a</td>
      <td>172</td>
      <td>Male</td>
      <td>170-175</td>
    </tr>
    <tr>
      <th>1</th>
      <td>bob</td>
      <td>0</td>
      <td>ab</td>
      <td>190</td>
      <td>Female</td>
      <td>190-195</td>
    </tr>
    <tr>
      <th>2</th>
      <td>jessy</td>
      <td>1</td>
      <td>o</td>
      <td>160</td>
      <td>Male</td>
      <td>160-165</td>
    </tr>
    <tr>
      <th>3</th>
      <td>alice</td>
      <td>2</td>
      <td>b</td>
      <td>150</td>
      <td>unconfirmed</td>
      <td>150-155</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>如果需要剔除或增加值标签，或者将类别设置为预定尺度，可以用cat.set_categories方法</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">students[<span class="string">&#x27;gender_value&#x27;</span>].cat.set_categories=[<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="string">&#x27;na&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>分段</strong>：可以利用cut函数实现对数值型数据分段标签</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">labels=[<span class="string">&quot;&#123;0&#125;-&#123;1&#125;&quot;</span>.<span class="built_in">format</span>(i,i+<span class="number">10</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">130</span>,<span class="number">200</span>,<span class="number">10</span>)]</span><br><span class="line">students[<span class="string">&#x27;height_group&#x27;</span>]=pd.cut(students.height,</span><br><span class="line">                                <span class="built_in">range</span>(<span class="number">130</span>,<span class="number">205</span>,<span class="number">10</span>),</span><br><span class="line">                                right=<span class="literal">False</span>, labels=labels)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">students</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>gender</th>
      <th>blood</th>
      <th>height</th>
      <th>gender_value</th>
      <th>height_group</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>jackie</td>
      <td>1</td>
      <td>a</td>
      <td>172</td>
      <td>Male</td>
      <td>170-180</td>
    </tr>
    <tr>
      <th>1</th>
      <td>bob</td>
      <td>0</td>
      <td>ab</td>
      <td>190</td>
      <td>Female</td>
      <td>190-200</td>
    </tr>
    <tr>
      <th>2</th>
      <td>jessy</td>
      <td>1</td>
      <td>o</td>
      <td>160</td>
      <td>Male</td>
      <td>160-170</td>
    </tr>
    <tr>
      <th>3</th>
      <td>alice</td>
      <td>2</td>
      <td>b</td>
      <td>150</td>
      <td>unconfirmed</td>
      <td>150-160</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="时间序列数据"><a href="#时间序列数据" class="headerlink" title="时间序列数据"></a>时间序列数据</h2><ul>
<li><p>比较特殊的series或dataframe</p>
<ul>
<li>以时间戳 TimeStamp 为索引</li>
<li>与datetime等价</li>
</ul>
</li>
<li><p>生成时间序列，最为关键的是生成以时间序列为主要特征的索引</p>
<ul>
<li>创建或转化为时间序列：类timestampe、类period以及to_timestamp、to_datetime、date_range、period_range等函数或方法</li>
<li>例如，将当前函数转化为时间戳</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Timestamp(<span class="string">&#x27;now&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>Timestamp(&#39;2021-10-25 16:59:11.426736&#39;)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dates=[pd.Timestamp(<span class="string">&#x27;now&#x27;</span>),pd.Timestamp(<span class="string">&#x27;now&#x27;</span>),pd.Timestamp(<span class="string">&#x27;2021-09-20&#x27;</span>)]</span><br><span class="line">ts=pd.Series(np.random.randn(<span class="number">3</span>),dates)</span><br><span class="line">ts</span><br></pre></td></tr></table></figure>




<pre><code>2021-10-25 17:01:25.941971    0.176312
2021-10-25 17:01:25.941971    1.243391
2021-09-20 00:00:00.000000    0.163607
dtype: float64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span>(ts.index)</span><br></pre></td></tr></table></figure>




<pre><code>pandas.core.indexes.datetimes.DatetimeIndex
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ts.index</span><br></pre></td></tr></table></figure>




<pre><code>DatetimeIndex([&#39;2021-10-25 17:01:25.941971&#39;, &#39;2021-10-25 17:01:25.941971&#39;,
                      &#39;2021-09-20 00:00:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=None)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dates=pd.date_range(<span class="string">&#x27;2021-09-20&#x27;</span>,<span class="string">&#x27;2021-09-22&#x27;</span>)</span><br><span class="line">tsdr=pd.Series(np.random.randn(<span class="number">3</span>),dates)</span><br><span class="line">tsdr</span><br></pre></td></tr></table></figure>




<pre><code>2021-09-20   -0.628241
2021-09-21   -0.722723
2021-09-22    0.050827
Freq: D, dtype: float64
</code></pre>
<ul>
<li>period类实例化也可以作为时间序列</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dates=[pd.Period(<span class="string">&#x27;2021-09-05&#x27;</span>),pd.Period(<span class="string">&#x27;2021-09-06&#x27;</span>),pd.Period(<span class="string">&#x27;2021-09-07&#x27;</span>)]</span><br><span class="line">tsp=pd.Series(np.random.randn(<span class="number">3</span>),dates)</span><br><span class="line">tsp</span><br></pre></td></tr></table></figure>




<pre><code>2021-09-05    0.117334
2021-09-06    0.941937
2021-09-07    1.162453
Freq: D, dtype: float64
</code></pre>
<ul>
<li><strong>将形如时间日期得数据转化为时间序列：to_timestamp、to_datetime</strong><ul>
<li>转化为时间序列之后，可以按照时间戳或时间范围进行索引和切片</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jd_ts=jddf.set_index(pd.to_datetime(jddf[<span class="string">&#x27;time&#x27;</span>]))</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jd_ts.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>names</th>
      <th>time</th>
      <th>opening_price</th>
      <th>closing_price</th>
      <th>low</th>
      <th>high</th>
      <th>volume</th>
      <th>market</th>
    </tr>
    <tr>
      <th>time</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2021-08-16</th>
      <td>JD</td>
      <td>08/16/2021</td>
      <td>68.21</td>
      <td>66.67</td>
      <td>64.80</td>
      <td>68.22</td>
      <td>12502810</td>
      <td>Bad</td>
    </tr>
    <tr>
      <th>2021-08-13</th>
      <td>JD</td>
      <td>08/13/2021</td>
      <td>69.95</td>
      <td>69.86</td>
      <td>69.19</td>
      <td>70.49</td>
      <td>5630593</td>
      <td>Bad</td>
    </tr>
    <tr>
      <th>2021-08-12</th>
      <td>JD</td>
      <td>08/12/2021</td>
      <td>70.36</td>
      <td>70.53</td>
      <td>69.41</td>
      <td>70.96</td>
      <td>5783820</td>
      <td>Good</td>
    </tr>
    <tr>
      <th>2021-08-11</th>
      <td>JD</td>
      <td>08/11/2021</td>
      <td>72.54</td>
      <td>71.07</td>
      <td>70.81</td>
      <td>72.70</td>
      <td>5674238</td>
      <td>Bad</td>
    </tr>
    <tr>
      <th>2021-08-10</th>
      <td>JD</td>
      <td>08/10/2021</td>
      <td>72.80</td>
      <td>71.76</td>
      <td>71.52</td>
      <td>73.49</td>
      <td>5195324</td>
      <td>Bad</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(jd_ts.index))</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.indexes.datetimes.DatetimeIndex&#39;&gt;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jd_ts.loc[<span class="string">&#x27;2021-08&#x27;</span>]</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>names</th>
      <th>time</th>
      <th>opening_price</th>
      <th>closing_price</th>
      <th>low</th>
      <th>high</th>
      <th>volume</th>
      <th>market</th>
    </tr>
    <tr>
      <th>time</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2021-08-16</th>
      <td>JD</td>
      <td>08/16/2021</td>
      <td>68.21</td>
      <td>66.67</td>
      <td>64.80</td>
      <td>68.22</td>
      <td>12502810</td>
      <td>Bad</td>
    </tr>
    <tr>
      <th>2021-08-13</th>
      <td>JD</td>
      <td>08/13/2021</td>
      <td>69.95</td>
      <td>69.86</td>
      <td>69.19</td>
      <td>70.49</td>
      <td>5630593</td>
      <td>Bad</td>
    </tr>
    <tr>
      <th>2021-08-12</th>
      <td>JD</td>
      <td>08/12/2021</td>
      <td>70.36</td>
      <td>70.53</td>
      <td>69.41</td>
      <td>70.96</td>
      <td>5783820</td>
      <td>Good</td>
    </tr>
    <tr>
      <th>2021-08-11</th>
      <td>JD</td>
      <td>08/11/2021</td>
      <td>72.54</td>
      <td>71.07</td>
      <td>70.81</td>
      <td>72.70</td>
      <td>5674238</td>
      <td>Bad</td>
    </tr>
    <tr>
      <th>2021-08-10</th>
      <td>JD</td>
      <td>08/10/2021</td>
      <td>72.80</td>
      <td>71.76</td>
      <td>71.52</td>
      <td>73.49</td>
      <td>5195324</td>
      <td>Bad</td>
    </tr>
    <tr>
      <th>2021-08-09</th>
      <td>JD</td>
      <td>08/09/2021</td>
      <td>69.93</td>
      <td>71.73</td>
      <td>69.81</td>
      <td>71.87</td>
      <td>6342002</td>
      <td>Good</td>
    </tr>
    <tr>
      <th>2021-08-06</th>
      <td>JD</td>
      <td>08/06/2021</td>
      <td>71.10</td>
      <td>69.59</td>
      <td>69.21</td>
      <td>71.24</td>
      <td>6977587</td>
      <td>Bad</td>
    </tr>
    <tr>
      <th>2021-08-05</th>
      <td>JD</td>
      <td>08/05/2021</td>
      <td>70.89</td>
      <td>70.74</td>
      <td>69.76</td>
      <td>71.16</td>
      <td>7485547</td>
      <td>Bad</td>
    </tr>
    <tr>
      <th>2021-08-04</th>
      <td>JD</td>
      <td>08/04/2021</td>
      <td>70.63</td>
      <td>71.40</td>
      <td>70.63</td>
      <td>72.85</td>
      <td>8074923</td>
      <td>Good</td>
    </tr>
    <tr>
      <th>2021-08-03</th>
      <td>JD</td>
      <td>08/03/2021</td>
      <td>70.66</td>
      <td>70.24</td>
      <td>69.19</td>
      <td>70.91</td>
      <td>8509517</td>
      <td>Bad</td>
    </tr>
    <tr>
      <th>2021-08-02</th>
      <td>JD</td>
      <td>08/02/2021</td>
      <td>71.07</td>
      <td>71.49</td>
      <td>70.81</td>
      <td>72.62</td>
      <td>8422528</td>
      <td>Good</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>时序数据的索引和切片中，有一种特殊的truncate方法，可以将指定范围内的数据截取出来：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jd_ts[[<span class="string">&#x27;opening_price&#x27;</span>]].truncate(after=<span class="string">&#x27;2021-02-07&#x27;</span>,before=<span class="string">&#x27;2021-01-22&#x27;</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>opening_price</th>
    </tr>
    <tr>
      <th>time</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2021-02-05</th>
      <td>95.24</td>
    </tr>
    <tr>
      <th>2021-02-04</th>
      <td>95.60</td>
    </tr>
    <tr>
      <th>2021-02-03</th>
      <td>96.84</td>
    </tr>
    <tr>
      <th>2021-02-02</th>
      <td>94.99</td>
    </tr>
    <tr>
      <th>2021-02-01</th>
      <td>90.15</td>
    </tr>
    <tr>
      <th>2021-01-29</th>
      <td>89.98</td>
    </tr>
    <tr>
      <th>2021-01-28</th>
      <td>90.36</td>
    </tr>
    <tr>
      <th>2021-01-27</th>
      <td>93.40</td>
    </tr>
    <tr>
      <th>2021-01-26</th>
      <td>99.02</td>
    </tr>
    <tr>
      <th>2021-01-25</th>
      <td>99.30</td>
    </tr>
    <tr>
      <th>2021-01-22</th>
      <td>93.95</td>
    </tr>
  </tbody>
</table>
</div>



<h3 id="范围和偏移量"><a href="#范围和偏移量" class="headerlink" title="范围和偏移量"></a>范围和偏移量</h3><ul>
<li>用于生成一定时期内不同间隔的时序索引</li>
<li>最常用的是date_range函数：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pd.date_range(start=None, end=None, periods=None, </span></span><br><span class="line"> <span class="comment"># freq=&#x27;D&#x27;,tz=None,normalize=False,name=None,closed=None)</span></span><br></pre></td></tr></table></figure>

<p><img src="attachment:image.png" alt="image.png"></p>
<p><img src="attachment:image.png" alt="image.png"></p>
<p><img src="attachment:image.png" alt="image.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.date_range(<span class="string">&#x27;2021/02/07&#x27;</span>,periods=<span class="number">10</span>,freq=<span class="string">&#x27;1D2H20min&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>DatetimeIndex([&#39;2021-02-07 00:00:00&#39;, &#39;2021-02-08 02:20:00&#39;,
               &#39;2021-02-09 04:40:00&#39;, &#39;2021-02-10 07:00:00&#39;,
               &#39;2021-02-11 09:20:00&#39;, &#39;2021-02-12 11:40:00&#39;,
               &#39;2021-02-13 14:00:00&#39;, &#39;2021-02-14 16:20:00&#39;,
               &#39;2021-02-15 18:40:00&#39;, &#39;2021-02-16 21:00:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;1580T&#39;)
</code></pre>
<h3 id="时间移动及运算"><a href="#时间移动及运算" class="headerlink" title="时间移动及运算"></a>时间移动及运算</h3><ul>
<li>为sample的对象的开盘和收盘价加上随机干扰</li>
</ul>
<h3 id="频率转换及重采样"><a href="#频率转换及重采样" class="headerlink" title="频率转换及重采样"></a>频率转换及重采样</h3><ul>
<li>从低频数据重采样为高频，特别费劲，需要插值</li>
</ul>
<h1 id="【11】数据描述"><a href="#【11】数据描述" class="headerlink" title="【11】数据描述"></a>【11】数据描述</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br></pre></td></tr></table></figure>

<ul>
<li><p>numpy中可求如下函数统计量：</p>
<ul>
<li>求和：sum()</li>
<li>均值：mean()或average()</li>
<li>标准差：std()</li>
<li>方差：var()</li>
<li>min(), max(), 最大值与最小值之差ptp()</li>
<li>下标：argmax(), argmin()</li>
<li>中位数：median()</li>
<li>协方差系数：cov()</li>
<li>相关系数：corrcoef()</li>
</ul>
</li>
<li><p>pandas这些方法的选项主要有：</p>
<ul>
<li>axis：指定dataframe是用行（0）还是列（1）来操作</li>
<li>skipna：剔除缺失值进行数据处理，默认为True</li>
<li>level：轴如果是层次化索引，可以用level进行分组分析</li>
</ul>
</li>
<li><p>scipy.stats中也可以对统计量进行计算</p>
</li>
</ul>
<h2 id="（1）集中趋势"><a href="#（1）集中趋势" class="headerlink" title="（1）集中趋势"></a>（1）集中趋势</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">stock=np.dtype([(<span class="string">&#x27;name&#x27;</span>,np.str_,<span class="number">4</span>),(<span class="string">&#x27;time&#x27;</span>,np.str_,<span class="number">10</span>),</span><br><span class="line">                (<span class="string">&#x27;op&#x27;</span>,np.float64),(<span class="string">&#x27;cl&#x27;</span>,np.float64),</span><br><span class="line">                (<span class="string">&#x27;low&#x27;</span>,np.float64),(<span class="string">&#x27;high&#x27;</span>,np.float64),(<span class="string">&#x27;volume&#x27;</span>,np.<span class="built_in">int</span>)])</span><br><span class="line">jd_stock=np.loadtxt(<span class="string">r&#x27;C:\Users\Fu Jinyue\Downloads\data.csv&#x27;</span>,delimiter=<span class="string">&#x27;,&#x27;</span>,dtype=stock)</span><br><span class="line">jddf=pd.read_table(<span class="string">r&#x27;C:\Users\Fu Jinyue\Downloads\data.csv&#x27;</span>,sep=<span class="string">&#x27;,&#x27;</span>,header=<span class="literal">None</span>,names=[<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;time&#x27;</span>,<span class="string">&#x27;op&#x27;</span>,<span class="string">&#x27;cl&#x27;</span>,<span class="string">&#x27;low&#x27;</span>,<span class="string">&#x27;high&#x27;</span>,<span class="string">&#x27;volume&#x27;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>C:\Users\FUJINY~1\AppData\Local\Temp/ipykernel_12336/1090286872.py:3: DeprecationWarning: `np.int` is a deprecated alias for the builtin `int`. To silence this warning, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.
Deprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations
  (&#39;low&#39;,np.float64),(&#39;high&#39;,np.float64),(&#39;volume&#39;,np.int)])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddf.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>time</th>
      <th>op</th>
      <th>cl</th>
      <th>low</th>
      <th>high</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>JD</th>
      <td>3-Jan-17</td>
      <td>25.95</td>
      <td>25.82</td>
      <td>25.64</td>
      <td>26.11</td>
      <td>8275300</td>
    </tr>
    <tr>
      <th>JD</th>
      <td>4-Jan-17</td>
      <td>26.05</td>
      <td>25.85</td>
      <td>25.58</td>
      <td>26.08</td>
      <td>7862800</td>
    </tr>
    <tr>
      <th>JD</th>
      <td>5-Jan-17</td>
      <td>26.15</td>
      <td>26.30</td>
      <td>26.05</td>
      <td>26.80</td>
      <td>10205600</td>
    </tr>
    <tr>
      <th>JD</th>
      <td>6-Jan-17</td>
      <td>26.30</td>
      <td>26.27</td>
      <td>25.92</td>
      <td>26.41</td>
      <td>6234300</td>
    </tr>
    <tr>
      <th>JD</th>
      <td>9-Jan-17</td>
      <td>26.64</td>
      <td>26.26</td>
      <td>26.14</td>
      <td>26.95</td>
      <td>8071500</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.mean(jd_stock[<span class="string">&#x27;op&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>29.76112676056338
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.average(jd_stock[<span class="string">&#x27;op&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>29.76112676056338
</code></pre>
<ul>
<li>加权平均数：把收盘价按照当日成交量进行加权</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.average(jd_stock[<span class="string">&#x27;cl&#x27;</span>],weights=jd_stock[<span class="string">&#x27;volume&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>29.670471959778613
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddf[<span class="string">&#x27;op&#x27;</span>].mean()</span><br></pre></td></tr></table></figure>




<pre><code>29.77633802816901
</code></pre>
<ul>
<li>scipy中的stats模块提供大量方法，比如nanmean为不考虑缺失值的，tmean、tvar、tstd分别为可计算截尾均值、截尾方差、标准差等<ul>
<li><strong>截尾均值</strong>：</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line">stats.tmean(jddf[<span class="string">&#x27;op&#x27;</span>])    <span class="comment">#默认是使用所有数据计算均值</span></span><br></pre></td></tr></table></figure>




<pre><code>29.77633802816901
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stats.tmean(jddf[<span class="string">&#x27;op&#x27;</span>],(<span class="number">25</span>,<span class="number">30</span>))    </span><br><span class="line"><span class="comment">#第二个参数表示上下界，也就是大于30或小于25的不参加计算</span></span><br></pre></td></tr></table></figure>




<pre><code>27.88483870967742
</code></pre>
<ul>
<li><pre><code>- **缩尾均值**：比如最大两个和最小两个的数，我不想要，就用第三大和第三小的数把边界上的替换掉
</code></pre>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stats.mstats.winsorize(jddf[<span class="string">&#x27;op&#x27;</span>],(<span class="number">0.05</span>,<span class="number">0.05</span>)).mean()</span><br></pre></td></tr></table></figure>




<pre><code>29.77535211267606
</code></pre>
<ul>
<li><ul>
<li><strong>几何平均数</strong></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stats.gmean(jddf[<span class="string">&#x27;op&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>29.714582868467097
</code></pre>
<ul>
<li><ul>
<li><strong>调和平均数</strong></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stats.hmean(jddf[<span class="string">&#x27;op&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>29.65142686584659
</code></pre>
<ul>
<li>中位数：顺序数据对应的中间位置数值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.median(jd_stock[<span class="string">&#x27;op&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>30.27
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddf[<span class="string">&#x27;op&#x27;</span>].median()</span><br></pre></td></tr></table></figure>




<pre><code>30.32
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> median</span><br><span class="line">median(jddf[<span class="string">&#x27;op&#x27;</span>])</span><br></pre></td></tr></table></figure>

<pre><code>C:\Users\FUJINY~1\AppData\Local\Temp/ipykernel_12336/669747319.py:2: DeprecationWarning: scipy.median is deprecated and will be removed in SciPy 2.0.0, use numpy.median instead
  median(jddf[&#39;op&#39;])





30.32
</code></pre>
<ul>
<li><strong>众数</strong>：计算比较麻烦，numpy中并没有提供可供直接使用的函数，但scipy中提供有scipy.stats.mode可对数组进行众数计算<ul>
<li>缺点：有多个众数的时候只能找出第一个众数；没有众数的时候默认给出第一个数</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">m=np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">7</span>])</span><br><span class="line">stats.mode(m)</span><br></pre></td></tr></table></figure>




<pre><code>ModeResult(mode=array([2]), count=array([4]))
</code></pre>
<ul>
<li>如何找出所有众数？<ul>
<li>dataframe中有mode方法，返回的一列数为所有众数</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">md=pd.DataFrame(m)</span><br><span class="line">md.mode()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>7</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="（2）离散程度"><a href="#（2）离散程度" class="headerlink" title="（2）离散程度"></a>（2）离散程度</h2><ul>
<li>极差：ptp满树</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.ptp(jd_stock[<span class="string">&#x27;cl&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>6.890000000000001
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddf[<span class="string">&#x27;cl&#x27;</span>].<span class="built_in">max</span>()-jddf[<span class="string">&#x27;cl&#x27;</span>].<span class="built_in">min</span>()</span><br></pre></td></tr></table></figure>




<pre><code>6.890000000000001
</code></pre>
<ul>
<li>上下四分位数之差</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stats.scoreatpercentile(jddf[<span class="string">&#x27;op&#x27;</span>],<span class="number">75</span>)-stats.scoreatpercentile(jddf[<span class="string">&#x27;op&#x27;</span>],<span class="number">25</span>)</span><br></pre></td></tr></table></figure>




<pre><code>3.035
</code></pre>
<ul>
<li>分位数：计算指定分位点的分位数，也可用percentileofscore计算指定数值所处的分位点</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stats.scoreatpercentile(jddf[<span class="string">&#x27;op&#x27;</span>],[<span class="number">10</span>,<span class="number">20</span>,<span class="number">25</span>,<span class="number">75</span>,<span class="number">100</span>])</span><br></pre></td></tr></table></figure>




<pre><code>array([26.84 , 28.17 , 28.34 , 31.375, 32.71 ])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stats.percentileofscore(jddf[<span class="string">&#x27;op&#x27;</span>],<span class="number">31.38</span>)</span><br></pre></td></tr></table></figure>




<pre><code>76.7605633802817
</code></pre>
<ul>
<li>方差和标准差：numpy中有var函数可以计算，std计算标准差</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.var(jd_stock[<span class="string">&#x27;op&#x27;</span>],ddof=<span class="number">1</span>)</span><br><span class="line"><span class="comment">#一定要注意ddof的用法：该参数表示设置计算方差时的分母为(n-ddof)，</span></span><br><span class="line"><span class="comment">#所以ddof=1，表示自由度为n-1，这才是符合无偏的样品统计量</span></span><br></pre></td></tr></table></figure>




<pre><code>3.721561569416499
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddf[<span class="string">&#x27;op&#x27;</span>].var()</span><br></pre></td></tr></table></figure>




<pre><code>3.721561569416499
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stats.tvar(jddf[<span class="string">&#x27;op&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>3.721561569416499
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stats.tvar(jd_stock[<span class="string">&#x27;op&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>3.721561569416499
</code></pre>
<ul>
<li>协方差：numpy中用cov函数计算协方差统计量</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">np.cov((jd_stock[<span class="string">&#x27;op&#x27;</span>],jd_stock[<span class="string">&#x27;cl&#x27;</span>]),bias=<span class="number">1</span>,ddof=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#参数bias=1表示结果除以N，否则只计算分子部分</span></span><br><span class="line"><span class="comment">#返回结果为协方差系数矩阵</span></span><br></pre></td></tr></table></figure>




<pre><code>array([[3.72156157, 3.60871561],
       [3.60871561, 3.64278354]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jddf[<span class="string">&#x27;op&#x27;</span>].cov(jddf[<span class="string">&#x27;cl&#x27;</span>])</span><br><span class="line"><span class="comment"># dataframe有cov这个方法，可以直接把两组数匹配起来</span></span><br></pre></td></tr></table></figure>




<pre><code>3.608715613682093
</code></pre>
<ul>
<li>离散系数：numpy中需要间接使用公式计算离散系数<ul>
<li>相对离散系数：方差或标准差除以平均数</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv=jd_stock[<span class="string">&#x27;cl&#x27;</span>].std()/jd_stock[<span class="string">&#x27;cl&#x27;</span>].mean()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;离散系数：&#x27;</span>,cv)</span><br></pre></td></tr></table></figure>

<pre><code>离散系数： 0.0636451394609268
</code></pre>
<h2 id="3-分布形状"><a href="#3-分布形状" class="headerlink" title="(3)分布形状"></a>(3)分布形状</h2><ul>
<li>偏度：偏态、偏态系数，统计数据分布偏斜方向和程度的度量，是统计数据分布非对称程度的数字特征<ul>
<li>负数说明比较平缓</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddf[<span class="string">&#x27;op&#x27;</span>].skew()</span><br></pre></td></tr></table></figure>




<pre><code>-0.46224497683317695
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stats.skew(jddf[<span class="string">&#x27;op&#x27;</span>],bias=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>




<pre><code>-0.4622449768331769
</code></pre>
<ul>
<li>峰度：又称峰态系数，表征概率密度分布曲线在平均值处峰值高低的特征数</li>
</ul>
<h2 id="（4）相关系数"><a href="#（4）相关系数" class="headerlink" title="（4）相关系数"></a>（4）相关系数</h2><ul>
<li>numpy中的corrcoef函数<ul>
<li>也可以用公式手动计算 = 协方差除以标准差的乘积</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.corrcoef(jd_stock[<span class="string">&#x27;op&#x27;</span>],jd_stock[<span class="string">&#x27;cl&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>array([[1.        , 0.98010673],
       [0.98010673, 1.        ]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">co=np.cov([jd_stock[<span class="string">&#x27;op&#x27;</span>],jd_stock[<span class="string">&#x27;cl&#x27;</span>]],bias=<span class="number">0</span>)/(np.std(jd_stock[<span class="string">&#x27;cl&#x27;</span>])*np.std(jd_stock[<span class="string">&#x27;op&#x27;</span>]))</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">co</span><br></pre></td></tr></table></figure>




<pre><code>array([[1.02519441, 0.99410826],
       [0.99410826, 1.00349309]])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddf[<span class="string">&#x27;op&#x27;</span>].corr(jddf[<span class="string">&#x27;cl&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>0.9801067306898126
</code></pre>
<ul>
<li>在pandas和scipy.stats中，还可以使用pearsonr、spearmanr、kendalltau等方法计算对应的非参数相关系数</li>
</ul>
<h2 id="统计量的汇总输出"><a href="#统计量的汇总输出" class="headerlink" title="统计量的汇总输出"></a>统计量的汇总输出</h2><ul>
<li>pandas中都有describe方法可以对dataframe进行统计<ul>
<li>stats.describe也可以实现，但比较冗杂</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jddf.describe()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>op</th>
      <th>cl</th>
      <th>low</th>
      <th>high</th>
      <th>volume</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>71.000000</td>
      <td>71.000000</td>
      <td>71.000000</td>
      <td>71.000000</td>
      <td>7.100000e+01</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>29.761127</td>
      <td>29.776338</td>
      <td>29.450986</td>
      <td>30.097042</td>
      <td>6.805993e+06</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.929135</td>
      <td>1.908608</td>
      <td>1.906717</td>
      <td>1.961364</td>
      <td>3.234777e+06</td>
    </tr>
    <tr>
      <th>min</th>
      <td>25.950000</td>
      <td>25.820000</td>
      <td>25.580000</td>
      <td>26.080000</td>
      <td>3.013600e+06</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>28.335000</td>
      <td>28.340000</td>
      <td>28.070000</td>
      <td>28.545000</td>
      <td>4.851150e+06</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>30.270000</td>
      <td>30.320000</td>
      <td>30.030000</td>
      <td>30.610000</td>
      <td>6.084500e+06</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>31.410000</td>
      <td>31.375000</td>
      <td>31.090000</td>
      <td>31.720000</td>
      <td>7.971900e+06</td>
    </tr>
    <tr>
      <th>max</th>
      <td>32.740000</td>
      <td>32.710000</td>
      <td>32.450000</td>
      <td>33.280000</td>
      <td>2.217600e+07</td>
    </tr>
  </tbody>
</table>
</div>



<h2 id="统计表"><a href="#统计表" class="headerlink" title="统计表"></a>统计表</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">storesales=pd.read_csv(<span class="string">r&#x27;C:\Users\Fu Jinyue\Downloads\storesales.csv&#x27;</span>)</span><br><span class="line">storesales.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>store</th>
      <th>method</th>
      <th>orders</th>
      <th>sales</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1001</td>
      <td>1</td>
      <td>1</td>
      <td>78</td>
      <td>89000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1023</td>
      <td>2</td>
      <td>1</td>
      <td>87</td>
      <td>98000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1234</td>
      <td>2</td>
      <td>2</td>
      <td>67</td>
      <td>78500</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1002</td>
      <td>3</td>
      <td>2</td>
      <td>87</td>
      <td>77500</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1001</td>
      <td>3</td>
      <td>1</td>
      <td>56</td>
      <td>67990</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">storesales[<span class="string">&#x27;store&#x27;</span>]=storesales[<span class="string">&#x27;store&#x27;</span>].astype(<span class="string">&#x27;category&#x27;</span>)</span><br><span class="line">storesales[<span class="string">&#x27;store&#x27;</span>].cat.categories=[<span class="string">&#x27;SANFORD&#x27;</span>,<span class="string">&#x27;MILLENIA&#x27;</span>,<span class="string">&#x27;OCOEE&#x27;</span>,<span class="string">&#x27;KISSME&#x27;</span>]</span><br><span class="line">storesales[<span class="string">&#x27;store&#x27;</span>].cat.set_categories=[<span class="string">&#x27;SANFORD&#x27;</span>,<span class="string">&#x27;MILLENIA&#x27;</span>,<span class="string">&#x27;OCOEE&#x27;</span>,<span class="string">&#x27;KISSME&#x27;</span>]</span><br><span class="line"></span><br><span class="line">storesales[<span class="string">&#x27;method&#x27;</span>]=storesales[<span class="string">&#x27;method&#x27;</span>].astype(<span class="string">&#x27;category&#x27;</span>)</span><br><span class="line">storesales[<span class="string">&#x27;method&#x27;</span>].cat.categories=[<span class="string">&#x27;online&#x27;</span>,<span class="string">&#x27;instore&#x27;</span>]</span><br><span class="line">storesales[<span class="string">&#x27;method&#x27;</span>].cat.set_categories=[<span class="string">&#x27;online&#x27;</span>,<span class="string">&#x27;instore&#x27;</span>]</span><br><span class="line"></span><br><span class="line">storesales.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>store</th>
      <th>method</th>
      <th>orders</th>
      <th>sales</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1001</td>
      <td>SANFORD</td>
      <td>online</td>
      <td>78</td>
      <td>89000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1023</td>
      <td>MILLENIA</td>
      <td>online</td>
      <td>87</td>
      <td>98000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1234</td>
      <td>MILLENIA</td>
      <td>instore</td>
      <td>67</td>
      <td>78500</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1002</td>
      <td>OCOEE</td>
      <td>instore</td>
      <td>87</td>
      <td>77500</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1001</td>
      <td>OCOEE</td>
      <td>online</td>
      <td>56</td>
      <td>67990</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li><strong>统计表</strong>：pandas提供了<strong>pivot_table</strong>等函数，可以绘制统计表或数据汇总表格<ul>
<li>aggfunc参数可指定多个统计量</li>
<li>margins可以控制是否显示总计，True表示显示all</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.pivot_table(storesales,index=[<span class="string">&#x27;store&#x27;</span>],values=[<span class="string">&#x27;orders&#x27;</span>],aggfunc=<span class="built_in">sum</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>orders</th>
    </tr>
    <tr>
      <th>store</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>SANFORD</th>
      <td>362</td>
    </tr>
    <tr>
      <th>MILLENIA</th>
      <td>406</td>
    </tr>
    <tr>
      <th>OCOEE</th>
      <td>392</td>
    </tr>
    <tr>
      <th>KISSME</th>
      <td>135</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pd.pivot_table(storesales,index=[<span class="string">&#x27;store&#x27;</span>],columns=[<span class="string">&#x27;method&#x27;</span>],</span><br><span class="line">               values=[<span class="string">&#x27;orders&#x27;</span>],aggfunc=[<span class="built_in">sum</span>,<span class="built_in">min</span>],fill_value=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead tr th &#123;
    text-align: left;
&#125;

.dataframe thead tr:last-of-type th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="2" halign="left">sum</th>
      <th colspan="2" halign="left">min</th>
    </tr>
    <tr>
      <th></th>
      <th colspan="2" halign="left">orders</th>
      <th colspan="2" halign="left">orders</th>
    </tr>
    <tr>
      <th>method</th>
      <th>online</th>
      <th>instore</th>
      <th>online</th>
      <th>instore</th>
    </tr>
    <tr>
      <th>store</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>SANFORD</th>
      <td>362</td>
      <td>0</td>
      <td>78</td>
      <td>0</td>
    </tr>
    <tr>
      <th>MILLENIA</th>
      <td>252</td>
      <td>154</td>
      <td>78</td>
      <td>67</td>
    </tr>
    <tr>
      <th>OCOEE</th>
      <td>146</td>
      <td>246</td>
      <td>56</td>
      <td>70</td>
    </tr>
    <tr>
      <th>KISSME</th>
      <td>0</td>
      <td>135</td>
      <td>0</td>
      <td>59</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pd.pivot_table(storesales,index=[<span class="string">&#x27;store&#x27;</span>],columns=[<span class="string">&#x27;method&#x27;</span>],</span><br><span class="line">               values=[<span class="string">&#x27;orders&#x27;</span>,<span class="string">&#x27;sales&#x27;</span>],aggfunc=[<span class="built_in">sum</span>,np.mean,<span class="built_in">len</span>],</span><br><span class="line">               fill_value=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead tr th &#123;
    text-align: left;
&#125;

.dataframe thead tr:last-of-type th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="4" halign="left">sum</th>
      <th colspan="4" halign="left">mean</th>
      <th colspan="4" halign="left">len</th>
    </tr>
    <tr>
      <th></th>
      <th colspan="2" halign="left">orders</th>
      <th colspan="2" halign="left">sales</th>
      <th colspan="2" halign="left">orders</th>
      <th colspan="2" halign="left">sales</th>
      <th colspan="2" halign="left">orders</th>
      <th colspan="2" halign="left">sales</th>
    </tr>
    <tr>
      <th>method</th>
      <th>online</th>
      <th>instore</th>
      <th>online</th>
      <th>instore</th>
      <th>online</th>
      <th>instore</th>
      <th>online</th>
      <th>instore</th>
      <th>online</th>
      <th>instore</th>
      <th>online</th>
      <th>instore</th>
    </tr>
    <tr>
      <th>store</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>SANFORD</th>
      <td>362</td>
      <td>0</td>
      <td>312643</td>
      <td>0</td>
      <td>90.5</td>
      <td>0.0</td>
      <td>78160.75</td>
      <td>0.000000</td>
      <td>4</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
    </tr>
    <tr>
      <th>MILLENIA</th>
      <td>252</td>
      <td>154</td>
      <td>251667</td>
      <td>176820</td>
      <td>84.0</td>
      <td>77.0</td>
      <td>83889.00</td>
      <td>88410.000000</td>
      <td>3</td>
      <td>2</td>
      <td>3</td>
      <td>2</td>
    </tr>
    <tr>
      <th>OCOEE</th>
      <td>146</td>
      <td>246</td>
      <td>146335</td>
      <td>244903</td>
      <td>73.0</td>
      <td>82.0</td>
      <td>73167.50</td>
      <td>81634.333333</td>
      <td>2</td>
      <td>3</td>
      <td>2</td>
      <td>3</td>
    </tr>
    <tr>
      <th>KISSME</th>
      <td>0</td>
      <td>135</td>
      <td>0</td>
      <td>165010</td>
      <td>0.0</td>
      <td>67.5</td>
      <td>0.00</td>
      <td>82505.000000</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pd.pivot_table(storesales,index=[<span class="string">&#x27;store&#x27;</span>],columns=[<span class="string">&#x27;method&#x27;</span>],</span><br><span class="line">               values=[<span class="string">&#x27;orders&#x27;</span>],aggfunc=[<span class="built_in">sum</span>,<span class="built_in">min</span>],fill_value=<span class="number">0</span>,margins=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead tr th &#123;
    text-align: left;
&#125;

.dataframe thead tr:last-of-type th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">sum</th>
      <th colspan="3" halign="left">min</th>
    </tr>
    <tr>
      <th></th>
      <th colspan="3" halign="left">orders</th>
      <th colspan="3" halign="left">orders</th>
    </tr>
    <tr>
      <th>method</th>
      <th>online</th>
      <th>instore</th>
      <th>All</th>
      <th>online</th>
      <th>instore</th>
      <th>All</th>
    </tr>
    <tr>
      <th>store</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>SANFORD</th>
      <td>362</td>
      <td>0</td>
      <td>362</td>
      <td>78</td>
      <td>0</td>
      <td>78</td>
    </tr>
    <tr>
      <th>MILLENIA</th>
      <td>252</td>
      <td>154</td>
      <td>406</td>
      <td>78</td>
      <td>67</td>
      <td>67</td>
    </tr>
    <tr>
      <th>OCOEE</th>
      <td>146</td>
      <td>246</td>
      <td>392</td>
      <td>56</td>
      <td>70</td>
      <td>56</td>
    </tr>
    <tr>
      <th>KISSME</th>
      <td>0</td>
      <td>135</td>
      <td>135</td>
      <td>0</td>
      <td>59</td>
      <td>59</td>
    </tr>
    <tr>
      <th>All</th>
      <td>760</td>
      <td>535</td>
      <td>1295</td>
      <td>56</td>
      <td>59</td>
      <td>56</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>pandas中的crosstab函数也可以实现上述功能</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab(storesales[<span class="string">&#x27;store&#x27;</span>],storesales[<span class="string">&#x27;method&#x27;</span>],</span><br><span class="line">           values=storesales[<span class="string">&#x27;sales&#x27;</span>],aggfunc=(<span class="built_in">sum</span>))</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>method</th>
      <th>online</th>
      <th>instore</th>
    </tr>
    <tr>
      <th>store</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>SANFORD</th>
      <td>312643</td>
      <td>0</td>
    </tr>
    <tr>
      <th>MILLENIA</th>
      <td>251667</td>
      <td>176820</td>
    </tr>
    <tr>
      <th>OCOEE</th>
      <td>146335</td>
      <td>244903</td>
    </tr>
    <tr>
      <th>KISSME</th>
      <td>0</td>
      <td>165010</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">storesales_grouped=storesales.groupby(storesales[<span class="string">&#x27;method&#x27;</span>])</span><br><span class="line">storesales_grouped[[<span class="string">&#x27;sales&#x27;</span>,<span class="string">&#x27;orders&#x27;</span>]].agg(<span class="built_in">sum</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sales</th>
      <th>orders</th>
    </tr>
    <tr>
      <th>method</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>online</th>
      <td>710645</td>
      <td>760</td>
    </tr>
    <tr>
      <th>instore</th>
      <td>586733</td>
      <td>535</td>
    </tr>
  </tbody>
</table>
</div>



<h1 id="【12】统计图形与数据可视化"><a href="#【12】统计图形与数据可视化" class="headerlink" title="【12】统计图形与数据可视化"></a>【12】统计图形与数据可视化</h1><ul>
<li>python中使用matplotlib</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib inline <span class="comment">#在jupyter中初始化</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">stock=np.dtype([(<span class="string">&#x27;name&#x27;</span>,np.str_,<span class="number">4</span>),(<span class="string">&#x27;time&#x27;</span>,np.str_,<span class="number">10</span>),</span><br><span class="line">                (<span class="string">&#x27;op&#x27;</span>,np.float64),(<span class="string">&#x27;cl&#x27;</span>,np.float64),</span><br><span class="line">                (<span class="string">&#x27;low&#x27;</span>,np.float64),(<span class="string">&#x27;high&#x27;</span>,np.float64),(<span class="string">&#x27;volume&#x27;</span>,np.int32)])</span><br><span class="line">jd_stock=np.loadtxt(<span class="string">r&#x27;C:\Users\Fu Jinyue\Downloads\data.csv&#x27;</span>,</span><br><span class="line">                    delimiter=<span class="string">&#x27;,&#x27;</span>,dtype=stock)</span><br><span class="line">jddf=pd.read_table(<span class="string">r&#x27;C:\Users\Fu Jinyue\Downloads\data.csv&#x27;</span>,</span><br><span class="line">                   sep=<span class="string">&#x27;,&#x27;</span>,header=<span class="literal">None</span>,</span><br><span class="line">                   names=[<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;time&#x27;</span>,<span class="string">&#x27;op&#x27;</span>,<span class="string">&#x27;cl&#x27;</span>,<span class="string">&#x27;low&#x27;</span>,<span class="string">&#x27;high&#x27;</span>,<span class="string">&#x27;volume&#x27;</span>])</span><br><span class="line">jddf[<span class="string">&#x27;Market&#x27;</span>]=<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: <span class="string">&#x27;Good&#x27;</span> <span class="keyword">if</span> x&gt;<span class="number">0</span> <span class="keyword">else</span> (<span class="string">&#x27;Bad&#x27;</span> <span class="keyword">if</span> x&lt;<span class="number">0</span> <span class="keyword">else</span> <span class="string">&#x27;OK&#x27;</span>),</span><br><span class="line">                       jddf[<span class="string">&#x27;cl&#x27;</span>]))</span><br><span class="line">jddf=jddf.sort_index(ascending=<span class="literal">False</span>).reset_index()</span><br><span class="line">jddf.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>name</th>
      <th>time</th>
      <th>op</th>
      <th>cl</th>
      <th>low</th>
      <th>high</th>
      <th>volume</th>
      <th>Market</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>70</td>
      <td>JD</td>
      <td>13-Apr-17</td>
      <td>32.74</td>
      <td>32.47</td>
      <td>32.45</td>
      <td>32.87</td>
      <td>3013600</td>
      <td>Good</td>
    </tr>
    <tr>
      <th>1</th>
      <td>69</td>
      <td>JD</td>
      <td>12-Apr-17</td>
      <td>32.31</td>
      <td>32.71</td>
      <td>32.31</td>
      <td>32.88</td>
      <td>6818000</td>
      <td>Good</td>
    </tr>
    <tr>
      <th>2</th>
      <td>68</td>
      <td>JD</td>
      <td>11-Apr-17</td>
      <td>32.70</td>
      <td>32.30</td>
      <td>32.22</td>
      <td>33.28</td>
      <td>8054200</td>
      <td>Good</td>
    </tr>
    <tr>
      <th>3</th>
      <td>67</td>
      <td>JD</td>
      <td>10-Apr-17</td>
      <td>32.16</td>
      <td>32.67</td>
      <td>32.15</td>
      <td>32.92</td>
      <td>8303800</td>
      <td>Good</td>
    </tr>
    <tr>
      <th>4</th>
      <td>66</td>
      <td>JD</td>
      <td>7-Apr-17</td>
      <td>32.20</td>
      <td>32.01</td>
      <td>31.57</td>
      <td>32.25</td>
      <td>5651000</td>
      <td>Good</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>plot函数绘图</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plt.plot([<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">1</span>])         <span class="comment">#从（0，0）到（1，1）的直线</span></span><br><span class="line">plt.title(<span class="string">&#x27;a straight line&#x27;</span>)  <span class="comment">#设置图形标题</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;x value&#x27;</span>)         <span class="comment">#设置x、y轴的标签</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;y value&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">&#x27;4137.svg&#x27;</span>,bbox_inches=<span class="string">&#x27;tight&#x27;</span>)    <span class="comment">#保存，svg是矢量图形</span></span><br><span class="line">plt.show()    <span class="comment">#把图形展示出来，正常情况下如果没有的话不会立即显示</span></span><br></pre></td></tr></table></figure>


<p>​<br><img src="lesson_files/lesson_704_0.png" alt="png"><br>​    </p>
<ul>
<li>多项式函数：用numpy中通过将变量x的各次幂系数，可以表示一个多项式函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a=np.array([<span class="number">2</span>,-<span class="number">3.5</span>,<span class="number">1.6</span>,-<span class="number">2</span>,<span class="number">9</span>])</span><br><span class="line">p=np.poly1d(a)    <span class="comment">#注意这里是数字1，不是字母</span></span><br><span class="line"><span class="built_in">print</span>(p)</span><br></pre></td></tr></table></figure>

<pre><code>   4       3       2
2 x - 3.5 x + 1.6 x - 2 x + 9
</code></pre>
<ul>
<li>p是一个poly1d对象，可以像函数一样调用，返回多项式的值，并且是一个ufunc对象<ul>
<li>poly1d可以进行四则运算，分别对应于多项式的四则运算；除法运算时，会返回两个值的元组，第一个是商多项式，第二个是余数多项式</li>
<li>poly1d可以积分，deriv()和微分，integ()</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x=np.linspace(-<span class="number">10</span>,<span class="number">10</span>,<span class="number">50</span>)</span><br><span class="line">y=p(x)</span><br><span class="line">plt.plot(x,y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>​<br><img src="lesson_files/lesson_708_0.png" alt="png"><br>​    </p>
<ul>
<li>绘制函数和其一阶导数：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p1=p.deriv(m=<span class="number">1</span>)</span><br><span class="line">y1=p1(x)</span><br><span class="line">plt.plot(x,y,x,y1)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>​<br><img src="lesson_files/lesson_710_0.png" alt="png"><br>​    </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(x,y,<span class="string">&#x27;b|&#x27;</span>,x,y1,<span class="string">&#x27;k-.&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>[&lt;matplotlib.lines.Line2D at 0x1bc66159640&gt;,
 &lt;matplotlib.lines.Line2D at 0x1bc661595b0&gt;]
</code></pre>
<p>​<br><img src="lesson_files/lesson_711_1.png" alt="png"><br>​    </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(np.random.randn(<span class="number">100</span>),linewidth=<span class="number">2.0</span>)</span><br></pre></td></tr></table></figure>




<pre><code>[&lt;matplotlib.lines.Line2D at 0x1bc66091a60&gt;]
</code></pre>
<p>​<br><img src="lesson_files/lesson_712_1.png" alt="png"><br>​    </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(jd_stock[<span class="string">&#x27;op&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>[&lt;matplotlib.lines.Line2D at 0x1bc66134bb0&gt;]
</code></pre>
<p>​<br><img src="lesson_files/lesson_713_1.png" alt="png"><br>​    </p>
<h2 id="创建图例"><a href="#创建图例" class="headerlink" title="创建图例"></a>创建图例</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(jddf[<span class="string">&#x27;op&#x27;</span>][:<span class="number">30</span>],label=<span class="string">&#x27;op&#x27;</span>)</span><br><span class="line">plt.plot(jddf[<span class="string">&#x27;cl&#x27;</span>][:<span class="number">30</span>],label=<span class="string">&#x27;cl&#x27;</span>)</span><br><span class="line">plt.legend(loc=<span class="string">&#x27;upper right&#x27;</span>, frameon=<span class="literal">False</span>)</span><br><span class="line">plt.xticks([xtick <span class="keyword">for</span> xtick <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">30</span>)],</span><br><span class="line">          <span class="built_in">list</span>(jddf[<span class="string">&#x27;time&#x27;</span>][:<span class="number">30</span>]),rotation=<span class="number">40</span>)</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">&#x27;4141.svg&#x27;</span>,bbox_inches=<span class="string">&#x27;tight&#x27;</span>)</span><br><span class="line">fig=plt.gcf()</span><br><span class="line">fig.set_size_inches(<span class="number">18</span>,<span class="number">10</span>)    <span class="comment">#设置图像大小</span></span><br><span class="line">plt.grid()    <span class="comment">#显示网格</span></span><br></pre></td></tr></table></figure>


<p>​<br><img src="lesson_files/lesson_715_0.png" alt="png"><br>​    </p>
<h2 id="拼接子图"><a href="#拼接子图" class="headerlink" title="拼接子图"></a>拼接子图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">x=np.linspace(-<span class="number">10</span>,<span class="number">10</span>,<span class="number">30</span>)</span><br><span class="line">y=p(x)</span><br><span class="line">p1=p.deriv(m=<span class="number">1</span>)</span><br><span class="line">y1=p(x)</span><br><span class="line">p2=p.deriv(m=<span class="number">2</span>)</span><br><span class="line">y2=p2(x)</span><br><span class="line">p3=p.deriv(m=<span class="number">3</span>)</span><br><span class="line">y3=p3(x)</span><br><span class="line">plt.subplot(<span class="number">221</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">第一个参数是子图行数，第二个是列数，第三个从1开始的序号</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">plt.plot(x,y)</span><br><span class="line">plt.title(<span class="string">&#x27;polynomial&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">222</span>);plt.plot(x,y1,<span class="string">&#x27;r&#x27;</span>);plt.title(<span class="string">&#x27;first&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">223</span>);plt.plot(x,y2,<span class="string">&#x27;k&#x27;</span>);plt.title(<span class="string">&#x27;second&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>Text(0.5, 1.0, &#39;second&#39;)
</code></pre>
<p>​<br><img src="lesson_files/lesson_717_1.png" alt="png"><br>​    </p>
<h2 id="绘制三维图形"><a href="#绘制三维图形" class="headerlink" title="绘制三维图形"></a>绘制三维图形</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="绘制动图"><a href="#绘制动图" class="headerlink" title="绘制动图"></a>绘制动图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="面向对象的绘图"><a href="#面向对象的绘图" class="headerlink" title="面向对象的绘图"></a>面向对象的绘图</h2><ul>
<li>引入两个类：Figure和FigureCanvas，前者是图像本身，后者是画框</li>
</ul>
<p><img src="attachment:image.png" alt="image.png"></p>
<h2 id="pandas绘图"><a href="#pandas绘图" class="headerlink" title="pandas绘图"></a>pandas绘图</h2><ul>
<li><p>调用plot方法绘制图形</p>
</li>
<li><p>有些时候需要绘制第二个y轴：在pandas中可以很方便的用secondary_y来实现</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jddf[<span class="string">&#x27;cl&#x27;</span>].plot(use_index=<span class="literal">True</span>, grid=<span class="literal">True</span>)</span><br><span class="line">jddf[<span class="string">&#x27;volume&#x27;</span>].plot(use_index=<span class="literal">True</span>, secondary_y = <span class="literal">True</span>, grid=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">&#x27;4152.svg&#x27;</span>,bbox_inches=<span class="string">&#x27;tight&#x27;</span>)</span><br></pre></td></tr></table></figure>


<p>​<br><img src="lesson_files/lesson_728_0.png" alt="png"><br>​    </p>
<h2 id="词云图"><a href="#词云图" class="headerlink" title="词云图"></a>词云图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -c conda-forge wordcloud</span><br></pre></td></tr></table></figure>

<pre><code>Note: you may need to restart the kernel to use updated packages.


ERROR: Could not open requirements file: [Errno 2] No such file or directory: &#39;conda-forge&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud, STOPWORDS</span><br><span class="line">s=pd.read_csv(<span class="string">r&#x27;C:\Users\Fu Jinyue\Downloads\傲慢与偏见.csv&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">s</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>目录</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Content</td>
    </tr>
    <tr>
      <th>1</th>
      <td>前言</td>
    </tr>
    <tr>
      <th>2</th>
      <td>第一章</td>
    </tr>
    <tr>
      <th>3</th>
      <td>第二章</td>
    </tr>
    <tr>
      <th>4</th>
      <td>第三章</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>2243</th>
      <td>乔治安娜现在长住在彭伯里了;姑嫂之间正如达西先生所料到的那么情投意合，互尊互爱，甚至融洽得完...</td>
    </tr>
    <tr>
      <th>2244</th>
      <td>咖苔琳夫人对她姨侄这门婚姻极其气愤。姨侄写信给她报喜，她竟毫不留情，直言无讳，写了封回信把他...</td>
    </tr>
    <tr>
      <th>2245</th>
      <td>新夫妇跟嘉丁纳夫妇一直保持着极其深厚的交情。达西和伊丽莎白都衷心喜爱他们，又一直感激他们，原...</td>
    </tr>
    <tr>
      <th>2246</th>
      <td>(完)</td>
    </tr>
    <tr>
      <th>2247</th>
      <td>--------</td>
    </tr>
  </tbody>
</table>
<p>2248 rows × 1 columns</p>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mylist=s</span><br><span class="line">word_list=[<span class="string">&quot; &quot;</span>.join(jieba.cut(sentence)) <span class="keyword">for</span> sentence <span class="keyword">in</span> mylist]</span><br><span class="line"><span class="comment">#利用jieba进行分词</span></span><br><span class="line">new_text=<span class="string">&#x27; &#x27;</span>.join(word_list) <span class="comment">#把所有文本字符联结起来</span></span><br><span class="line">fp=<span class="string">r&#x27;C:\Windows\Fonts\simfang.ttf&#x27;</span></span><br><span class="line"></span><br><span class="line">wd=WordCloud(font_path=fp,background_color=<span class="string">&#x27;white&#x27;</span>,max_words=<span class="number">400</span>,</span><br><span class="line">             width=<span class="number">2000</span>,height=<span class="number">2000</span>).generate(new_text)</span><br><span class="line"></span><br><span class="line">plt.imshow(wd)</span><br><span class="line">plt.axis(<span class="string">&#x27;Off&#x27;</span>)</span><br><span class="line"></span><br><span class="line">wd.to_file(<span class="string">&#x27;4172.png&#x27;</span>)</span><br><span class="line">plt.savefig(<span class="string">&#x27;4172.svg&#x27;</span>,bbox_inches=<span class="string">&#x27;tight&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>​<br><img src="lesson_files/lesson_732_0.png" alt="png"><br>​    </p>
<h1 id="【13】回归分析"><a href="#【13】回归分析" class="headerlink" title="【13】回归分析"></a>【13】回归分析</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mylist</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>目录</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Content</td>
    </tr>
    <tr>
      <th>1</th>
      <td>前言</td>
    </tr>
    <tr>
      <th>2</th>
      <td>第一章</td>
    </tr>
    <tr>
      <th>3</th>
      <td>第二章</td>
    </tr>
    <tr>
      <th>4</th>
      <td>第三章</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>2243</th>
      <td>乔治安娜现在长住在彭伯里了;姑嫂之间正如达西先生所料到的那么情投意合，互尊互爱，甚至融洽得完...</td>
    </tr>
    <tr>
      <th>2244</th>
      <td>咖苔琳夫人对她姨侄这门婚姻极其气愤。姨侄写信给她报喜，她竟毫不留情，直言无讳，写了封回信把他...</td>
    </tr>
    <tr>
      <th>2245</th>
      <td>新夫妇跟嘉丁纳夫妇一直保持着极其深厚的交情。达西和伊丽莎白都衷心喜爱他们，又一直感激他们，原...</td>
    </tr>
    <tr>
      <th>2246</th>
      <td>(完)</td>
    </tr>
    <tr>
      <th>2247</th>
      <td>--------</td>
    </tr>
  </tbody>
</table>
<p>2248 rows × 1 columns</p>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>




<pre><code>&#39;目录&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> statsmodels.api <span class="keyword">as</span> sm</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">murder=pd.read_csv(<span class="string">r&#x27;C:\Users\Fu Jinyue\Downloads\murder.csv&#x27;</span>)</span><br><span class="line">murder.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>region</th>
      <th>illiteracy</th>
      <th>murder</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>4</td>
      <td>0.5</td>
      <td>11.5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>8</td>
      <td>0.5</td>
      <td>2.3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8</td>
      <td>0.5</td>
      <td>1.7</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>0.6</td>
      <td>5.3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>0.6</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.scatter(murder[<span class="string">&#x27;illiteracy&#x27;</span>],murder[<span class="string">&#x27;murder&#x27;</span>],c=<span class="string">&#x27;blue&#x27;</span>,alpha=<span class="number">0.75</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>​<br><img src="lesson_files/lesson_739_0.png" alt="png"><br>​    </p>
<ul>
<li>scipy提供了stats.linregress(x,y)进行一元回归</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line">murder_model1=stats.linregress(murder[<span class="string">&#x27;illiteracy&#x27;</span>],murder[<span class="string">&#x27;murder&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(murder_model1)</span><br><span class="line"><span class="built_in">print</span>(murder_model1.rvalue**<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<pre><code>LinregressResult(slope=4.257456742653117, intercept=2.396775611095853, rvalue=0.7029751986841699, pvalue=1.2579116392501817e-08, stderr=0.6217132752343032, intercept_stderr=0.8184448535559644)
0.49417412996504817
</code></pre>
<ul>
<li>利用statsmodel来线性回归：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> statsmodels.formula.api <span class="keyword">import</span> ols</span><br><span class="line">formula=<span class="string">&#x27;murder~illiteracy&#x27;</span></span><br><span class="line">murder_model2=ols(formula,data=murder).fit()</span><br><span class="line">murder_model2.summary2()    <span class="comment">#注意是summary2方法</span></span><br></pre></td></tr></table></figure>




<table class="simpletable">
<tr>
        <td>Model:</td>               <td>OLS</td>         <td>Adj. R-squared:</td>     <td>0.484</td> 
</tr>
<tr>
  <td>Dependent Variable:</td>      <td>murder</td>             <td>AIC:</td>         <td>241.4099</td>
</tr>
<tr>
         <td>Date:</td>        <td>2021-11-01 17:14</td>        <td>BIC:</td>         <td>245.2340</td>
</tr>
<tr>
   <td>No. Observations:</td>         <td>50</td>          <td>Log-Likelihood:</td>    <td>-118.70</td>
</tr>
<tr>
       <td>Df Model:</td>              <td>1</td>           <td>F-statistic:</td>       <td>46.89</td> 
</tr>
<tr>
     <td>Df Residuals:</td>           <td>48</td>        <td>Prob (F-statistic):</td> <td>1.26e-08</td>
</tr>
<tr>
      <td>R-squared:</td>            <td>0.494</td>            <td>Scale:</td>         <td>7.0367</td> 
</tr>
</table>
<table class="simpletable">
<tr>
       <td></td>       <th>Coef.</th> <th>Std.Err.</th>    <th>t</th>    <th>P>|t|</th> <th>[0.025</th> <th>0.975]</th>
</tr>
<tr>
  <th>Intercept</th>  <td>2.3968</td>  <td>0.8184</td>  <td>2.9285</td> <td>0.0052</td> <td>0.7512</td> <td>4.0424</td>
</tr>
<tr>
  <th>illiteracy</th> <td>4.2575</td>  <td>0.6217</td>  <td>6.8479</td> <td>0.0000</td> <td>3.0074</td> <td>5.5075</td>
</tr>
</table>
<table class="simpletable">
<tr>
     <td>Omnibus:</td>    <td>0.452</td>  <td>Durbin-Watson:</td>   <td>2.000</td>
</tr>
<tr>
  <td>Prob(Omnibus):</td> <td>0.798</td> <td>Jarque-Bera (JB):</td> <td>0.452</td>
</tr>
<tr>
       <td>Skew:</td>     <td>0.210</td>     <td>Prob(JB):</td>     <td>0.798</td>
</tr>
<tr>
     <td>Kurtosis:</td>   <td>2.797</td>  <td>Condition No.:</td>     <td>4</td>  
</tr>
</table>



<ul>
<li>另一种调用方法：</li>
</ul>
<h2 id="模型诊断"><a href="#模型诊断" class="headerlink" title="模型诊断"></a>模型诊断</h2><ul>
<li>绘制残差的qq/pp图：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sm.qqplot(murder_model2.resid,fit=<span class="literal">True</span>,line=<span class="string">&#x27;45&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>​<br><img src="lesson_files/lesson_747_0.png" alt="png"><br>​    </p>
<ul>
<li>检验残差：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fig=plt.gcf()</span><br><span class="line">fig.set_size_inches(<span class="number">8</span>,<span class="number">4</span>)</span><br><span class="line">plt.subplot(<span class="number">121</span>)</span><br><span class="line">plt.plot(murder[<span class="string">&#x27;illiteracy&#x27;</span>],murder_model2.resid,<span class="string">&#x27;o&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>[&lt;matplotlib.lines.Line2D at 0x1bc6b680f70&gt;]
</code></pre>
<p>​<br><img src="lesson_files/lesson_749_1.png" alt="png"><br>​    </p>
<ul>
<li><p>绘制预测值的标准差和置信区间：</p>
</li>
<li><p>一起画出来回归诊断的图形：statsmodel.graphics.regressionplots</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fig=plt.figure(figsize=(<span class="number">12</span>,<span class="number">6</span>))</span><br><span class="line"><span class="keyword">from</span> statsmodels.graphics.regressionplots <span class="keyword">import</span> plot_regress_exog</span><br><span class="line">plot_regress_exog(murder_model2,<span class="number">1</span>,fig=fig)</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">&#x27;9261.svg&#x27;</span>,bbox_inches=<span class="string">&#x27;tight&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<pre><code>eval_env: 1
</code></pre>
<p><img src="lesson_files/lesson_752_1.png" alt="png"></p>
<h2 id="多元线性回归分析"><a href="#多元线性回归分析" class="headerlink" title="多元线性回归分析"></a>多元线性回归分析</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">salary=pd.read_csv(<span class="string">r&#x27;C:\Users\Fu Jinyue\Downloads\salary_r.csv&#x27;</span>)</span><br><span class="line">salary=salary.dropna(axis=<span class="number">0</span>)    <span class="comment">#丢掉缺失值</span></span><br><span class="line">salary.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>position</th>
      <th>ID</th>
      <th>Gender</th>
      <th>Education</th>
      <th>Current_Salary</th>
      <th>Begin_Salary</th>
      <th>Experience</th>
      <th>Age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>15</td>
      <td>57000</td>
      <td>27000</td>
      <td>144.0</td>
      <td>55.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>34</td>
      <td>1</td>
      <td>19</td>
      <td>92000</td>
      <td>39990</td>
      <td>175.0</td>
      <td>58.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>18</td>
      <td>1</td>
      <td>16</td>
      <td>103750</td>
      <td>27510</td>
      <td>70.0</td>
      <td>51.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>200</td>
      <td>1</td>
      <td>17</td>
      <td>67500</td>
      <td>34980</td>
      <td>9.0</td>
      <td>44.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>199</td>
      <td>1</td>
      <td>16</td>
      <td>51250</td>
      <td>27480</td>
      <td>69.0</td>
      <td>49.0</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">formula=<span class="string">&#x27;Current_Salary~Education+Begin_Salary+Experience+Age&#x27;</span></span><br><span class="line">salary_model1=ols(formula,data=salary).fit()</span><br><span class="line">salary_model1.summary2()</span><br></pre></td></tr></table></figure>




<table class="simpletable">
<tr>
        <td>Model:</td>               <td>OLS</td>         <td>Adj. R-squared:</td>      <td>0.781</td>  
</tr>
<tr>
  <td>Dependent Variable:</td>  <td>Current_Salary</td>         <td>AIC:</td>          <td>9243.8648</td>
</tr>
<tr>
         <td>Date:</td>        <td>2021-11-01 17:14</td>        <td>BIC:</td>          <td>9264.3664</td>
</tr>
<tr>
   <td>No. Observations:</td>         <td>446</td>         <td>Log-Likelihood:</td>     <td>-4616.9</td> 
</tr>
<tr>
       <td>Df Model:</td>              <td>4</td>           <td>F-statistic:</td>        <td>398.8</td>  
</tr>
<tr>
     <td>Df Residuals:</td>           <td>441</td>       <td>Prob (F-statistic):</td>  <td>5.53e-145</td>
</tr>
<tr>
      <td>R-squared:</td>            <td>0.783</td>            <td>Scale:</td>        <td>5.8068e+07</td>
</tr>
</table>
<table class="simpletable">
<tr>
        <td></td>         <th>Coef.</th>  <th>Std.Err.</th>     <th>t</th>     <th>P>|t|</th>   <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>Intercept</th>    <td>703.3118</td> <td>3147.8045</td> <td>0.2234</td>  <td>0.8233</td> <td>-5483.2503</td> <td>6889.8740</td>
</tr>
<tr>
  <th>Education</th>    <td>490.5022</td> <td>180.7222</td>  <td>2.7141</td>  <td>0.0069</td>  <td>135.3185</td>  <td>845.6860</td> 
</tr>
<tr>
  <th>Begin_Salary</th>  <td>1.8936</td>   <td>0.0722</td>   <td>26.2203</td> <td>0.0000</td>   <td>1.7517</td>    <td>2.0356</td>  
</tr>
<tr>
  <th>Experience</th>   <td>-11.6277</td>  <td>5.9764</td>   <td>-1.9456</td> <td>0.0523</td>  <td>-23.3735</td>   <td>0.1182</td>  
</tr>
<tr>
  <th>Age</th>          <td>-74.9263</td>  <td>53.2311</td>  <td>-1.4076</td> <td>0.1600</td>  <td>-179.5445</td>  <td>29.6918</td> 
</tr>
</table>
<table class="simpletable">
<tr>
     <td>Omnibus:</td>    <td>194.312</td>  <td>Durbin-Watson:</td>     <td>1.887</td> 
</tr>
<tr>
  <td>Prob(Omnibus):</td>  <td>0.000</td>  <td>Jarque-Bera (JB):</td> <td>1481.311</td>
</tr>
<tr>
       <td>Skew:</td>      <td>1.695</td>      <td>Prob(JB):</td>       <td>0.000</td> 
</tr>
<tr>
     <td>Kurtosis:</td>   <td>11.259</td>   <td>Condition No.:</td>    <td>160242</td> 
</tr>
</table>



<ul>
<li>通过p值大小可以判定各个回归系数是否显著，通常不检验截距项。若给定显著性水平α=1，则education、experience、begin salary都显著，但age不显著</li>
<li><strong>不显著的变量，应当从模型中剔除</strong><ul>
<li><strong>从p值大的变量开始，一个一个剔除</strong></li>
<li>这样做的原因是，比如下面，剔除age之后，experiences在0.05的水平上也显著了</li>
</ul>
</li>
<li>得到回归方程式，可以进行预测了</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">formula=<span class="string">&#x27;Current_Salary~Education+Begin_Salary+Experience-Age&#x27;</span></span><br><span class="line">salary_model2=ols(formula,data=salary).fit()</span><br><span class="line"><span class="built_in">print</span>(salary_model2.summary2())</span><br></pre></td></tr></table></figure>

<pre><code>                   Results: Ordinary least squares
=====================================================================
Model:                OLS              Adj. R-squared:     0.781     
Dependent Variable:   Current_Salary   AIC:                9243.8641 
Date:                 2021-11-01 17:17 BIC:                9260.2653 
No. Observations:     446              Log-Likelihood:     -4617.9   
Df Model:             3                F-statistic:        529.9     
Df Residuals:         442              Prob (F-statistic): 5.93e-146 
R-squared:            0.782            Scale:              5.8197e+07
---------------------------------------------------------------------
               Coef.     Std.Err.    t    P&gt;|t|    [0.025     0.975] 
---------------------------------------------------------------------
Intercept    -2708.6776 2010.3943 -1.3473 0.1786 -6659.7972 1242.4419
Education      512.4963  180.2451  2.8433 0.0047   158.2523  866.7403
Begin_Salary     1.8939    0.0723 26.1949 0.0000     1.7518    2.0360
Experience     -18.2230    3.7139 -4.9067 0.0000   -25.5221  -10.9239
---------------------------------------------------------------------
Omnibus:               191.615       Durbin-Watson:          1.876   
Prob(Omnibus):         0.000         Jarque-Bera (JB):       1424.408
Skew:                  1.675         Prob(JB):               0.000   
Kurtosis:              11.088        Condition No.:          102459  
=====================================================================
* The condition number is large (1e+05). This might indicate
strong multicollinearity or other numerical problems.
</code></pre>
<h3 id="定性自变量的线性回归分析"><a href="#定性自变量的线性回归分析" class="headerlink" title="定性自变量的线性回归分析"></a>定性自变量的线性回归分析</h3><ul>
<li>本例中的性别、职位对当前薪酬的影响。定性因素对因变量的影响需要进行特殊处理，也就是转化为0、1的dummy variables</li>
<li><strong>设置虚拟变量的原则：</strong><ul>
<li>1.对于k个表现值的变量，只设定（k-1）个虚拟变量</li>
<li>2.虚拟变量的值通常都是0或1</li>
<li>3.对于每个样本而言，同一个定性变量对应虚拟变量的值之和不超过1<ul>
<li>只能是（0，0，0，……）</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> patsy.contrasts <span class="keyword">import</span> Treatment</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dm=pd.get_dummies(salary[<span class="string">&#x27;position&#x27;</span>],prefix=<span class="string">&#x27;position_&#x27;</span>)</span><br><span class="line">dm.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>position__1</th>
      <th>position__2</th>
      <th>position__3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">salary=salary.join(dm)</span><br><span class="line">salary[[<span class="string">&#x27;position__1&#x27;</span>,<span class="string">&#x27;position__2&#x27;</span>,<span class="string">&#x27;position__3&#x27;</span>]]</span><br></pre></td></tr></table></figure>


<pre><code>---------------------------------------------------------------------------

ValueError                                Traceback (most recent call last)

C:\Users\FUJINY~1\AppData\Local\Temp/ipykernel_6400/3735361590.py in &lt;module&gt;
----&gt; 1 salary=salary.join(dm)
      2 salary[[&#39;position__1&#39;,&#39;position__2&#39;,&#39;position__3&#39;]]


c:\users\fu jinyue\appdata\local\programs\python\python39\lib\site-packages\pandas\core\frame.py in join(self, other, on, how, lsuffix, rsuffix, sort)
   9097         5  K5  A5  NaN
   9098         &quot;&quot;&quot;
-&gt; 9099         return self._join_compat(
   9100             other, on=on, how=how, lsuffix=lsuffix, rsuffix=rsuffix, sort=sort
   9101         )


c:\users\fu jinyue\appdata\local\programs\python\python39\lib\site-packages\pandas\core\frame.py in _join_compat(self, other, on, how, lsuffix, rsuffix, sort)
   9128                     sort=sort,
   9129                 )
-&gt; 9130             return merge(
   9131                 self,
   9132                 other,


c:\users\fu jinyue\appdata\local\programs\python\python39\lib\site-packages\pandas\core\reshape\merge.py in merge(left, right, how, on, left_on, right_on, left_index, right_index, sort, suffixes, copy, indicator, validate)
    119         validate=validate,
    120     )
--&gt; 121     return op.get_result()
    122 
    123 


c:\users\fu jinyue\appdata\local\programs\python\python39\lib\site-packages\pandas\core\reshape\merge.py in get_result(self)
    715         join_index, left_indexer, right_indexer = self._get_join_info()
    716 
--&gt; 717         llabels, rlabels = _items_overlap_with_suffix(
    718             self.left._info_axis, self.right._info_axis, self.suffixes
    719         )


c:\users\fu jinyue\appdata\local\programs\python\python39\lib\site-packages\pandas\core\reshape\merge.py in _items_overlap_with_suffix(left, right, suffixes)
   2306 
   2307     if not lsuffix and not rsuffix:
-&gt; 2308         raise ValueError(f&quot;columns overlap but no suffix specified: &#123;to_rename&#125;&quot;)
   2309 
   2310     def renamer(x, suffix):


ValueError: columns overlap but no suffix specified: Index([&#39;position__1&#39;, &#39;position__2&#39;, &#39;position__3&#39;], dtype=&#39;object&#39;)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">formula=<span class="string">&#x27;Current_Salary~Education+Begin_Salary+Experience-Age+position__1+position__2+Gender&#x27;</span></span><br><span class="line">salary_model3=ols(formula,data=salary).fit()</span><br><span class="line"><span class="built_in">print</span>(salary_model3.summary2())</span><br></pre></td></tr></table></figure>

<pre><code>                   Results: Ordinary least squares
=====================================================================
Model:                OLS              Adj. R-squared:     0.813     
Dependent Variable:   Current_Salary   AIC:                9175.9545 
Date:                 2021-11-01 17:32 BIC:                9204.6567 
No. Observations:     446              Log-Likelihood:     -4581.0   
Df Model:             6                F-statistic:        323.8     
Df Residuals:         439              Prob (F-statistic): 1.02e-157 
R-squared:            0.816            Scale:              4.9647e+07
---------------------------------------------------------------------
               Coef.     Std.Err.    t    P&gt;|t|    [0.025    0.975]  
---------------------------------------------------------------------
Intercept     3908.9330 2155.2003  1.8137 0.0704 -326.8598  8144.7258
Education      506.7274  172.5026  2.9375 0.0035  167.6939   845.7609
Begin_Salary     1.3221    0.0988 13.3870 0.0000    1.1280     1.5162
Experience     -22.5668    3.7782 -5.9728 0.0000  -29.9925   -15.1411
position__1  11501.1261 1543.7087  7.4503 0.0000 8467.1481 14535.1041
position__2   6691.6927 1692.3071  3.9542 0.0001 3365.6621 10017.7234
Gender        1970.6471  813.6961  2.4218 0.0158  371.4232  3569.8711
---------------------------------------------------------------------
Omnibus:               206.434       Durbin-Watson:          1.962   
Prob(Omnibus):         0.000         Jarque-Bera (JB):       1762.413
Skew:                  1.786         Prob(JB):               0.000   
Kurtosis:              12.060        Condition No.:          130698  
=====================================================================
* The condition number is large (1e+05). This might indicate
strong multicollinearity or other numerical problems.
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"># Python</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/10/31/%E5%A4%87%E5%BF%98%E5%BD%95/" rel="prev" title="备忘录">
                  <i class="fa fa-chevron-left"></i> 备忘录
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Somebody</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/xiaomai.model.json"},"display":{"position":"right","width":200,"height":400},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
